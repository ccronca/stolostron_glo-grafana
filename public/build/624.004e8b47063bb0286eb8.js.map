{"version":3,"file":"624.004e8b47063bb0286eb8.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/components/DynamicTableWithGuidelines.tsx","webpack://grafana/./public/app/features/alerting/unified/components/RuleLocation.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleHealth.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleState.tsx","webpack://grafana/./.yarn/cache/date-fns-npm-2.30.0-895c790e0f-70b3e8ea7a.zip/node_modules/date-fns/esm/isBefore/index.js","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleActionsButtons.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleConfigStatus.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RulesTable.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useHasRuler.ts"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { DynamicTable, DynamicTableProps } from './DynamicTable';\n\nexport type DynamicTableWithGuidelinesProps<T> = Omit<DynamicTableProps<T>, 'renderPrefixHeader, renderPrefixCell'>;\n\n// DynamicTable, but renders visual guidelines on the left, for larger screen widths\nexport const DynamicTableWithGuidelines = <T extends object>({\n  renderExpandedContent,\n  ...props\n}: DynamicTableWithGuidelinesProps<T>) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <DynamicTable\n      renderExpandedContent={\n        renderExpandedContent\n          ? (item, index, items) => (\n              <>\n                {!(index === items.length - 1) && <div className={cx(styles.contentGuideline, styles.guideline)} />}\n                {renderExpandedContent(item, index, items)}\n              </>\n            )\n          : undefined\n      }\n      renderPrefixHeader={() => (\n        <div className={styles.relative}>\n          <div className={cx(styles.headerGuideline, styles.guideline)} />\n        </div>\n      )}\n      renderPrefixCell={(_, index, items) => (\n        <div className={styles.relative}>\n          <div className={cx(styles.topGuideline, styles.guideline)} />\n          {!(index === items.length - 1) && <div className={cx(styles.bottomGuideline, styles.guideline)} />}\n        </div>\n      )}\n      {...props}\n    />\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  relative: css`\n    position: relative;\n    height: 100%;\n  `,\n  guideline: css`\n    left: -19px;\n    border-left: 1px solid ${theme.colors.border.weak};\n    position: absolute;\n\n    ${theme.breakpoints.down('md')} {\n      display: none;\n    }\n  `,\n  topGuideline: css`\n    width: 18px;\n    border-bottom: 1px solid ${theme.colors.border.medium};\n    top: 0;\n    bottom: 50%;\n  `,\n  bottomGuideline: css`\n    top: 50%;\n    bottom: 0;\n  `,\n  contentGuideline: css`\n    top: 0;\n    bottom: 0;\n    left: -49px !important;\n  `,\n  headerGuideline: css`\n    top: -17px;\n    bottom: 0;\n  `,\n});\n","import React from 'react';\n\nimport { Icon } from '@grafana/ui';\n\ninterface Props {\n  namespace: string;\n  group?: string;\n}\n\nconst RuleLocation = ({ namespace, group }: Props) => {\n  if (!group) {\n    return <>{namespace}</>;\n  }\n\n  return (\n    <>\n      {namespace} <Icon name=\"angle-right\" /> {group}\n    </>\n  );\n};\n\nexport { RuleLocation };\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport { Rule } from 'app/types/unified-alerting';\n\ninterface Prom {\n  rule: Rule;\n}\n\nexport const RuleHealth = ({ rule }: Prom) => {\n  const style = useStyles2(getStyle);\n\n  if (rule.health === 'err' || rule.health === 'error') {\n    return (\n      <Tooltip theme=\"error\" content={rule.lastError || 'No error message provided.'}>\n        <div className={style.warn}>\n          <Icon name=\"exclamation-triangle\" />\n          <span>error</span>\n        </div>\n      </Tooltip>\n    );\n  }\n\n  return <>{rule.health}</>;\n};\n\nconst getStyle = (theme: GrafanaTheme2) => ({\n  warn: css`\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n\n    color: ${theme.colors.warning.text};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\n\nimport { GrafanaTheme2, intervalToAbbreviatedDurationString } from '@grafana/data';\nimport { Spinner, useStyles2, Stack } from '@grafana/ui';\nimport { CombinedRule } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\nimport { isAlertingRule, isRecordingRule, getFirstActiveAt } from '../../utils/rules';\n\nimport { AlertStateTag } from './AlertStateTag';\n\ninterface Props {\n  rule: CombinedRule;\n  isDeleting: boolean;\n  isCreating: boolean;\n  isPaused?: boolean;\n}\n\nexport const RuleState = ({ rule, isDeleting, isCreating, isPaused }: Props) => {\n  const style = useStyles2(getStyle);\n  const { promRule } = rule;\n\n  // return how long the rule has been in its firing state, if any\n  const forTime = useMemo(() => {\n    if (\n      promRule &&\n      isAlertingRule(promRule) &&\n      promRule.alerts?.length &&\n      promRule.state !== PromAlertingRuleState.Inactive\n    ) {\n      // find earliest alert\n      const firstActiveAt = promRule.activeAt ? new Date(promRule.activeAt) : getFirstActiveAt(promRule);\n\n      // calculate time elapsed from earliest alert\n      if (firstActiveAt) {\n        return (\n          <span title={String(firstActiveAt)} className={style.for}>\n            for{' '}\n            {intervalToAbbreviatedDurationString(\n              {\n                start: firstActiveAt,\n                end: new Date(),\n              },\n              false\n            )}\n          </span>\n        );\n      }\n    }\n    return null;\n  }, [promRule, style]);\n\n  if (isDeleting) {\n    return (\n      <Stack gap={1}>\n        <Spinner />\n        Deleting\n      </Stack>\n    );\n  } else if (isCreating) {\n    return (\n      <Stack gap={1}>\n        <Spinner />\n        Creating\n      </Stack>\n    );\n  } else if (promRule && isAlertingRule(promRule)) {\n    return (\n      <Stack gap={1}>\n        <AlertStateTag state={promRule.state} isPaused={isPaused} />\n        {forTime}\n      </Stack>\n    );\n  } else if (promRule && isRecordingRule(promRule)) {\n    return <>Recording rule</>;\n  }\n  return <>n/a</>;\n};\n\nconst getStyle = (theme: GrafanaTheme2) => ({\n  for: css`\n    font-size: ${theme.typography.bodySmall.fontSize};\n    color: ${theme.colors.text.secondary};\n    white-space: nowrap;\n    padding-top: 2px;\n  `,\n});\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isBefore\n * @category Common Helpers\n * @summary Is the first date before the second one?\n *\n * @description\n * Is the first date before the second one?\n *\n * @param {Date|Number} date - the date that should be before the other one to return true\n * @param {Date|Number} dateToCompare - the date to compare with\n * @returns {Boolean} the first date is before the second date\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Is 10 July 1989 before 11 February 1987?\n * const result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> false\n */\nexport default function isBefore(dirtyDate, dirtyDateToCompare) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var dateToCompare = toDate(dirtyDateToCompare);\n  return date.getTime() < dateToCompare.getTime();\n}","import { css } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport {\n  Button,\n  ClipboardButton,\n  ConfirmModal,\n  Dropdown,\n  Icon,\n  LinkButton,\n  Menu,\n  Tooltip,\n  useStyles2,\n  Stack,\n} from '@grafana/ui';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { useDispatch } from 'app/types';\nimport { CombinedRule, RuleIdentifier, RulesSource } from 'app/types/unified-alerting';\n\nimport { AlertRuleAction, useAlertRuleAbility } from '../../hooks/useAbilities';\nimport { deleteRuleAction } from '../../state/actions';\nimport { getRulesSourceName } from '../../utils/datasource';\nimport { createShareLink, createViewLink } from '../../utils/misc';\nimport * as ruleId from '../../utils/rule-id';\nimport { isGrafanaRulerRule } from '../../utils/rules';\nimport { createUrl } from '../../utils/url';\n\nimport { RedirectToCloneRule } from './CloneRule';\n\nexport const matchesWidth = (width: number) => window.matchMedia(`(max-width: ${width}px)`).matches;\n\ninterface Props {\n  rule: CombinedRule;\n  rulesSource: RulesSource;\n}\n\nexport const RuleActionsButtons = ({ rule, rulesSource }: Props) => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const notifyApp = useAppNotification();\n  const style = useStyles2(getStyles);\n\n  const [redirectToClone, setRedirectToClone] = useState<\n    { identifier: RuleIdentifier; isProvisioned: boolean } | undefined\n  >(undefined);\n\n  const { namespace, group, rulerRule } = rule;\n  const [ruleToDelete, setRuleToDelete] = useState<CombinedRule>();\n\n  const returnTo = location.pathname + location.search;\n  const isViewMode = inViewMode(location.pathname);\n\n  const isProvisioned = isGrafanaRulerRule(rule.rulerRule) && Boolean(rule.rulerRule.grafana_alert.provenance);\n\n  const [editRuleSupported, editRuleAllowed] = useAlertRuleAbility(rule, AlertRuleAction.Update);\n  const [deleteRuleSupported, deleteRuleAllowed] = useAlertRuleAbility(rule, AlertRuleAction.Delete);\n  const [duplicateRuleSupported, duplicateRuleAllowed] = useAlertRuleAbility(rule, AlertRuleAction.Duplicate);\n  const [modifyExportSupported, modifyExportAllowed] = useAlertRuleAbility(rule, AlertRuleAction.ModifyExport);\n\n  const canEditRule = editRuleSupported && editRuleAllowed;\n  const canDeleteRule = deleteRuleSupported && deleteRuleAllowed;\n  const canDuplicateRule = duplicateRuleSupported && duplicateRuleAllowed;\n  const canModifyExport = modifyExportSupported && modifyExportAllowed;\n\n  const buttons: JSX.Element[] = [];\n  const moreActions: JSX.Element[] = [];\n\n  const deleteRule = () => {\n    if (ruleToDelete && ruleToDelete.rulerRule) {\n      const identifier = ruleId.fromRulerRule(\n        getRulesSourceName(ruleToDelete.namespace.rulesSource),\n        ruleToDelete.namespace.name,\n        ruleToDelete.group.name,\n        ruleToDelete.rulerRule\n      );\n\n      dispatch(deleteRuleAction(identifier, { navigateTo: isViewMode ? '/alerting/list' : undefined }));\n      setRuleToDelete(undefined);\n    }\n  };\n\n  const buildShareUrl = () => createShareLink(rulesSource, rule);\n\n  const sourceName = getRulesSourceName(rulesSource);\n\n  if (!isViewMode) {\n    buttons.push(\n      <Tooltip placement=\"top\" content={'View'}>\n        <LinkButton\n          className={style.button}\n          title=\"View\"\n          size=\"sm\"\n          key=\"view\"\n          variant=\"secondary\"\n          icon=\"eye\"\n          href={createViewLink(rulesSource, rule, returnTo)}\n        />\n      </Tooltip>\n    );\n  }\n\n  if (rulerRule) {\n    const identifier = ruleId.fromRulerRule(sourceName, namespace.name, group.name, rulerRule);\n\n    if (canEditRule) {\n      const editURL = createUrl(`/alerting/${encodeURIComponent(ruleId.stringifyIdentifier(identifier))}/edit`, {\n        returnTo,\n      });\n\n      buttons.push(\n        <Tooltip placement=\"top\" content={'Edit'}>\n          <LinkButton\n            title=\"Edit\"\n            className={style.button}\n            size=\"sm\"\n            key=\"edit\"\n            variant=\"secondary\"\n            icon=\"pen\"\n            href={editURL}\n          />\n        </Tooltip>\n      );\n    }\n\n    if (isViewMode) {\n      buttons.push(\n        <ClipboardButton\n          key=\"copy\"\n          icon=\"copy\"\n          onClipboardError={(copiedText) => {\n            notifyApp.error('Error while copying URL', copiedText);\n          }}\n          className={style.button}\n          size=\"sm\"\n          getText={buildShareUrl}\n        >\n          Copy link to rule\n        </ClipboardButton>\n      );\n    }\n\n    if (canDuplicateRule) {\n      moreActions.push(\n        <Menu.Item label=\"Duplicate\" icon=\"copy\" onClick={() => setRedirectToClone({ identifier, isProvisioned })} />\n      );\n    }\n\n    if (canModifyExport) {\n      moreActions.push(\n        <Menu.Item\n          label=\"Modify export\"\n          icon=\"edit\"\n          url={createUrl(`/alerting/${encodeURIComponent(ruleId.stringifyIdentifier(identifier))}/modify-export`, {\n            returnTo: location.pathname + location.search,\n          })}\n        />\n      );\n    }\n\n    if (canDeleteRule) {\n      moreActions.push(<Menu.Item label=\"Delete\" icon=\"trash-alt\" onClick={() => setRuleToDelete(rule)} />);\n    }\n  }\n\n  if (buttons.length || moreActions.length) {\n    return (\n      <>\n        <Stack gap={1}>\n          {buttons.map((button, index) => (\n            <React.Fragment key={index}>{button}</React.Fragment>\n          ))}\n          {moreActions.length > 0 && (\n            <Dropdown\n              overlay={\n                <Menu>\n                  {moreActions.map((action) => (\n                    <React.Fragment key={uniqueId('action_')}>{action}</React.Fragment>\n                  ))}\n                </Menu>\n              }\n            >\n              <Button variant=\"secondary\" size=\"sm\">\n                More\n                <Icon name=\"angle-down\" />\n              </Button>\n            </Dropdown>\n          )}\n        </Stack>\n        {!!ruleToDelete && (\n          <ConfirmModal\n            isOpen={true}\n            title=\"Delete rule\"\n            body={\n              <div>\n                <p>\n                  Deleting &quot;<strong>{ruleToDelete.name}</strong>&quot; will permanently remove it from your alert\n                  rule list.\n                </p>\n                <p>Are you sure you want to delete this rule?</p>\n              </div>\n            }\n            confirmText=\"Yes, delete\"\n            icon=\"exclamation-triangle\"\n            onConfirm={deleteRule}\n            onDismiss={() => setRuleToDelete(undefined)}\n          />\n        )}\n\n        {redirectToClone && (\n          <RedirectToCloneRule\n            identifier={redirectToClone.identifier}\n            isProvisioned={redirectToClone.isProvisioned}\n            onDismiss={() => setRedirectToClone(undefined)}\n          />\n        )}\n      </>\n    );\n  }\n\n  return null;\n};\n\nfunction inViewMode(pathname: string): boolean {\n  return pathname.endsWith('/view');\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  button: css`\n    padding: 0 ${theme.spacing(2)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data/src';\nimport { config } from '@grafana/runtime/src';\nimport { Icon, Tooltip, useStyles2 } from '@grafana/ui/src';\n\nimport { CombinedRule } from '../../../../../types/unified-alerting';\nimport { checkEvaluationIntervalGlobalLimit } from '../../utils/config';\n\ninterface RuleConfigStatusProps {\n  rule: CombinedRule;\n}\n\nexport function RuleConfigStatus({ rule }: RuleConfigStatusProps) {\n  const styles = useStyles2(getStyles);\n\n  const { exceedsLimit } = useMemo(\n    () => checkEvaluationIntervalGlobalLimit(rule.group.interval),\n    [rule.group.interval]\n  );\n\n  if (!exceedsLimit) {\n    return null;\n  }\n\n  return (\n    <Tooltip\n      theme=\"error\"\n      content={\n        <div>\n          A minimum evaluation interval of{' '}\n          <span className={styles.globalLimitValue}>{config.unifiedAlerting.minInterval}</span> has been configured in\n          Grafana and will be used instead of the {rule.group.interval} interval configured for the Rule Group.\n        </div>\n      }\n    >\n      <Icon name=\"stopwatch-slash\" className={styles.icon} />\n    </Tooltip>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    globalLimitValue: css`\n      font-weight: ${theme.typography.fontWeightBold};\n    `,\n    icon: css`\n      fill: ${theme.colors.warning.text};\n    `,\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { isBefore, formatDuration } from 'date-fns';\nimport React, { useCallback, useMemo } from 'react';\n\nimport {\n  GrafanaTheme2,\n  addDurationToDate,\n  isValidDate,\n  isValidDuration,\n  parseDuration,\n  dateTimeFormat,\n  dateTime,\n} from '@grafana/data';\nimport { useStyles2, Tooltip } from '@grafana/ui';\nimport { CombinedRule } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { useHasRuler } from '../../hooks/useHasRuler';\nimport { Annotation } from '../../utils/constants';\nimport { isGrafanaRulerRule, isGrafanaRulerRulePaused } from '../../utils/rules';\nimport { DynamicTable, DynamicTableColumnProps, DynamicTableItemProps } from '../DynamicTable';\nimport { DynamicTableWithGuidelines } from '../DynamicTableWithGuidelines';\nimport { ProvisioningBadge } from '../Provisioning';\nimport { RuleLocation } from '../RuleLocation';\nimport { Tokenize } from '../Tokenize';\n\nimport { RuleActionsButtons } from './RuleActionsButtons';\nimport { RuleConfigStatus } from './RuleConfigStatus';\nimport { RuleDetails } from './RuleDetails';\nimport { RuleHealth } from './RuleHealth';\nimport { RuleState } from './RuleState';\n\ntype RuleTableColumnProps = DynamicTableColumnProps<CombinedRule>;\ntype RuleTableItemProps = DynamicTableItemProps<CombinedRule>;\n\ninterface Props {\n  rules: CombinedRule[];\n  showGuidelines?: boolean;\n  showGroupColumn?: boolean;\n  showSummaryColumn?: boolean;\n  showNextEvaluationColumn?: boolean;\n  emptyMessage?: string;\n  className?: string;\n}\n\nexport const RulesTable = ({\n  rules,\n  className,\n  showGuidelines = false,\n  emptyMessage = 'No rules found.',\n  showGroupColumn = false,\n  showSummaryColumn = false,\n  showNextEvaluationColumn = false,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const wrapperClass = cx(styles.wrapper, className, { [styles.wrapperMargin]: showGuidelines });\n\n  const items = useMemo((): RuleTableItemProps[] => {\n    return rules.map((rule, ruleIdx) => {\n      return {\n        id: `${rule.namespace.name}-${rule.group.name}-${rule.name}-${ruleIdx}`,\n        data: rule,\n      };\n    });\n  }, [rules]);\n\n  const columns = useColumns(showSummaryColumn, showGroupColumn, showNextEvaluationColumn);\n\n  if (!rules.length) {\n    return <div className={cx(wrapperClass, styles.emptyMessage)}>{emptyMessage}</div>;\n  }\n\n  const TableComponent = showGuidelines ? DynamicTableWithGuidelines : DynamicTable;\n\n  return (\n    <div className={wrapperClass} data-testid=\"rules-table\">\n      <TableComponent\n        cols={columns}\n        isExpandable={true}\n        items={items}\n        renderExpandedContent={({ data: rule }) => <RuleDetails rule={rule} />}\n        pagination={{ itemsPerPage: DEFAULT_PER_PAGE_PAGINATION }}\n        paginationStyles={styles.pagination}\n      />\n    </div>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  wrapperMargin: css`\n    ${theme.breakpoints.up('md')} {\n      margin-left: 36px;\n    }\n  `,\n  emptyMessage: css`\n    padding: ${theme.spacing(1)};\n  `,\n  wrapper: css`\n    width: auto;\n    border-radius: ${theme.shape.radius.default};\n  `,\n  pagination: css`\n    display: flex;\n    margin: 0;\n    padding-top: ${theme.spacing(1)};\n    padding-bottom: ${theme.spacing(0.25)};\n    justify-content: center;\n    border-left: 1px solid ${theme.colors.border.medium};\n    border-right: 1px solid ${theme.colors.border.medium};\n    border-bottom: 1px solid ${theme.colors.border.medium};\n  `,\n});\n\nfunction useColumns(showSummaryColumn: boolean, showGroupColumn: boolean, showNextEvaluationColumn: boolean) {\n  const { hasRuler, rulerRulesLoaded } = useHasRuler();\n\n  const calculateNextEvaluationDate = useCallback((rule: CombinedRule) => {\n    const isValidLastEvaluation = rule.promRule?.lastEvaluation && isValidDate(rule.promRule.lastEvaluation);\n    const isValidIntervalDuration = rule.group.interval && isValidDuration(rule.group.interval);\n\n    if (!isValidLastEvaluation || !isValidIntervalDuration || isGrafanaRulerRulePaused(rule)) {\n      return;\n    }\n\n    const intervalDuration = parseDuration(rule.group.interval!);\n    const lastEvaluationDate = Date.parse(rule.promRule?.lastEvaluation || '');\n    const nextEvaluationDate = addDurationToDate(lastEvaluationDate, intervalDuration);\n\n    //when `nextEvaluationDate` is a past date it means lastEvaluation was more than one evaluation interval ago.\n    //in this case we use the interval value to show a more generic estimate.\n    //See https://github.com/grafana/grafana/issues/65125\n    const isPastDate = isBefore(nextEvaluationDate, new Date());\n    if (isPastDate) {\n      return {\n        humanized: `within ${formatDuration(intervalDuration)}`,\n        fullDate: `within ${formatDuration(intervalDuration)}`,\n      };\n    }\n\n    return {\n      humanized: `in ${dateTime(nextEvaluationDate).locale('en').fromNow(true)}`,\n      fullDate: dateTimeFormat(nextEvaluationDate, { format: 'YYYY-MM-DD HH:mm:ss' }),\n    };\n  }, []);\n\n  return useMemo((): RuleTableColumnProps[] => {\n    const columns: RuleTableColumnProps[] = [\n      {\n        id: 'state',\n        label: 'State',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: rule }) => {\n          const { namespace } = rule;\n          const { rulesSource } = namespace;\n          const { promRule, rulerRule } = rule;\n\n          const isDeleting = !!(hasRuler(rulesSource) && rulerRulesLoaded(rulesSource) && promRule && !rulerRule);\n          const isCreating = !!(hasRuler(rulesSource) && rulerRulesLoaded(rulesSource) && rulerRule && !promRule);\n          const isPaused = isGrafanaRulerRulePaused(rule);\n\n          return <RuleState rule={rule} isDeleting={isDeleting} isCreating={isCreating} isPaused={isPaused} />;\n        },\n        size: '165px',\n      },\n      {\n        id: 'name',\n        label: 'Name',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: rule }) => rule.name,\n        size: showNextEvaluationColumn ? 4 : 5,\n      },\n      {\n        id: 'provisioned',\n        label: '',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: rule }) => {\n          const rulerRule = rule.rulerRule;\n          const isGrafanaManagedRule = isGrafanaRulerRule(rulerRule);\n\n          if (!isGrafanaManagedRule) {\n            return null;\n          }\n\n          const provenance = rulerRule.grafana_alert.provenance;\n          return provenance ? <ProvisioningBadge /> : null;\n        },\n        size: '100px',\n      },\n      {\n        id: 'warnings',\n        label: '',\n        renderCell: ({ data: combinedRule }) => <RuleConfigStatus rule={combinedRule} />,\n        size: '45px',\n      },\n      {\n        id: 'health',\n        label: 'Health',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: { promRule, group } }) => (promRule ? <RuleHealth rule={promRule} /> : null),\n        size: '75px',\n      },\n    ];\n    if (showSummaryColumn) {\n      columns.push({\n        id: 'summary',\n        label: 'Summary',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: rule }) => {\n          return <Tokenize input={rule.annotations[Annotation.summary] ?? ''} />;\n        },\n        size: showNextEvaluationColumn ? 4 : 5,\n      });\n    }\n\n    if (showNextEvaluationColumn) {\n      columns.push({\n        id: 'nextEvaluation',\n        label: 'Next evaluation',\n        renderCell: ({ data: rule }) => {\n          const nextEvalInfo = calculateNextEvaluationDate(rule);\n          return (\n            nextEvalInfo && (\n              <Tooltip placement=\"top\" content={`${nextEvalInfo?.fullDate}`} theme=\"info\">\n                <span>{nextEvalInfo?.humanized}</span>\n              </Tooltip>\n            )\n          );\n        },\n        size: 2,\n      });\n    }\n\n    if (showGroupColumn) {\n      columns.push({\n        id: 'group',\n        label: 'Group',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: rule }) => {\n          const { namespace, group } = rule;\n          // ungrouped rules are rules that are in the \"default\" group name\n          const isUngrouped = group.name === 'default';\n          const groupName = isUngrouped ? (\n            <RuleLocation namespace={namespace.name} />\n          ) : (\n            <RuleLocation namespace={namespace.name} group={group.name} />\n          );\n\n          return groupName;\n        },\n        size: 5,\n      });\n    }\n    columns.push({\n      id: 'actions',\n      label: 'Actions',\n      // eslint-disable-next-line react/display-name\n      renderCell: ({ data: rule }) => {\n        return <RuleActionsButtons rule={rule} rulesSource={rule.namespace.rulesSource} />;\n      },\n      size: '200px',\n    });\n\n    return columns;\n  }, [\n    showSummaryColumn,\n    showGroupColumn,\n    showNextEvaluationColumn,\n    hasRuler,\n    rulerRulesLoaded,\n    calculateNextEvaluationDate,\n  ]);\n}\n","import { useCallback } from 'react';\n\nimport { RulesSource } from 'app/types/unified-alerting';\n\nimport { getRulesSourceName, GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\n\n// datasource has ruler if it's grafana managed or if we're able to load rules from it\nexport function useHasRuler() {\n  const rulerRules = useUnifiedAlertingSelector((state) => state.rulerRules);\n\n  const hasRuler = useCallback(\n    (rulesSource: string | RulesSource) => {\n      const rulesSourceName = typeof rulesSource === 'string' ? rulesSource : rulesSource.name;\n      return rulesSourceName === GRAFANA_RULES_SOURCE_NAME || !!rulerRules[rulesSourceName]?.result;\n    },\n    [rulerRules]\n  );\n\n  const rulerRulesLoaded = useCallback(\n    (rulesSource: RulesSource) => {\n      const rulesSourceName = getRulesSourceName(rulesSource);\n      const result = rulerRules[rulesSourceName]?.result;\n\n      return Boolean(result);\n    },\n    [rulerRules]\n  );\n\n  return { hasRuler, rulerRulesLoaded };\n}\n"],"names":["DynamicTableWithGuidelines","renderExpandedContent","props","styles","getStyles","item","index","items","_","theme","RuleLocation","namespace","group","RuleHealth","rule","style","getStyle","RuleState","isDeleting","isCreating","isPaused","promRule","forTime","firstActiveAt","isBefore","dirtyDate","dirtyDateToCompare","requiredArgs","date","toDate","dateToCompare","matchesWidth","width","RuleActionsButtons","rulesSource","dispatch","location","notifyApp","redirectToClone","setRedirectToClone","rulerRule","ruleToDelete","setRuleToDelete","returnTo","isViewMode","inViewMode","isProvisioned","editRuleSupported","editRuleAllowed","deleteRuleSupported","deleteRuleAllowed","duplicateRuleSupported","duplicateRuleAllowed","modifyExportSupported","modifyExportAllowed","canEditRule","canDeleteRule","canDuplicateRule","canModifyExport","buttons","moreActions","deleteRule","identifier","buildShareUrl","sourceName","Tooltip","editURL","ClipboardButton","copiedText","Menu","Stack","button","Dropdown","action","Button","Icon","ConfirmModal","pathname","RuleConfigStatus","exceedsLimit","config","RulesTable","rules","className","showGuidelines","emptyMessage","showGroupColumn","showSummaryColumn","showNextEvaluationColumn","wrapperClass","ruleIdx","columns","useColumns","TableComponent","DynamicTable","RuleDetails","hasRuler","rulerRulesLoaded","useHasRuler","calculateNextEvaluationDate","isValidLastEvaluation","isValidIntervalDuration","intervalDuration","lastEvaluationDate","nextEvaluationDate","formatDuration","Provisioning","combinedRule","Tokenize","nextEvalInfo","rulerRules","state","rulesSourceName"],"sourceRoot":""}