"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{9419:(Od,Nn,G)=>{G.d(Nn,{f:()=>Je});var Va=G(31733),Za=G(84333);const Je=({onChange:Ce,options:y,label:st})=>Va.createElement(Za.b,{icon:"plus",label:st,variant:"secondary",options:y,onChange:Ce,isFullWidth:!0})},38529:(Od,Nn,G)=>{G.r(Nn),G.d(Nn,{addStandardCanvasEditorOptions:()=>as,plugin:()=>Cy});var Va=G(42439),Za=G(68235),Je=G(85498),Ce=G(69781),y=G(31733),st=(t=>(t.Center="center",t.Left="left",t.LeftRight="leftright",t.Right="right",t.Scale="scale",t))(st||{}),ut=(t=>(t.Bottom="bottom",t.Center="center",t.Scale="scale",t.Top="top",t.TopBottom="topbottom",t))(ut||{}),ne=(t=>(t.Contain="contain",t.Cover="cover",t.Fill="fill",t.Original="original",t.Tile="tile",t))(ne||{}),ae=(t=>(t.GET="GET",t.POST="POST",t.PUT="PUT",t))(ae||{}),Ad=(t=>(t.Straight="straight",t))(Ad||{});const My={connections:[]},ky={inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0};var ie=(t=>(t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.HorizontalCenter="hcenter",t.VerticalCenter="vcenter",t))(ie||{}),pt=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(pt||{}),St=(t=>(t.Top="top",t.Middle="middle",t.Bottom="bottom",t))(St||{}),le=G(83811),ls=(t=>(t.Straight="straight",t))(ls||{});const Ft="#D9D9D9",$a="#000000",Nd="#F0F4FD",Ld=le.config.theme2.colors.text.primary;var _d=G(18662),j=G(76932),cs=G(59889),Wr=G(71199),xt=G(76067),Yr=G(51343),Bd=G(89719),zt=G(51740),Xr=G(38444),zd=G(79300),Sr=G(47701),xr=G(41164),us=G(96856),Ln=G(38834),Hr=G(85765),ds=G(57272),pe=G(79106),Vr=G(64516),he=G(41354);const fs=({value:t,onChange:e})=>{const[n,r]=(0,y.useState)(""),[a,i]=(0,y.useState)(""),s=({currentTarget:f})=>{i(f.value)},o=({currentTarget:f})=>{r(f.value)},l=f=>()=>{const d=t.filter(v=>v[0]!==f);e(d)},c=()=>{const f=n;let d;t?d=t.filter(v=>v[0]!==f):d=[],d.push([f,a]),d.sort((v,p)=>v[0].localeCompare(p[0])),r(""),i(""),e(d)},u=!n&&!a;return y.createElement("div",null,y.createElement(pe.Lh,null,y.createElement(Vr.I,{placeholder:"Key",value:n,onChange:o}),y.createElement(Vr.I,{placeholder:"Value",value:a,onChange:s}),y.createElement(he.h,{"aria-label":"add",name:"plus-circle",onClick:c,disabled:u})),y.createElement(pe.wc,null,Array.from(t||[]).map(f=>y.createElement(pe.Lh,{key:f[0]},y.createElement(Vr.I,{disabled:!0,value:f[0]}),y.createElement(Vr.I,{disabled:!0,value:f[1]}),y.createElement(he.h,{"aria-label":"delete",onClick:l(f[0]),name:"trash-alt"})))))};var Zr=G(56821),Id=G(69391),Gd=G(61129),ja=G(75923),Fd=G(60490);const vs=(t,e)=>{if(t&&t.endpoint){if(Yd(t.endpoint)){ja.h$.emit(Zr.SI.alertError,["Cannot call API at Grafana origin."]),e&&e(!1);return}const n=Kd(t);(0,Id.i)().fetch(n).subscribe({error:r=>{ja.h$.emit(Zr.SI.alertError,["An error has occurred. Check console output for more details."]),console.error("API call error: ",r),e&&e(!1)},complete:()=>{ja.h$.emit(Zr.SI.alertSuccess,["API call was successful"]),e&&e(!1)}})}},tr=t=>{const e=(0,Fd.h4)().getCurrent()?.panelInEdit;return(0,Gd.J)().replace(t,e?.scopedVars)},Kd=t=>{const e=[],n=new URL(tr(t.endpoint));let r={url:n.toString(),method:t.method,data:Wd(t),headers:e};return t.headerParams&&t.headerParams.forEach(a=>{e.push([tr(a[0]),tr(a[1])])}),t.queryParams&&(t.queryParams?.forEach(a=>{n.searchParams.append(tr(a[0]),tr(a[1]))}),r.url=n.toString()),t.method===ae.POST&&e.push(["Content-Type",t.contentType]),r.headers=e,r},Wd=t=>{let e=t.data?tr(t.data):"{}";return t.method===ae.GET&&(e=void 0),e},Yd=t=>{const e=new URL(t),n=new URL(window.location.origin);return e.origin===n.origin},ps={settings:{}},Xd=[{label:ae.GET,value:ae.GET},{label:ae.POST,value:ae.POST},{label:ae.PUT,value:ae.PUT}],Hd=[{label:"JSON",value:"application/json"},{label:"Text",value:"text/plain"},{label:"JavaScript",value:"application/javascript"},{label:"HTML",value:"text/html"},{label:"XML",value:"application/XML"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}];function Vd({value:t,context:e,onChange:n}){t||(t=$r);const a=(0,y.useCallback)((v="")=>{n({...t,endpoint:v})},[n,t]),i=(0,y.useCallback)(v=>{n({...t,data:v})},[n,t]),s=(0,y.useCallback)(v=>{n({...t,method:v})},[n,t]),o=(0,y.useCallback)(v=>{n({...t,contentType:v?.value})},[n,t]),l=v=>v,c=(0,y.useCallback)(v=>{n({...t,queryParams:v})},[n,t]),u=(0,y.useCallback)(v=>{n({...t,headerParams:v})},[n,t]),f=v=>{try{const p=JSON.parse(tr(v));return y.createElement(zd.g,{json:p})}catch(p){return p instanceof Error?`Invalid JSON provided: ${p.message}`:"Invalid JSON provided"}},d=v=>{if(v&&v.endpoint)return y.createElement(Yr.zx,{onClick:()=>vs(v),title:"Test API"},"Test API")};return y.createElement(y.Fragment,null,y.createElement(Sr.Z,null,y.createElement(xr._,{label:"Endpoint",labelWidth:13,grow:!0},y.createElement(ds.A,{context:e,value:t?.endpoint,onChange:a,item:ps}))),y.createElement(Sr.Z,null,y.createElement(xr._,{label:"Method",labelWidth:13,grow:!0},y.createElement(us.S,{value:t?.method,options:Xd,onChange:s,fullWidth:!0}))),t?.method!==ae.GET&&y.createElement(Sr.Z,null,y.createElement(xr._,{label:"Content-Type",labelWidth:13,grow:!0},y.createElement(Ln.Ph,{options:Hd,allowCustomValue:!0,formatCreateLabel:l,value:t?.contentType,onChange:o}))),y.createElement("br",null),y.createElement(Hr.g,{label:"Query parameters"},y.createElement(fs,{value:t?.queryParams??[],onChange:c})),y.createElement(Hr.g,{label:"Header parameters"},y.createElement(fs,{value:t?.headerParams??[],onChange:u})),t?.method!==ae.GET&&t?.contentType&&y.createElement(Hr.g,{label:"Payload"},y.createElement(ds.A,{context:e,value:t?.data??"{}",onChange:i,item:{...ps,settings:{useTextarea:!0}}})),d(t),y.createElement("br",null),t?.method!==ae.GET&&t?.contentType===$r.contentType&&f(t?.data??"{}"))}const Zd=[{label:"primary",value:"primary"},{label:"secondary",value:"secondary"},{label:"success",value:"success"},{label:"destructive",value:"destructive"}],$d=({value:t,onChange:e})=>{t||(t=_n);const n=(0,y.useCallback)(r=>{e({...t,variant:r?.value??_n.variant})},[e,t]);return y.createElement(y.Fragment,null,y.createElement(Sr.Z,null,y.createElement(xr._,{label:"Variant",grow:!0},y.createElement(Ln.Ph,{options:Zd,value:t?.variant,onChange:n}))))},$r={endpoint:"",method:ae.POST,data:"{}",contentType:"application/json",queryParams:[],headerParams:[]},_n={variant:"primary"},jd=({data:t})=>{const e=(0,xt.wW)(Ud,t),[n,r]=y.useState(!1),a=s=>{r(s)},i=()=>{t?.api&&t?.api?.endpoint&&(r(!0),vs(t.api,a))};return y.createElement(Yr.zx,{type:"submit",variant:t?.style?.variant,onClick:i,className:e.button},y.createElement("span",null,n&&y.createElement(Bd.$,{inline:!0,className:e.buttonSpinner}),t?.text))},Ud=(t,e)=>({button:(0,j.css)({height:"100%",width:"100%",display:"grid","> span":{display:"inline-grid",gridAutoFlow:"column",textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color}}),buttonSpinner:(0,j.css)({marginRight:t.spacing(.5)})}),Qd={id:"button",name:"Button",description:"Button",state:cs.BV.beta,standardEditorConfig:{background:!1},display:jd,defaultSize:{width:150,height:45},getNewOptions:t=>({...t,config:{text:{mode:Wr.xy.Fixed,fixed:"Button"},align:pt.Center,color:{fixed:Nd},size:14,api:$r,style:_n},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??32,height:t?.placement?.height??78,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n=()=>{if(e?.api)return e.api={...e.api,method:e.api.method??$r.method,contentType:e.api.contentType??$r.contentType},e.api},r={text:e?.text?t.getText(e.text).value():"",align:e.align??pt.Center,size:e.size??14,api:n(),style:e?.style??_n};return e.color&&(r.color=t.getColor(e.color).value()),r},registerOptionsUI:t=>{const e=["Button"];t.addCustomEditor({category:e,id:"styleSelector",path:"config.style",name:"Style",editor:$d}).addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Xr.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:zt.Lm,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:pt.Left,label:"Left"},{value:pt.Center,label:"Center"},{value:pt.Right,label:"Right"}]},defaultValue:pt.Left}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"apiSelector",path:"config.api",name:"API",editor:Vd})}},qd={id:"droneFront",name:"Drone Front",description:"Drone front",display:({data:t})=>{const e=(0,xt.wW)(Jd),n=`rotate(${t?.rollAngle?t.rollAngle:0}deg)`;return y.createElement("svg",{className:e.droneFront,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Ft}},y.createElement("g",{className:"arms",stroke:Ft,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:Ft,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "}),y.createElement("circle",{cx:"650",cy:"160",r:"40",fill:"none"})),y.createElement("g",{className:"motors",stroke:Ft,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:Ft},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rollAngle:e?.rollAngle?t.getScalar(e.rollAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Front"];t.addCustomEditor({category:e,id:"rollAngle",path:"config.rollAngle",name:"Roll Angle",editor:zt.k9})}},Jd=t=>({droneFront:(0,j.css)({transition:"transform 0.4s"})}),tf={id:"droneSide",name:"Drone Side",description:"Drone Side",display:({data:t})=>{const e=(0,xt.wW)(ef),n=`rotate(${t?.pitchAngle?t.pitchAngle:0}deg)`;return y.createElement("svg",{className:e.droneSide,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Ft}},y.createElement("g",{className:"arms",stroke:Ft,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:Ft,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "})),y.createElement("g",{className:"motors",stroke:Ft,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:Ft},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({pitchAngle:e?.pitchAngle?t.getScalar(e.pitchAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Side"];t.addCustomEditor({category:e,id:"pitchAngle",path:"config.pitchAngle",name:"Pitch Angle",editor:zt.k9})}},ef=t=>({droneSide:(0,j.css)({transition:"transform 0.4s"})}),rf={id:"droneTop",name:"Drone Top",description:"Drone top",display:({data:t})=>{const e=(0,xt.wW)(nf),n=`spin ${t?.fRightRotorRPM?60/Math.abs(t.fRightRotorRPM):0}s linear infinite`,r=`spin ${t?.fLeftRotorRPM?60/Math.abs(t.fLeftRotorRPM):0}s linear infinite`,a=`spin ${t?.bRightRotorRPM?60/Math.abs(t.bRightRotorRPM):0}s linear infinite`,i=`spin ${t?.bLeftRotorRPM?60/Math.abs(t.bLeftRotorRPM):0}s linear infinite`,s=`rotate(${t?.yawAngle?t.yawAngle:0}deg)`;return y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-43 -43 640 640",xmlSpace:"preserve",style:{transform:s,fill:Ft}},y.createElement("path",{fillRule:"evenodd",d:" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z "}),y.createElement("path",{fillRule:"evenodd",d:" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z "}),y.createElement("g",{className:"propeller-group"},y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:a},d:" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:n},d:" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:i},d:" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:r},d:" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z "})))},defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>({bRightRotorRPM:e?.bRightRotorRPM?t.getScalar(e.bRightRotorRPM).value():0,bLeftRotorRPM:e?.bLeftRotorRPM?t.getScalar(e.bLeftRotorRPM).value():0,fRightRotorRPM:e?.fRightRotorRPM?t.getScalar(e.fRightRotorRPM).value():0,fLeftRotorRPM:e?.fLeftRotorRPM?t.getScalar(e.fLeftRotorRPM).value():0,yawAngle:e?.yawAngle?t.getScalar(e.yawAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Top"];t.addCustomEditor({category:e,id:"yawAngle",path:"config.yawAngle",name:"Yaw Angle",editor:zt.k9}).addCustomEditor({category:e,id:"fRightRotorRPM",path:"config.fRightRotorRPM",name:"Front Right Rotor RPM",editor:zt.k9}).addCustomEditor({category:e,id:"fLeftRotorRPM",path:"config.fLeftRotorRPM",name:"Front Left Rotor RPM",editor:zt.k9}).addCustomEditor({category:e,id:"bRightRotorRPM",path:"config.bRightRotorRPM",name:"Back Right Rotor RPM",editor:zt.k9}).addCustomEditor({category:e,id:"bLeftRotorRPM",path:"config.bLeftRotorRPM",name:"Back Left Rotor RPM",editor:zt.k9})}},nf=t=>({propeller:(0,j.css)({transformOrigin:"50% 50%",transformBox:"fill-box",display:"block","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}}),propellerCW:(0,j.css)({animationDirection:"normal"}),propellerCCW:(0,j.css)({animationDirection:"reverse"})});var wr=G(24981);class af extends y.PureComponent{render(){const{data:e}=this.props,n=of(le.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const of=(t,e)=>({container:(0,j.css)({display:"table",position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",height:"100%",backgroundColor:e?.backgroundColor,border:`${e?.width}px solid ${e?.borderColor}`,borderRadius:"50%"}),span:(0,j.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})}),sf={id:"ellipse",name:"Ellipse",description:"Ellipse",display:af,defaultSize:{width:160,height:160},getNewOptions:t=>({...t,config:{backgroundColor:{fixed:Ft},borderColor:{fixed:"transparent"},width:1,align:pt.Center,valign:St.Middle,color:{fixed:$a}},background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>{const n={width:e.width,text:e.text?t.getText(e.text).value():"",align:e.align??pt.Center,valign:e.valign??St.Middle,size:e.size};return e.backgroundColor&&(n.backgroundColor=t.getColor(e.backgroundColor).value()),e.borderColor&&(n.borderColor=t.getColor(e.borderColor).value()),e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Ellipse"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Xr.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:wr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:pt.Left,label:"Left"},{value:pt.Center,label:"Center"},{value:pt.Right,label:"Right"}]},defaultValue:pt.Left}).addCustomEditor({category:e,id:"config.borderColor",path:"config.borderColor",name:"Ellipse border color",editor:wr.L,settings:{},defaultValue:{}}).addNumberInput({category:e,path:"config.width",name:"Ellipse border width",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"config.backgroundColor",path:"config.backgroundColor",name:"Ellipse background color",editor:wr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:St.Top,label:"Top"},{value:St.Middle,label:"Middle"},{value:St.Bottom,label:"Bottom"}]},defaultValue:St.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var lf=G(43286),Ua=G(24353);const cf=(0,j.css)({path:{vectorEffect:"non-scaling-stroke"}});function uf(t){const{data:e}=t;if(!e?.path)return null;const n={fill:e?.fill,stroke:e?.strokeColor,strokeWidth:e?.stroke,height:"100%",width:"100%"};return y.createElement(lf.V,{src:e.path,style:n,className:n.strokeWidth?cf:void 0})}const df={id:"icon",name:"Icon",description:"SVG Icon display",display:uf,getNewOptions:t=>({...t,config:{path:{mode:Wr.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:Ft}},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{let n;e.path&&(n=t.getResource(e.path).value()),(!n||!(0,Ce.isString)(n))&&(n=(0,Ua.getPublicOrAbsoluteUrl)("img/icons/unicons/question-circle.svg"));const r={path:n,fill:e.fill?t.getColor(e.fill).value():Ft};return e.stroke?.width&&e.stroke.color&&e.stroke.width>0&&(r.stroke=e.stroke?.width,r.strokeColor=t.getColor(e.stroke.color).value()),r},registerOptionsUI:t=>{const e=["Icon"];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:"SVG Path",editor:zt.Lv,settings:{resourceType:"icon",maxFiles:2e3}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:"Fill color",editor:zt.Lm,settings:{},defaultValue:{fixed:"grey"}})}};var Bn=G(38605),hs=G(86457),jr=G(43348),ff=G(94993),gs=G(51395),ms=G(27957),ys=G(83599);class vf extends y.PureComponent{render(){const{config:e}=this.props;return y.createElement("div",null,y.createElement("h3",null,"NOT FOUND:"),y.createElement("pre",null,JSON.stringify(e,null,2)))}}const Qa={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:vf,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})};let pf=0;class zn{constructor(e,n,r){this.item=e,this.options=n,this.parent=r,this.UID=pf++,this.revId=0,this.sizeStyle={},this.dataStyle={},this.initElement=s=>{this.div=s,this.applyLayoutStylesToDiv()},this.applyDrag=s=>{const o=this.options.constraint?.horizontal===st.Center,l=this.options.constraint?.vertical===ut.Center;if((o||l)&&!((this.getScene()?.selecto?.getSelectedTargets().length??0)>1)){const d=this.div?.getBoundingClientRect()?.height??100,v=l?d/4:0;s.target.style.transform=`translate(${s.translate[0]}px, ${s.translate[1]-v}px)`;return}s.target.style.transform=s.transform},this.applyResize=(s,o=1)=>{const l=this.options.placement,c=s.target.style,u=s.delta[0]/o,f=s.delta[1]/o,d=s.direction[0],v=s.direction[1];d===1?(l.width=s.width,c.width=`${l.width}px`):d===-1&&(l.left-=u,l.width=s.width,c.left=`${l.left}px`,c.width=`${l.width}px`),v===-1?(l.top-=f,l.height=s.height,c.top=`${l.top}px`,c.height=`${l.height}px`):v===1&&(l.height=s.height,c.height=`${l.height}px`)},this.handleMouseEnter=(s,o)=>{const l=this.getScene();l?.isEditingEnabled?o||l?.connections.handleMouseEnter(s):this.handleTooltip(s)},this.handleTooltip=s=>{const o=this.getScene();if(o?.tooltipCallback){const l=this.div?.getBoundingClientRect();o.tooltipCallback({anchorPoint:{x:l?.right??s.pageX,y:l?.top??s.pageY},element:this,isOpen:!1})}},this.handleMouseLeave=s=>{const o=this.getScene();o?.tooltipCallback&&!o?.tooltip?.isOpen&&o.tooltipCallback(void 0)},this.onElementClick=s=>{this.onTooltipCallback()},this.onElementKeyDown=s=>{s.key==="Enter"&&(s.currentTarget instanceof HTMLElement||s.currentTarget instanceof SVGElement)&&this.getScene()?.select({targets:[s.currentTarget]})},this.onTooltipCallback=()=>{const s=this.getScene();s?.tooltipCallback&&s.tooltip?.anchorPoint&&s.tooltipCallback({anchorPoint:{x:s.tooltip.anchorPoint.x,y:s.tooltip.anchorPoint.y},element:this,isOpen:!0})};const a=`Element ${Date.now()}`;n||(this.options={type:e.id,name:a}),n.constraint=n.constraint??{vertical:ut.Top,horizontal:st.Left},n.placement=n.placement??{width:100,height:100,top:0,left:0},n.background=n.background??{color:{fixed:"transparent"}},n.border=n.border??{color:{fixed:"dark-green"}};const i=this.getScene();if(!n.name){const s=i?.getNextElementName();n.name=s??a}i?.byName.set(n.name,this)}getScene(){let e=this.parent;for(;e;){if(e.isRoot())return e.scene;e=e.parent}}getName(){return this.options.name}applyLayoutStylesToDiv(e){if(this.isRoot())return;const{constraint:n}=this.options,{vertical:r,horizontal:a}=n??{},i=this.options.placement??{},o={cursor:this.getScene()?.isEditingEnabled?"grab":"auto",pointerEvents:e?"none":"auto",position:"absolute",minWidth:"10px",minHeight:"10px"},l=["0px","0px"];switch(r){case ut.Top:i.top=i.top??0,i.height=i.height??100,o.top=`${i.top}px`,o.height=`${i.height}px`,delete i.bottom;break;case ut.Bottom:i.bottom=i.bottom??0,i.height=i.height??100,o.bottom=`${i.bottom}px`,o.height=`${i.height}px`,delete i.top;break;case ut.TopBottom:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}px`,o.bottom=`${i.bottom}px`,delete i.height,o.height="";break;case ut.Center:i.top=i.top??0,i.height=i.height??100,l[1]="-50%",o.top=`calc(50% - ${i.top}px)`,o.height=`${i.height}px`,delete i.bottom;break;case ut.Scale:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}%`,o.bottom=`${i.bottom}%`,delete i.height,o.height="";break}switch(a){case st.Left:i.left=i.left??0,i.width=i.width??100,o.left=`${i.left}px`,o.width=`${i.width}px`,delete i.right;break;case st.Right:i.right=i.right??0,i.width=i.width??100,o.right=`${i.right}px`,o.width=`${i.width}px`,delete i.left;break;case st.LeftRight:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}px`,o.right=`${i.right}px`,delete i.width,o.width="";break;case st.Center:i.left=i.left??0,i.width=i.width??100,l[0]="-50%",o.left=`calc(50% - ${i.left}px)`,o.width=`${i.width}px`,delete i.right;break;case st.Scale:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}%`,o.right=`${i.right}%`,delete i.width,o.width="";break}if(o.transform=`translate(${l[0]}, ${l[1]})`,this.options.placement=i,this.sizeStyle=o,this.div){for(const c in this.sizeStyle)this.div.style[c]=this.sizeStyle[c];for(const c in this.dataStyle)this.div.style[c]=this.dataStyle[c]}}setPlacementFromConstraint(e,n,r=1){const{constraint:a}=this.options,{vertical:i,horizontal:s}=a??{};e||(e=this.div&&this.div.getBoundingClientRect());let o=0;n||(n=this.div&&this.div.parentElement?.getBoundingClientRect(),o=this.parent?.isRoot()?0:parseFloat(getComputedStyle(this.div?.parentElement).borderWidth));const l=e&&n?Math.round(e.top-n.top-o)/r:0,c=e&&n?Math.round(n.bottom-o-e.bottom)/r:0,u=e&&n?Math.round(e.left-n.left-o)/r:0,f=e&&n?Math.round(n.right-o-e.right)/r:0,d={},v=(e?.width??100)/r,p=(e?.height??100)/r;switch(i){case ut.Top:d.top=l,d.height=p;break;case ut.Bottom:d.bottom=c,d.height=p;break;case ut.TopBottom:d.top=l,d.bottom=c;break;case ut.Center:const h=e?l+p/2:0,m=(n?n.height/2:0)-h;d.top=m,d.height=p;break;case ut.Scale:d.top=l/(n?.height??p)*100,d.bottom=c/(n?.height??p)*100;break}switch(s){case st.Left:d.left=u,d.width=v;break;case st.Right:d.right=f,d.width=v;break;case st.LeftRight:d.left=u,d.right=f;break;case st.Center:const h=e?u+v/2:0,m=(n?n.width/2:0)-h;d.left=m,d.width=v;break;case st.Scale:d.left=u/(n?.width??v)*100,d.right=f/(n?.width??v)*100;break}this.options.placement=d,this.applyLayoutStylesToDiv(),this.revId++,this.getScene()?.save()}updateData(e){this.item.prepareData&&(this.data=this.item.prepareData(e,this.options.config),this.revId++);const{background:n,border:r}=this.options,a={};if(n){if(n.color){const i=e.getColor(n.color);a.backgroundColor=i.value()}if(n.image){const i=e.getResource(n.image);if(i){const s=i.value();if(s)switch(a.backgroundImage=`url("${s}")`,n.size??ne.Contain){case ne.Contain:a.backgroundSize="contain",a.backgroundRepeat="no-repeat";break;case ne.Cover:a.backgroundSize="cover",a.backgroundRepeat="no-repeat";break;case ne.Original:a.backgroundRepeat="no-repeat";break;case ne.Tile:a.backgroundRepeat="repeat";break;case ne.Fill:a.backgroundSize="100% 100%";break}else a.backgroundImage=""}}}if(r&&r.color&&r.width!==void 0){const i=e.getColor(r.color);a.borderWidth=`${r.width}px`,a.borderStyle="solid",a.borderColor=i.value(),a.backgroundImage&&(a.backgroundOrigin="padding-box")}this.dataStyle=a,this.applyLayoutStylesToDiv()}isRoot(){return!1}visit(e){e(this)}onChange(e){this.item.id!==e.type&&(this.item=qr.getIfExists(e.type)??Qa);const n=this.options.name,r=e.name;this.revId++,this.options={...e};let a=this.parent;for(;a;){if(a.isRoot()){a.scene.save();break}a.revId++,a=a.parent}const i=this.getScene();n!==r&&i&&(Ss(this,i.byName)&&ws(this,i).forEach(s=>{s.info.targetName=r}),i.byName.delete(n),i.byName.set(r,this))}getSaveModel(){return{...this.options}}render(){const{item:e,div:n}=this,r=this.getScene(),a=n&&r&&r.selecto&&r.selecto.getSelectedTargets().includes(n);return y.createElement("div",{key:this.UID,ref:this.initElement,onMouseEnter:i=>this.handleMouseEnter(i,a),onMouseLeave:r?.isEditingEnabled?void 0:this.handleMouseLeave,onClick:r?.isEditingEnabled?void 0:this.onElementClick,onKeyDown:r?.isEditingEnabled?void 0:this.onElementKeyDown,role:"button",tabIndex:0},y.createElement(e.display,{key:`${this.UID}/${this.revId}`,config:this.options.config,data:this.data,isSelected:a}))}}function bs(t,e){try{let n={targets:[]};if(e instanceof Jt){const r=[];r.push(e?.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[e?.div],t.select(n)}catch{ys.Z.emit(Zr.SI.alertError,["Unable to select element, try selecting element in panel instead"])}}function In(t,e){return Es(t?[...Fn,...Ps]:[...Fn],e)}function Es(t,e){const n={options:[],current:[]},r=[];for(const a of t){const i={label:a.name,value:a.id,description:a.description};if(a.state===cs.BV.alpha){if(!le.Oh)continue;i.label=`${a.name} (Alpha)`,r.push(i)}else n.options.push(i);a.id===e&&n.current.push(i)}for(const a of r)n.options.push(a);return n}function qa(t,e,n){const r=qr.getIfExists(t.value)??Qa,a={...r.getNewOptions(),type:r.id,name:""};if(n&&(a.placement={...a.placement,top:n.y,left:n.x}),r.defaultSize&&(a.placement={...a.placement,...r.defaultSize}),e){const i=new zn(r,a,e);i.updateData(e.scene.context),e.elements.push(i),e.scene.save(),e.reinitializeMoveable(),setTimeout(()=>bs(e.scene,i))}}function Cs(t,e,n){const a=t.getPanelData()?.series,i=[],s=new Set;return a?.forEach(o=>{const l=o.fields.filter(c=>!c.config.custom?.hideFrom?.tooltip);if(e.text?.field&&l.some(c=>(0,ms.CZ)(c,o)===e.text?.field)){const c=l.filter(u=>(0,ms.CZ)(u,o)===e.text?.field)[0];if(c?.getLinks){const u=c.display?c.display(n):{text:`${n}`,numeric:+n};c.getLinks({calculatedValue:u}).forEach(f=>{const d=`${f.title}/${f.href}`;s.has(d)||(i.push(f),s.add(d))})}}}),i}function hf(t){return t.options.connections&&t.options.connections.length>0}function Ss(t,e){return xs(e).some(r=>r.target===t)}function xs(t){const e=[];for(let n of t.values())n.options.connections&&n.options.connections.forEach((r,a)=>{(0,Ce.isString)(r.color)&&(r.color={fixed:r.color}),(0,Ce.isNumber)(r.size)&&(r.size={fixed:2,min:1,max:10});const i=r.targetName?t.get(r.targetName):n.parent;i&&e.push({index:a,source:n,target:i,info:r})});return e}function ws(t,e){return e.connections.state.filter(n=>n.target===t)}function gf(t,e){ws(t,e).forEach(r=>{const i=(r.source.options.connections?.splice(0)??[]).filter(s=>s.targetName!==t.getName());r.source.onChange({...r.source.options,connections:i})})}const mf=(t,e,n,r,a)=>{const i=t.left-e.left+t.width/2,s=t.top-e.top+t.height/2,o=(i+n.source.x*t.width/2)/a,l=(s-n.source.y*t.height/2)/a;let c,u;const f=r.div?.getBoundingClientRect();if(n.targetName&&f){const d=f.left-e.left+f.width/2,v=f.top-e.top+f.height/2;c=d+n.target.x*f.width/2,u=v-n.target.y*f.height/2}else{const d=e.width/2,v=e.height/2;c=d+n.target.x*e.width/2,u=v-n.target.y*e.height/2}return c/=a,u/=a,{x1:o,y1:l,x2:c,y2:u}},yf=(t,e)=>{if(t){const a=e.context.getPanelData()?.series[0]?.fields.find(i=>i.name=t)?.values;return a?a.length-1:0}return 0},bf=(t,e,n)=>{const r=le.config.theme2.colors.text.primary,a=yf(t.size?.field,e),i=t.color?e.context.getColor(t.color).value():r,s=t.size?e.context.getScale(t.size).get(a):n;return{strokeColor:i,strokeWidth:s}},Ur=t=>le.config.featureToggles.canvasPanelPanZoom?t.transformComponentRef?.current?.instance.contentComponent?.getBoundingClientRect():t.div?.getBoundingClientRect(),Ef=t=>{if(le.config.featureToggles.canvasPanelPanZoom)return t.transformComponentRef?.current?.instance},Cf=t=>le.config.featureToggles.canvasPanelPanZoom?t.transformComponentRef?.current?.instance.contentComponent:t.div,Sf={settings:{}},xf=t=>{const{data:e,isSelected:n,config:r}=t,a=(0,xt.wW)(Ds(e)),i=(0,jr.R9)(),s=i.instanceState?.scene;let o;o=i.instanceState?.scene?.data.series;const l=(0,Bn.Z)(s?.editModeEnabled??(0,hs.of)(!1)),c=()=>o&&r.text?.field&&u()?"Field not found":o&&r.text?.field&&!e?.text?"No data":e?.text?e.text:"Double click to set field",u=()=>{const f=(0,gs.g2)(o);return!(0,gs.w3)(r.text?.field,f)};return l&&n?y.createElement(wf,{...t}):y.createElement("div",{className:a.container},y.createElement("span",{className:a.span},c()))},wf=t=>{let{data:e,config:n}=t;const r=(0,jr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useCallback)(o=>{let l;if(l=r.instanceState?.selected[0],l){const c=l.options;l.onChange({...c,config:{...c.config,text:{fixed:"",field:o,mode:Wr.xy.Field}},background:{color:{field:o,fixed:c.background?.color?.fixed??""}}});const u=r.instanceState?.scene;u&&(u.editModeEnabled.next(!1),u.updateData(u.data))}},[r.instanceState?.scene,r.instanceState?.selected]),s=(0,xt.wW)(Ds(e));return y.createElement("div",{className:s.inlineEditorContainer},a&&y.createElement(ff.b,{context:{data:a},value:n.text?.field??"",onChange:i,item:Sf}))},Ds=t=>e=>({container:(0,j.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,j.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,j.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Qr={id:"metric-value",name:"Metric Value",description:"Display a field value",display:xf,hasEditMode:!0,defaultSize:{width:260,height:50},getNewOptions:t=>({...t,config:{align:pt.Center,valign:St.Middle,color:{fixed:$a},text:{mode:Wr.xy.Field,fixed:"",field:""},size:20},background:{color:{fixed:Ft}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??pt.Center,valign:e.valign??St.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Cs(t,e,n.text),n},registerOptionsUI:t=>{const e=["Metric value"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Xr.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:wr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:pt.Left,label:"Left"},{value:pt.Center,label:"Center"},{value:pt.Right,label:"Right"}]},defaultValue:pt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:St.Top,label:"Top"},{value:St.Middle,label:"Middle"},{value:St.Bottom,label:"Bottom"}]},defaultValue:St.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var Ts=G(33227);class Df extends y.PureComponent{render(){const{data:e}=this.props,n=Tf(le.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const Tf=(0,Ts.B)((t,e)=>({container:(0,j.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),span:(0,j.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})})),Mf={id:"rectangle",name:"Rectangle",description:"Rectangle",display:Df,defaultSize:{width:240,height:160},getNewOptions:t=>({...t,config:{align:pt.Center,valign:St.Middle,color:{fixed:$a}},background:{color:{fixed:Ft}}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??pt.Center,valign:e.valign??St.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Rectangle"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Xr.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:wr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:pt.Left,label:"Left"},{value:pt.Center,label:"Center"},{value:pt.Right,label:"Right"}]},defaultValue:pt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:St.Top,label:"Top"},{value:St.Middle,label:"Middle"},{value:St.Bottom,label:"Bottom"}]},defaultValue:St.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},kf=t=>{const e=(0,xt.wW)(Gn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883"}),y.createElement("path",{d:"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883"}),y.createElement("path",{d:"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z"})),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -132.86 -110.58)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -122.04 -111.7)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.21 -114.77)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -52.337 -30.65)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -41.518 -31.769)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.688 -34.842)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Pf=t=>{const e=(0,xt.wW)(Gn(t));return y.createElement("g",null,y.createElement("g",{className:e.outline,transform:"matrix(1.01 0 0 1.01 -.375 -.375)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377"}),y.createElement("path",{d:"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z"})),y.createElement("path",{d:"m12.406 61.742h30.69"}),y.createElement("path",{d:"m52.8 51.765v19.953"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7592 0 0 2.7592 -109.42 -108.61)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4775 0 0 1.4775 -29.697 -29.479)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Rf=t=>{const e=(0,xt.wW)(Gn(t));return y.createElement("g",{className:e.outline,transform:"translate(.5 .49865)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456"}),y.createElement("path",{d:"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m11.562 28.797h31.111"}),y.createElement("path",{d:"m52.508 20.227v17.143"}),y.createElement("path",{d:"m11.562 63.117h31.111"}),y.createElement("path",{d:"m52.508 54.547v17.143"}),y.createElement("path",{d:"m11.562 45.977h31.111"}),y.createElement("path",{d:"m52.508 37.406v17.143"}),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -143.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -126.14)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -108.86)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -63.277)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -46.209)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -28.93)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Of=t=>{const e=(0,xt.wW)(Gn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z"}),y.createElement("path",{d:"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m37.5 46.719v2.875"}),y.createElement("path",{d:"m24.625 51.343h25.75"}),y.createElement("path",{d:"m12.062 63.804h31.111"}),y.createElement("path",{d:"m53.008 55.234v17.143"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7868 0 0 2.7868 -110.81 -108.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4922 0 0 1.4922 -30.294 -28.27)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}))};var Af=(t=>(t.Single="Single",t.Stack="Stack",t.Database="Database",t.Terminal="Terminal",t))(Af||{});const Ms=le.default.theme2.colors.text.primary,Nf={id:"server",name:"Server",description:"Basic server with status",display:({data:t})=>t?y.createElement("svg",{viewBox:"0 0 75 75"},t.type==="Single"?y.createElement(Pf,{...t}):t.type==="Stack"?y.createElement(Rf,{...t}):t.type==="Database"?y.createElement(kf,{...t}):t.type==="Terminal"?y.createElement(Of,{...t}):null):null,defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left},config:{type:"Single"}}),prepareData:(t,e)=>({blinkRate:e?.blinkRate?t.getScalar(e.blinkRate).value():0,statusColor:e?.statusColor?t.getColor(e.statusColor).value():"transparent",bulbColor:e?.bulbColor?t.getColor(e.bulbColor).value():"green",type:e.type}),registerOptionsUI:t=>{const e=["Server"];t.addSelect({category:e,path:"config.type",name:"Type",settings:{options:[{value:"Single",label:"Single"},{value:"Stack",label:"Stack"},{value:"Database",label:"Database"},{value:"Terminal",label:"Terminal"}]},defaultValue:"Single"}).addCustomEditor({category:e,id:"statusColor",path:"config.statusColor",name:"Status color",editor:zt.Lm,settings:{},defaultValue:{fixed:"transparent"}}).addCustomEditor({category:e,id:"bulbColor",path:"config.bulbColor",name:"Bulb color",editor:zt.Lm,settings:{},defaultValue:{fixed:"green"}}).addCustomEditor({category:e,id:"blinkRate",path:"config.blinkRate",name:"Blink rate [hz] (0 = off)",editor:zt.k9,settings:{min:0,max:100}})}},Gn=t=>e=>({bulb:(0,j.css)({"@keyframes blink":{"0%":{fillOpacity:0},"50%":{fillOpacity:1},"100%":{fillOpacity:0}}}),server:(0,j.css)({fill:t?.statusColor??"transparent"}),circle:(0,j.css)({animation:`blink ${t?.blinkRate?1/t.blinkRate:0}s infinite step-end`,fill:t?.bulbColor,stroke:"none"}),circleBack:(0,j.css)({fill:Ms,stroke:"none",opacity:1}),outline:(0,j.css)({stroke:Ms,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px"})}),Lf=t=>{const{data:e,isSelected:n}=t,r=(0,xt.wW)(ks(e)),i=(0,jr.R9)().instanceState?.scene;return(0,Bn.Z)(i?.editModeEnabled??(0,hs.of)(!1))&&n?y.createElement(_f,{...t}):y.createElement("div",{className:r.container},y.createElement("span",{className:r.span},e?.text?e.text:"Double click to set text"))},_f=t=>{let{data:e,config:n}=t;const r=(0,jr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useRef)(n.text?.fixed??"");(0,y.useEffect)(()=>()=>{l(i.current)});const s=u=>{if(u.key==="Enter"){u.preventDefault();const f=r.instanceState?.scene;f&&f.editModeEnabled.next(!1)}},o=u=>{i.current=u.currentTarget.value},l=(0,y.useCallback)(u=>{let f;if(f=r.instanceState?.selected[0],f){const d=f.options;f.onChange({...d,config:{...d.config,text:{...f.options.config.text,fixed:u}}});const v=r.instanceState?.scene;v&&v.updateData(v.data)}},[r.instanceState?.scene,r.instanceState?.selected]),c=(0,xt.wW)(ks(e));return y.createElement("div",{className:c.inlineEditorContainer},a&&y.createElement(Vr.I,{defaultValue:n.text?.fixed??"",onKeyDown:s,onKeyUp:o,autoFocus:!0}))},ks=t=>e=>({container:(0,j.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,j.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,j.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Bf={id:"text",name:"Text",description:"Display text",display:Lf,hasEditMode:!0,defaultSize:{width:100,height:50},getNewOptions:t=>({...t,config:{align:pt.Center,valign:St.Middle,color:{fixed:Ld},size:16},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??pt.Center,valign:e.valign??St.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Cs(t,e,n.text),n},registerOptionsUI:t=>{const e=["Text"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Xr.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:wr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:pt.Left,label:"Left"},{value:pt.Center,label:"Center"},{value:pt.Right,label:"Right"}]},defaultValue:pt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:St.Top,label:"Top"},{value:St.Middle,label:"Middle"},{value:St.Bottom,label:"Bottom"}]},defaultValue:St.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},zf={id:"windTurbine",name:"Wind Turbine",description:"Spinny spinny",display:({data:t})=>{const e=(0,xt.wW)(If),n=`spin ${t?.rpm?60/Math.abs(t.rpm):0}s linear infinite`;return y.createElement("svg",{viewBox:"0 0 189.326 283.989",preserveAspectRatio:"xMidYMid meet",style:{fill:Ft}},y.createElement("symbol",{id:"blade"},y.createElement("path",{fill:"#e6e6e6",id:"blade-front",d:"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z"}),y.createElement("path",{fill:"#d0d6d7",id:"blade-side",d:"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z"})),y.createElement("g",null,y.createElement("g",{id:"structure",transform:"translate(58.123, 82.664)",fillRule:"nonzero"},y.createElement("polygon",{id:"tower",fill:"#e6e6e6",points:"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176"}),y.createElement("path",{id:"yaw",fill:"rgba(0,0,0,0.25)",d:"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"}),y.createElement("path",{id:"base",fill:"#d0d6d7",transform:"translate(0 42)",d:"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z"}),y.createElement("circle",{id:"nacelle",fill:"#e6e6e6",cx:"36.54",cy:"12",r:"11.93"}),y.createElement("circle",{id:"gearbox",fill:"none",stroke:"#d0d6d7",strokeWidth:"2.75",cx:"36.538",cy:"11.999",r:"5.8"})),y.createElement("g",{className:e.blade,style:{animation:n}},y.createElement("use",{id:"blade1",href:"#blade",x:"83.24",y:"0"}),y.createElement("use",{id:"blade2",href:"#blade",x:"83.24",y:"0",transform:"rotate(120 94.663 94.663)"}),y.createElement("use",{id:"blade3",href:"#blade",x:"83.24",y:"0",transform:"rotate(-120 94.663 94.663)"}))))},defaultSize:{width:100,height:155},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??155,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rpm:e?.rpm?t.getScalar(e.rpm).value():0}),registerOptionsUI:t=>{const e=["Wind Turbine"];t.addCustomEditor({category:e,id:"rpm",path:"config.rpm",name:"RPM",editor:zt.k9})}},If=t=>({blade:(0,j.css)({transformOrigin:"94.663px 94.663px",transform:"rotate(15deg)","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}})}),Ja={...Qr.getNewOptions(),placement:{...Qr.getNewOptions().placement,...Qr.defaultSize},type:Qr.id,name:"Element 1"},Fn=[Qr,Bf,sf,Mf,df,Nf],Ps=[Qd,zf,rf,qd,tf],qr=new _d.B(()=>[...Fn,...Ps]);var Ht=(t=>(t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom",t))(Ht||{}),ze=(t=>(t.ElementManagement="element-management",t.SelectedElement="selected-element",t.SelectedConnection="selected-connection",t))(ze||{});const Se=10,Kn=50,Gf={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>y.createElement("div",null,"FRAME!")};class Jt extends zn{constructor(e,n,r){super(Gf,e,r),this.options=e,this.parent=r,this.elements=[],this.doAction=(i,s,o=!0,l=!0)=>{switch(i){case Ht.Delete:this.elements=this.elements.filter(f=>f!==s),gf(s,this.scene),this.scene.byName.delete(s.options.name),this.scene.save(),this.reinitializeMoveable();break;case Ht.Duplicate:if(s.item.id==="frame"){console.log("Can not duplicate frames (yet)",i,s);return}const c=(0,Ce.cloneDeep)(s.options);if(l){const{constraint:f,placement:d}=s.options,{vertical:v,horizontal:p}=f??{},h={...d};switch(v){case ut.Top:h.top==null?h.top=25:h.top+=Se;break;case ut.Bottom:h.bottom==null?h.bottom=100:h.bottom-=Se;break;case ut.TopBottom:h.top==null?h.top=25:h.top+=Se,h.bottom==null?h.bottom=100:h.bottom-=Se;break;case ut.Center:h.top!=null&&(h.top-=Se);break}switch(p){case st.Left:h.left==null?h.left=Kn:h.left+=Se;break;case st.Right:h.right==null?h.right=Kn:h.right-=Se;break;case st.LeftRight:h.left==null?h.left=Kn:h.left+=Se,h.right==null?h.right=Kn:h.right-=Se;break;case st.Center:h.left!=null&&(h.left-=Se);break}c.placement=h}c.connections=void 0;const u=new zn(s.item,c,this);u.updateData(this.scene.context),o&&(u.options.name=this.scene.getNextElementName()),this.elements.push(u),this.scene.byName.set(u.options.name,u),this.scene.byName.set(s.options.name,s),this.scene.save(),this.reinitializeMoveable(),setTimeout(()=>{this.scene.targetsToSelect.add(u.div)});break;case Ht.MoveTop:case Ht.MoveBottom:s.parent?.doMove(s,i);break;default:console.log("DO action",i,s);return}},this.scene=n;let{elements:a}=this.options;a||(this.options.elements=a=[]);for(const i of a)if(i.type==="frame")this.elements.push(new Jt(i,n,this));else{const s=qr.getIfExists(i.type)??Qa;this.elements.push(new zn(s,i,this))}}isRoot(){return!1}updateData(e){super.updateData(e);for(const n of this.elements)n.updateData(e)}reorder(e,n){const r=Array.from(this.elements),[a]=r.splice(e,1);r.splice(n,0,a),this.elements=r,this.reinitializeMoveable()}reorderTree(e,n,r=!1){const a=Array.from(this.elements),i=this.elements.indexOf(e),s=r?this.elements.length-1:this.elements.indexOf(n),[o]=a.splice(i,1);a.splice(s,0,o),this.elements=a,this.reinitializeMoveable()}doMove(e,n){const r=this.elements.filter(a=>a!==e);n===Ht.MoveBottom?r.unshift(e):r.push(e),this.elements=r,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled))}render(){return y.createElement("div",{key:this.UID,ref:this.initElement},this.elements.map(e=>e.render()))}visit(e){super.visit(e);for(const n of this.elements)e(n)}getSaveModel(){return{...this.options,elements:this.elements.map(e=>e.getSaveModel())}}}var Rs=G(37153),Ff=G(40510),Os=G(19690);function Kf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Wf(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function xe(t,e){return function(n){n&&(t[e]=n)}}function As(t,e,n){return function(r){r&&(t[e][n]=r)}}function ti(t,e){return function(n){var r=n.prototype;t.forEach(function(a){e(r,a)})}}function Yf(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(a){var i=e[a]||a;i in n||(n[i]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=(s=this[r])[a].apply(s,o);return c===this[r]?this:c})})}}var Xf=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var a=this.keys,i=this.values,s=a.indexOf(n),o=s===-1?a.length:s;a[o]=n,i[o]=r},t}(),Hf=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),Vf=typeof Map=="function",Zf=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function $f(t,e){var n=[],r=[];return t.forEach(function(a){var i=a[0],s=a[1],o=new Zf;n[i]=o,r[s]=o}),n.forEach(function(a,i){a.connect(n[i-1])}),t.filter(function(a,i){return!e[i]}).map(function(a,i){var s=a[0],o=a[1];if(s===o)return[0,0];var l=n[s],c=r[o-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var f=l.getIndex();return[u,f]})}var jf=function(){function t(n,r,a,i,s,o,l,c){this.prevList=n,this.list=r,this.added=a,this.removed=i,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=c}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=$f(this.changedBeforeAdded,this.fixed),r=this.changed,a=[];this.cacheOrdered=n.filter(function(i,s){var o=i[0],l=i[1],c=r[s],u=c[0],f=c[1];if(o!==l)return a.push([u,f]),!0}),this.cachePureChanged=a},t}();function Jr(t,e,n){var r=Vf?Map:n?Hf:Xf,a=n||function(b){return b},i=[],s=[],o=[],l=t.map(a),c=e.map(a),u=new r,f=new r,d=[],v=[],p={},h=[],g=0,m=0;return l.forEach(function(b,E){u.set(b,E)}),c.forEach(function(b,E){f.set(b,E)}),l.forEach(function(b,E){var C=f.get(b);typeof C>"u"?(++m,s.push(E)):p[C]=m}),c.forEach(function(b,E){var C=u.get(b);typeof C>"u"?(i.push(E),++g):(o.push([C,E]),m=p[E]||0,d.push([C-m,E-g]),v.push(E===C),C!==E&&h.push([C,E]))}),s.reverse(),new jf(t,e,i,s,h,o,d,v)}var Uf=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),a=Jr(this.list,r,this.findKeyCallback);return this.list=r,a},t}();const Qf=Uf;var Ns="rgb",Ls="rgba",_s="hsl",Bs="hsla",Ly=[Ns,Ls,_s,Bs],qf="function",_y="property",By="array",Jf="object",tv="string",ev="number",tn="undefined",zs=typeof window!==tn,er=typeof document!==tn&&document,Is=null,zy=function(t){if(!er)return"";var e=(er.body||er.documentElement).style,n=Is.length;if(typeof e[t]!==tn)return t;for(var r=0;r<n;++r){var a="-"+Is[r]+"-"+t;if(typeof e[a]!==tn)return a}return""},Iy=null,Gy=null,Fy=null,Ky=null,rv=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ot=1e-7,Wy=1/Ot,Wn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function rr(t,e,n,r){return(t*r+e*n)/(n+r)}function Yn(t){return typeof t===tn}function te(t){return t&&typeof t===Jf}function Mt(t){return Array.isArray(t)}function Vt(t){return typeof t===tv}function ei(t){return typeof t===ev}function Xn(t){return typeof t===qf}function av(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Gs(t,e,n,r,a){var i=ri(t,e,n);return i?n:iv(t,e,n+1,r,a)}function ri(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function iv(t,e,n,r,a){for(var i=function(c){var u=e[c].trim();if(u===t.close&&!ri(t,e,c))return{value:c};var f=c,d=Ae(a,function(v){var p=v.open;return p===u});if(d&&(f=Gs(d,e,c,r,a)),f===-1)return s=c,"break";c=f,s=c},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function ni(t,e){var n=Vt(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?rv:c,f=u.map(function(w){var T=w.open,D=w.close;return T===D?T:T+"|"+D}).join("|"),d="(\\s*"+a+"\\s*|"+f+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(function(w){return w&&w!=="undefined"}),h=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var E=function(w){var T=p[w].trim(),D=w,k=Ae(u,function(O){var A=O.open;return A===T}),P=Ae(u,function(O){var A=O.close;return A===T});if(k){if(D=Gs(k,p,w,h,u),D!==-1&&l)return b()&&i||(g.push(p.slice(w,D+1).join("")),w=D,i)?(C=w,"break"):(C=w,"continue")}else if(P&&!ri(P,p,w)){var M=nv(u);return M.splice(u.indexOf(P),1),{value:ni(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(av(T,a)&&!s)return b(),i?(C=w,"break"):(C=w,"continue");D===-1&&(D=h-1),m.push(p.slice(w,D+1).join("")),w=D,C=w},C,x=0;x<h;++x){var S=E(x);if(x=C,typeof S=="object")return S.value;if(S==="break")break}return m.length&&g.push(m.join("")),g}function Ie(t){return ni(t,"")}function Ge(t){return ni(t,",")}function ai(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function nr(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function ii(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Hn(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function Yy(t){return[].slice.call(t)}function en(){return Date.now?Date.now():new Date().getTime()}function Oe(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function ov(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function Xy(t,e,n){var r=ov(t,e);return r>-1?t[r]:n}function Ae(t,e,n){var r=Oe(t,e);return r>-1?t[r]:n}var Fs=function(){var t=en(),e=zs&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=en(),a=setTimeout(function(){n(r-t)},1e3/60);return a}}(),sv=function(){var t=zs&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Fe(t){return Object.keys(t)}function Hy(t){var e=Fe(t);return e.map(function(n){return t[n]})}function Vy(t){var e=Fe(t);return e.map(function(n){return[n,t[n]]})}function Zy(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function bt(t,e){var n=nr(t),r=n.value,a=n.unit;if(te(e)){var i=e[a];if(i){if(Xn(i))return i(r);if(Wn[a])return Wn[a](r,i)}}else if(a==="%")return r*e/100;return Wn[a]?Wn[a](r):r}function Vn(t,e,n){return Math.max(e,Math.min(t,n))}function Ks(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],Ot),rt(e[0]/r,Ot)],[rt(e[1]*r,Ot),rt(e[1],Ot)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=rt(o,Ot);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function Ws(t,e,n,r){if(!r)return t.map(function(v,p){return Vn(v,e[p],n[p])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=Ks(t,e,!1,s),l=o[0],c=o[1],u=Ks(t,n,!0,s),f=u[0],d=u[1];return a<l||i<c?(a=l,i=c):(a>f||i>d)&&(a=f,i=d),[a,i]}function lv(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function oi(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function kt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function cv(t){return[0,1].map(function(e){return oi(t.map(function(n){return n[e]}))})}function si(t){var e=cv(t),n=kt(e,t[0]),r=kt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ce(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Ys(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function $y(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function jy(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,Vt(n)?n:n.apply(void 0,a))})}function Uy(t){return t.reduce(function(e,n){return e.concat(n)},[])}function uv(t){return t.reduce(function(e,n){return Mt(n)?e.push.apply(e,uv(n)):e.push(n),e},[])}function Qy(t,e){t.indexOf(e)===-1&&t.push(e)}function dv(t){return t.replace("#","")}function Xs(t){var e=dv(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function fv(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function vv(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function qy(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Xs(fv(t)):Xs(t);if(t.indexOf("(")!==-1){var e=ai(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=Ge(r),i=[0,0,0,1],s=a.length;switch(n){case Ns:case Ls:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case _s:case Bs:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return vv(i)}}}function Jy(t,e){return er?e?er.querySelectorAll(t):er.querySelector(t):e?[]:null}function Nt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function li(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Hs(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function tb(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=Ke(n).getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function Kt(t,e,n,r){t.addEventListener(e,n,r)}function Gt(t,e,n,r){t.removeEventListener(e,n,r)}function ge(t){return t?.ownerDocument||er}function eb(t){return ge(t).documentElement}function rb(t){return ge(t).body}function Ke(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function pv(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Vs(t){return te(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ci=function(t,e){return ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},ci(t,e)};function ar(t,e){ci(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var We=function(){return We=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},We.apply(this,arguments)};function Zs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function hv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function ui(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function di(t,e){var n=Object.keys(t),r=Object.keys(e),a=Jr(n,r,function(l){return l}),i={},s={},o={};return a.added.forEach(function(l){var c=r[l];i[c]=e[c]}),a.removed.forEach(function(l){var c=n[l];s[c]=t[c]}),a.maintained.forEach(function(l){var c=l[0],u=n[c],f=[t[u],e[u]];t[u]!==e[u]&&(o[u]=f)}),{added:i,removed:s,changed:o}}function $s(t){t.forEach(function(e){e()})}function js(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function Us(t,e,n,r){if(Vt(t)||ei(t))return new bv("text_"+t,e,n,r,null,{});var a=typeof t.type=="string"?Ev:t.type.prototype.render?Sv:Cv;return new a(t.type,e,n,r,t.ref,t.props)}function Qs(t){var e=[];return t.forEach(function(n){e=e.concat(Mt(n)?Qs(n):n)}),e}function qs(t){var e=t.className,n=Zs(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function fi(t,e){if(!e)return t;for(var n in e)Yn(t[n])&&(t[n]=e[n]);return t}function ue(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,s=a.ref,o=Zs(a,["key","ref"]);return{type:t,key:i,ref:s,props:We(We({},o),{children:Qs(n).filter(function(l){return l!=null&&l!==!1})})}}var rn=function(){function t(n,r,a,i,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=a,this.container=i,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,a,i){if(this.base&&!Vt(r)&&!i&&!this._should(r.props,a))return!1;this.original=r,this._setState(a);var s=this.props;return Vt(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},a),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function gv(t,e,n){var r=di(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in a)n.setAttribute(o,a[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in i)n.removeAttribute(o)}function mv(t,e,n){var r=di(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in i)n.removeEventListener(o);for(var o in a)n.addEventListener(o,a[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in i)n.removeEventListener(o)}function yv(t,e,n){var r=n.style,a=di(t,e),i=a.added,s=a.removed,o=a.changed;for(var l in i){var c=Hn(l,"-");r.setProperty?r.setProperty(c,i[l]):r[c]=i[l]}for(var l in o){var c=Hn(l,"-");r.setProperty?r.setProperty(c,o[l][1]):r[c]=o[l][1]}for(var l in s){var c=Hn(l,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}function Js(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var bv=function(t){ar(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){i?a._mounted():a._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(rn),Ev=function(t){ar(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,a){var i=this.events;i[r]=function(s){s.nativeEvent=s,a(s)},this.base.addEventListener(r,i[r])},n.removeEventListener=function(r){var a=this.events;this.base.removeEventListener(r,a[r]),delete a[r]},n._should=function(r){return ui(this.props,r)},n._render=function(r,a){var i=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var c=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",c):l=document.createElement(c)}this.base=l}an(this,this._providers,this.props.children,r,null);var u=this.base,f=Js(a),d=f.attributes,v=f.events,p=Js(this.props),h=p.attributes,g=p.events;return gv(qs(d),qs(h),u),mv(v,g,this),yv(a.style||{},this.props.style||{},u),r.push(function(){s?i._mounted():i._updated()}),!0},n._unmount=function(){var r=this.events,a=this.base;for(var i in r)a.removeEventListener(i,r[i]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=vi(this.container);return r&&"ownerSVGElement"in r},e}(rn);function vi(t){if(!t)return null;var e=t.base;return e instanceof Node?e:vi(t.container)}function nn(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?nn(e[0].base):null}var Cv=function(t){ar(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this.type(this.props);return an(this,this._providers,a?[a]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(rn),tl=function(t){ar(e,t);function e(r){var a=t.call(this,"container","container",0,null)||this;return a.base=r,a}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(rn),Sv=function(t){ar(e,t);function e(r,a,i,s,o,l){return l===void 0&&(l={}),t.call(this,r,a,i,s,o,fi(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,a){return this.base.shouldComponentUpdate(fi(r,this.type.defaultProps),a||this.base.state)},n._render=function(r,a){var i=this;this.props=fi(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,c=o.render();c&&c.props&&!c.props.children.length&&(c.props.children=this.props.children),an(this,this._providers,c?[c]:[],r),r.push(function(){s?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(a,l))})},n._setState=function(r){var a=this.base;!a||!r||(a.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(rn),pi=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=We(We({},this.$_state),n),a?this.$_setState(r,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(r,a)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var a=[],i=this.$_provider,s=an(i.container,[i],[i.original],a,We(We({},this.state),this.$_state),r);s&&(n&&a.push(n),$s(a))},t}(),hi=function(t){ar(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,a){return ui(this.props,r)||ui(this.state,a)},e}(pi),xv=function(t){ar(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,a=r.element,i=r.container;this._portalProvider=new tl(i),Zn(a,i,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,a=r.element,i=r.container;Zn(a,i,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;Zn(null,r,this._portalProvider),this._portalProvider=null},e}(hi);function wv(t,e,n){var r=[];an(t,t._providers,e,r,n),$s(r)}function Dv(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=nn(n[a].base);if(i)return i}return null}function Tv(t,e,n){var r=n.map(function(l){return Vt(l)?null:l.key}),a=js(e.map(function(l){return l.key})),i=js(r),s=Jr(a,i,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var c=l[0],u=l[1],f=e.splice(c,1)[0];e.splice(u,0,f);var d=nn(f.base),v=nn(e[u+1]&&e[u+1].base);d&&d.parentNode.insertBefore(d,v)}),s.added.forEach(function(l){e.splice(l,0,Us(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var c=l[0],u=l[1],f=n[u],d=e[u],v=Vt(f)?"text_"+f:f.type;return v!==d.type?(d._unmount(),e.splice(u,1,Us(f,r[u],u,t)),!0):(d.index=u,!1)});return hv(s.added,o.map(function(l){var c=l[0],u=l[1];return u}))}function an(t,e,n,r,a,i){var s=Tv(t,e,n),o=e.filter(function(c,u){return c._update(r,n[u],a,i)}),l=vi(t);return l&&s.reverse().forEach(function(c){var u=e[c],f=nn(u.base);if(f&&l!==f&&!f.parentNode){var d=Dv(t,u);l.insertBefore(f,d)}}),o.length>0}function Zn(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new tl(e)),wv(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function el(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Zn(t,e,r),n&&n()}function Mv(t,e){return ue(xv,{element:t,container:e})}var kv="simple-1.1.0";function gi(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function rl(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Pv(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function mi(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function nl(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Rv(t,e){var n=mi("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function yi(t){return t.replace(/_/g,".")}function on(t,e){var n=null,r="-1";return gi(t,function(a){var i=mi("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!i||a.brand?!1:(n=a,r=i[3]||"-1",a.versionAlias?r=a.versionAlias:a.versionTest&&(r=Rv(a.versionTest.toLowerCase(),e)||r),r=yi(r),!0)}),{preset:n,version:r}}function $n(t,e){var n={brand:"",version:"-1"};return gi(t,function(r){var a=al(e,r);return a?(n.brand=r.id,n.version=r.versionAlias||a.version,n.version!=="-1"):!1}),n}function al(t,e){return rl(t,function(n){var r=n.brand;return mi(""+e.test,r.toLowerCase())})}var il=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ol=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],bi=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],sl=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ll=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function cl(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,a=n[0],i={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!$n(sl,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&gi(bi,function(d){return al(n,d)});var o=$n(ol,n);if(i.chromium=!!o.brand,i.chromiumVersion=o.version,!i.chromium){var l=$n(bi,n);i.webkit=!!l.brand,i.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=rl(ll,function(d){return new RegExp(""+d.test,"g").exec(c)});s.name=u?u.id:c,s.version=t.platformVersion}var f=$n(il,n);return f.brand&&(i.name=f.brand,i.version=t?t.uaFullVersion:f.version),navigator.platform==="Linux armv8l"?s.name="android":i.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&i.webview&&(i.version="-1"),s.version=yi(s.version),i.version=yi(i.version),s.majorVersion=parseInt(s.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:s,isMobile:r,isHints:!0}}function Ov(t){var e=Pv(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!on(sl,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=on(il,e),s=i.preset,o=i.version,l=on(ll,e),c=l.preset,u=l.version,f=on(ol,e);if(r.chromium=!!f.preset,r.chromiumVersion=f.version,!r.chromium){var d=on(bi,e);r.webkit=!!d.preset,r.webkitVersion=d.version}return c&&(a.name=c.id,a.version=u,a.majorVersion=parseInt(u,10)),s&&(r.name=s.id,r.version=o,r.webview&&a.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:a,isMobile:n,isHints:!1}}function nb(t){return nl()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=cl(e);return t&&t(n),n}):(t&&t(Ei()),typeof Promise>"u"||!Promise?null:Promise.resolve(Ei()))}function Ei(t){return typeof t>"u"&&nl()?cl():Ov(t)}const Av=Ei;function Nv(t,e,n,r,a,i){for(var s=0;s<a;++s){var o=n+s*a,l=r+s*a;t[o]+=t[l]*i,e[o]+=e[l]*i}}function Lv(t,e,n,r,a){for(var i=0;i<a;++i){var s=n+i*a,o=r+i*a,l=t[s],c=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=c}}function _v(t,e,n,r,a){for(var i=0;i<r;++i){var s=n+i*r;t[s]/=a,e[s]/=a}}function ul(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function me(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Dt(e),a=0;a<e;++a){var i=e*a+a;if(!rt(n[i],Ot)){for(var s=a+1;s<e;++s)if(n[e*a+s]){Lv(n,r,a,s,e);break}}if(!rt(n[i],Ot))return[];_v(n,r,a,e,n[i]);for(var s=0;s<e;++s){var o=s,l=s+a*e,c=n[l];!rt(c,Ot)||a===s||Nv(n,r,o,a,e,-c)}}return r}function Bv(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function dl(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],a=0;a<e-1;++a)n[a]=t[e*(e-1)+a]/r;return n[e-1]=0,n}function zv(t,e){for(var n=Dt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function ir(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function we(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Dt(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var s=0;s<a-1;++s)r[i*n+s]=t[i*e+s];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Dt(t);return e.forEach(function(a){r=mt(r,a,t)}),r}function mt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],a=t.length/n,i=e.length/a;if(a){if(!i)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<i;++o){r[o*n+s]=0;for(var l=0;l<a;++l)r[o*n+s]+=t[l*n+s]*e[o*a+l]}return r}function ct(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function U(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function Iv(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function fl(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Wt(t,e,n){n===void 0&&(n=e.length);var r=mt(t,e,n),a=r[n-1];return r.map(function(i){return i/a})}function Gv(t,e){return mt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Fv(t,e){return mt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Kv(t,e){return mt(t,Dr(e,4))}function jn(t,e){var n=e[0],r=n===void 0?1:n,a=e[1],i=a===void 0?1:a,s=e[2],o=s===void 0?1:s;return mt(t,[r,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1],4)}function sn(t,e){return Wt(Dr(e,3),ir(t,3))}function Si(t,e){var n=e[0],r=n===void 0?0:n,a=e[1],i=a===void 0?0:a,s=e[2],o=s===void 0?0:s;return mt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,o,1],4)}function xi(t,e){return mt(t,e,4)}function Dr(t,e){var n=Math.cos(t),r=Math.sin(t),a=Dt(e);return a[0]=n,a[1]=r,a[e]=-r,a[e+1]=n,a}function Dt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function wi(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function ln(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(e-1)+a]=t[a];return n}function Di(t,e,n,r,a,i,s,o){var l=t[0],c=t[1],u=e[0],f=e[1],d=n[0],v=n[1],p=r[0],h=r[1],g=a[0],m=a[1],b=i[0],E=i[1],C=s[0],x=s[1],S=o[0],w=o[1],T=[l,0,u,0,d,0,p,0,c,0,f,0,v,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,d,0,p,0,c,0,f,0,v,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*u,-E*u,-C*d,-x*d,-S*p,-w*p,-g*c,-m*c,-b*f,-E*f,-C*v,-x*v,-S*h,-w*h],D=me(T,8);if(!D.length)return[];var k=mt(D,[g,m,b,E,C,x,S,w],8);return k[8]=1,we(Bv(k),3,4)}function ab(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}var cn=function(){return cn=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cn.apply(this,arguments)};function Ti(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function un(t,e){return e===void 0&&(e=0),Tr(or(t,e))}function ib(t){return un(getComputedStyle(t).transform)}function Un(t,e){var n=Wt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Wv(t,e){e===void 0&&(e=document.body);for(var n=t,r=Ti();n;){var a=getComputedStyle(n).transform;if(r=xi(un(a),r),n===e)break;n=n.parentElement}return r=me(r,4),r[12]=0,r[13]=0,r[14]=0,r}function Tr(t){var e=Ti();return t.forEach(function(n){var r=n.matrixFunction,a=n.functionValue;r&&(e=r(e,a))}),e}function or(t,e){e===void 0&&(e=0);var n=Mt(t)?t:Ie(t);return n.map(function(r){var a=ai(r),i=a.prefix,s=a.value,o=null,l=i,c="";if(i==="translate"||i==="translateX"||i==="translate3d"){var u=te(e)?cn(cn({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=Ge(s).map(function(O,A){return A===0&&"x%"in u?u["%"]=e["x%"]:A===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],bt(O,u)}),d=f[0],v=f[1],p=v===void 0?0:v,h=f[2],g=h===void 0?0:h;o=Si,c=[d,p,g]}else if(i==="translateY"){var m=te(e)?cn({"%":e["y%"]},e):{"%":e},p=bt(s,m);o=Si,c=[0,p,0]}else if(i==="translateZ"){var g=parseFloat(s);o=Si,c=[0,0,g]}else if(i==="scale"||i==="scale3d"){var b=Ge(s).map(function(O){return parseFloat(O)}),E=b[0],C=b[1],x=C===void 0?E:C,S=b[2],w=S===void 0?1:S;o=jn,c=[E,x,w]}else if(i==="scaleX"){var E=parseFloat(s);o=jn,c=[E,1,1]}else if(i==="scaleY"){var x=parseFloat(s);o=jn,c=[1,x,1]}else if(i==="scaleZ"){var w=parseFloat(s);o=jn,c=[1,1,w]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var T=nr(s),D=T.unit,k=T.value,P=D==="rad"?k:k*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",o=Kv):i==="rotateX"?o=Gv:i==="rotateY"&&(o=Fv),c=P}else if(i==="matrix3d")o=xi,c=Ge(s).map(function(O){return parseFloat(O)});else if(i==="matrix"){var M=Ge(s).map(function(O){return parseFloat(O)});o=xi,c=[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}else l="";return{name:i,functionName:l,value:s,matrixFunction:o,functionValue:c}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Mi=function(t,e){return Mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Mi(t,e)};function Yv(t,e){Mi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vl=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),Xv=function(t){Yv(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,vl)||this}return e}(Qf);function Mr(t,e){return Jr(t,e,vl)}const pl=Xv;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function sr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Zt(t){return rt(t,Ot)}function Hv(t,e){return t.every(function(n,r){return Zt(n-e[r])===0})}function Vv(t,e){return!Zt(t[0]-e[0])&&!Zt(t[1]-e[1])}function Zv(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function dn(t){return t.length<3?0:Math.abs(lv(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function ki(t,e){var n=e.width,r=e.height,a=e.left,i=e.top,s=Ye(t),o=s.minX,l=s.minY,c=s.maxX,u=s.maxY,f=n/(c-o),d=r/(u-l);return t.map(function(v){return[a+(v[0]-o)*f,i+(v[1]-l)*d]})}function Ye(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Qn(t,e,n){var r=t[0],a=t[1],i=Ye(e),s=i.minX,o=i.maxX,l=[[s,a],[o,a]],c=lr(l[0],l[1]),u=Ri(e),f=[];if(u.forEach(function(p){var h=lr(p[0],p[1]),g=p[0];if(Hv(c,h))f.push({pos:t,line:p,type:"line"});else{var m=Pi(qn(c,h),[l,p]);m.forEach(function(b){p.some(function(E){return Vv(E,b)})?f.push({pos:b,line:p,type:"point"}):Zt(g[1]-a)!==0&&f.push({pos:b,line:p,type:"intersection"})})}}),!n&&Ae(f,function(p){return p[0]===r}))return!0;var d=0,v={};return f.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>r))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var b=Ae(m,function(x){return x[1]!==a}),E=v[h[0]],C=b[1]>a?1:-1;E?E!==C&&++d:v[h[0]]=C}}}),d%2===1}function $v(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/(n*n+r*r)}function lr(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],s=a-n,o=i-r;Math.abs(s)<Ot&&(s=0),Math.abs(o)<Ot&&(o=0);var l=0,c=0,u=0;return s?o?(l=-o/s,c=1,u=-l*n-r):(c=1,u=-r):o&&(l=-1,u=n),[l,c,u]}function qn(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2],l=n===0&&i===0,c=r===0&&s===0,u=[];if(l&&c)return[];if(l){var f=-a/r,d=-o/s;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(c){var v=-a/n,p=-o/i;return v!==p?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var h=-a/r,g=-(s*h+o)/i;u=[[g,h]]}else if(i===0){var h=-o/s,g=-(r*h+a)/n;u=[[g,h]]}else if(r===0){var g=-a/n,h=-(i*g+o)/s;u=[[g,h]]}else if(s===0){var g=-o/i,h=-(n*g+a)/r;u=[[g,h]]}else{var g=(r*o-s*a)/(s*n-r*i),h=-(n*g+a)/r;u=[[g,h]]}return u.map(function(m){return[m[0],m[1]]})}function ob(t,e,n){var r=qn(lr(t[0],t[1]),lr(e[0],e[1]));return n?Pi(r,[t,e]):r}function jv(t,e){var n=lr(e[0],e[1]);return Zt($v(n,t))===0}function Pi(t,e){var n=e.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),r=[];if(t.length===2){var a=t[0],i=a[0],s=a[1];if(Zt(i-t[1][0])){if(!Zt(s-t[1][1])){var c=Math.max.apply(Math,n.map(function(f){return f[0][0]})),u=Math.min.apply(Math,n.map(function(f){return f[0][1]}));if(Zt(c-u)>0)return[];r=[[c,s],[u,s]]}}else{var o=Math.max.apply(Math,n.map(function(f){return f[1][0]})),l=Math.min.apply(Math,n.map(function(f){return f[1][1]}));if(Zt(o-l)>0)return[];r=[[i,o],[i,l]]}}return r.length||(r=t.filter(function(f){var d=f[0],v=f[1];return n.every(function(p){return 0<=Zt(d-p[0][0])&&0<=Zt(p[0][1]-d)&&0<=Zt(v-p[1][0])&&0<=Zt(p[1][1]-v)})})),r.map(function(f){return[Zt(f[0]),Zt(f[1])]})}function Ri(t){return sr(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Oi(t,e){var n=t.slice(),r=e.slice();si(n)===-1&&n.reverse(),si(r)===-1&&r.reverse();var a=Ri(n),i=Ri(r),s=a.map(function(u){return lr(u[0],u[1])}),o=i.map(function(u){return lr(u[0],u[1])}),l=[];s.forEach(function(u,f){var d=a[f],v=[];o.forEach(function(p,h){var g=qn(u,p),m=Pi(g,[d,i[h]]);v.push.apply(v,m.map(function(b){return{index1:f,index2:h,pos:b,type:"intersection"}}))}),v.sort(function(p,h){return ce(d[0],p.pos)-ce(d[0],h.pos)}),l.push.apply(l,v),Qn(d[1],r)&&l.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),i.forEach(function(u,f){if(Qn(u[1],n)){var d=!1,v=Oe(l,function(p){var h=p.index2;return h===f?(d=!0,!1):!!d});v===-1&&(d=!1,v=Oe(l,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===f?(d=!0,!1):!!d})),v===-1?l.push({index1:-1,index2:f,pos:u[1],type:"inside"}):l.splice(v,0,{index1:-1,index2:f,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var f=u.pos,d=f[0]+"x"+f[1];return c[d]?!1:(c[d]=!0,!0)})}function Ai(t,e){var n=Oi(t,e);return n.map(function(r){var a=r.pos;return a})}function Uv(t){var e=t[0],n=e.index1,r=e.index2,a=t[1],i=a.index1,s=a.index2;return n!==-1&&(n===i||n+1===i)||r!==-1&&(r===s||r+1===s)}function Qv(t,e){var n=Oi(t,e),r=[],a;return Oi(t,e).forEach(function(i,s,o){s===0||!Uv([o[s-1],i])?(a=[i],r.push(a)):a.push(i)}),r.map(function(i){return i.map(function(s){var o=s.pos;return o})})}function Jn(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var a=r.length===0,i=t.length,s=t[n]?n:0,o=sr(t.slice(s),t.slice(0,s)),l=function(f){var d=o[f];if(find(e,function(m){return m[0]===d[0]&&m[1]===d[1]}))return"continue";if(r.some(function(m){return find(m,function(b){return b[0]===d[0]&&b[1]===d[1]})}))return a?"continue":"break";var v=void 0;a?(v=[],r.push(v)):v=r[r.length-1],v.push(d);var p=[d,t[n+1]||t[0]],h=e.filter(function(m){return jv(m,p)}).sort(function(m,b){return getDist(d,m)-getDist(d,b)})[0];if(h){var g=e.indexOf(h);if(Jn(e,t,g,r),!a)return"break"}else return Jn(o,e,f+1,r),"break"},c=0;c<i;++c){var u=l(c);if(u==="break")break}return r}function sb(t,e){return Jn(t,sr(e).reverse())}function lb(t,e){if(!e.length)return[sr(t)];var n=Qv(t,e),r=[t];return n.forEach(function(a){var i=sr(a).reverse();r=Zv(r.map(function(s){var o=Jn(s,i),l=o[0];if(o.length===1&&i.every(function(d){return l.indexOf(d)===-1})){var c=l[l.length-1],u=sr(i).sort(function(d,v){return getDist(c,d)-getDist(c,v)})[0],f=i.indexOf(u);l.push.apply(l,sr(i.slice(f),i.slice(0,f),[i[f],c]))}return o}))}),r}function qv(t,e){var n=Ai(t,e);return dn(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ni=function(){return Ni=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ni.apply(this,arguments)};function Jv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var tp=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(te(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(te(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=Oe(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Jv(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(Ni({listener:r},a))},t}();const fn=tp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Li=function(t,e){return Li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Li(t,e)};function ep(t,e){Li(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kr=function(){return kr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kr.apply(this,arguments)};function rp(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function hl(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function ta(t){if(t){if(Vt(t))return document.querySelector(t)}else return null;if(Xn(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var np=function(t){ep(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var a=r._currentOptions;r._lock||!a||r.emit("scrollDrag",{next:function(i){r.checkScroll({container:a.container,inputEvent:i})}})},r}var n=e.prototype;return n.dragStart=function(r,a){var i=ta(a.container);if(!i){this._flag=!1;return}var s=0,o=0,l=0,c=0;if(i===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=i.getBoundingClientRect();s=u.top,o=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},n.drag=function(r,a){if(clearTimeout(this._timer),!!this._flag){var i=r.clientX,s=r.clientY,o=a.threshold,l=o===void 0?0:o,c=this,u=c._startRect,f=c._startPos;this._currentOptions=a;var d=[0,0];return u.top>s-l?(f[1]>u.top||s<f[1])&&(d[1]=-1):u.top+u.height<s+l&&(f[1]<u.top+u.height||s>f[1])&&(d[1]=1),u.left>i-l?(f[0]>u.left||i<f[0])&&(d[0]=-1):u.left+u.width<i+l&&(f[0]<u.left+u.width||i>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(kr(kr({},a),{direction:d,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var a=this;if(this._isWait)return!1;var i=r.prevScrollPos,s=i===void 0?this._prevScrollPos:i,o=r.direction,l=r.throttleTime,c=l===void 0?0:l,u=r.inputEvent,f=r.isDrag,d=this._getScrollPosition(o||[0,0],r),v=d[0]-s[0],p=d[1]-s[1],h=o||[v?Math.abs(v)/v:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!v&&!p?!1:(this.emit("move",{offsetX:h[0]?v:0,offsetY:h[1]?p:0,inputEvent:u}),c&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,a){var i=a.container,s=a.getScrollPosition,o=s===void 0?rp:s;return o({container:ta(i),direction:r})},n._continueDrag=function(r){var a=this,i,s=r.container,o=r.direction,l=r.throttleTime,c=r.useScroll,u=r.isDrag,f=r.inputEvent;if(!(!this._flag||u&&this._isWait)){var d=en(),v=Math.max(l+this._prevTime-d,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},v),!1;this._prevTime=d;var p=this._getScrollPosition(o,r);this._prevScrollPos=p,u&&(this._isWait=!0),c||(this._lock=!0);var h={container:ta(s),direction:o,inputEvent:f};return(i=r.requestScroll)===null||i===void 0||i.call(r,h),this.emit("scroll",h),this._isWait=!1,c||this.checkScroll(kr(kr({},r),{prevScrollPos:p,direction:o,inputEvent:f}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var a=r.checkScrollEvent;if(a){var i=a===!0?hl:a,s=ta(r.container);a===!0&&(s===document.body||s===document.documentElement)?this._unregister=hl(window,this._onScroll):this._unregister=i(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(fn);const gl=np;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _i=function(t,e){return _i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},_i(t,e)};function ap(t,e){_i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lt=function(){return Lt=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lt.apply(this,arguments)};function ip(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function Bi(t){return ip([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function op(t){return t.touches&&t.touches.length>=2}function ea(t){return t?t.touches?lp(t.touches):[yl(t)]:[]}function sp(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function ml(t,e,n){var r=n.length,a=vn(t,r),i=a.clientX,s=a.clientY,o=a.originalClientX,l=a.originalClientY,c=vn(e,r),u=c.clientX,f=c.clientY,d=vn(n,r),v=d.clientX,p=d.clientY,h=i-u,g=s-f,m=i-v,b=s-p;return{clientX:o,clientY:l,deltaX:h,deltaY:g,distX:m,distY:b}}function zi(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function lp(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(yl(t[r]));return n}function yl(t){return{clientX:t.clientX,clientY:t.clientY}}function vn(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var a=t[r];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Ii=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Bi(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Bi(e)-Bi(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=ml(e||this.prevClients,this.prevClients,this.startClients),a=r.deltaX,i=r.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,a){return ml([e[a]],[n[a]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=vn(e,this.length),a=vn(this.prevClients,this.length),i=r.clientX-a.clientX,s=r.clientY-a.clientY;return Math.sqrt(i*i+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),zi(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),zi(e)/zi(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),bl=["textarea","input"],El=function(t){ap(e,t);function e(n,r){r===void 0&&(r={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._window=window,a.onDragStart=function(d,v){if(v===void 0&&(v=!0),!(!a.flag&&d.cancelable===!1)){var p=d.type.indexOf("drag")>=-1;if(!(a.flag&&p)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,b=h.preventWheelClick,E=h.preventRightClick,C=h.preventDefault,x=h.checkInput,S=h.dragFocusedInput,w=h.preventClickEventOnDragStart,T=h.preventClickEventOnDrag,D=h.preventClickEventByCondition,k=a._useTouch,P=!a.flag;if(a._isSecondaryButton=d.which===3||d.button===2,b&&(d.which===2||d.button===1)||E&&(d.which===3||d.button===2))return a.stop(),!1;if(P){var M=a._window.document.activeElement,O=d.target;if(O){var A=O.tagName.toLowerCase(),N=bl.indexOf(A)>-1,_=O.isContentEditable;if(N||_){if(x||!S&&M===O)return!1;if(M&&(M===O||_&&M.isContentEditable&&M.contains(O)))if(S)O.blur();else return!1}else if((C||d.type==="touchstart")&&M){var z=M.tagName.toLowerCase();(M.isContentEditable||bl.indexOf(z)>-1)&&M.blur()}(w||T||D)&&Kt(a._window,"click",a._onClick,!0)}a.clientStores=[new Ii(ea(d))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=v,a._dragFlag=!0,a._prevInputEvent=d,a.data={},a.doubleFlag=en()-a.prevTime<200,a._isMouseEvent=sp(d),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var B=a._preventMouseEvent||a.emit("dragStart",Lt(Lt({data:a.data,datas:a.data,inputEvent:d,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:v,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));B===!1&&a.stop(),a._isMouseEvent&&a.flag&&C&&d.preventDefault()}if(!a.flag)return!1;var I=0;if(P?(a._attchDragEvent(),k&&m&&(I=setTimeout(function(){Kt(g,"touchstart",a.onDragStart,{passive:!1})}))):k&&m&&Gt(g,"touchstart",a.onDragStart),a.flag&&op(d)){if(clearTimeout(I),P&&d.touches.length!==d.changedTouches.length)return;a.pinchFlag||a.onPinchStart(d)}}}},a.onDrag=function(d,v){if(a.flag){var p=a.options.preventDefault;!a._isMouseEvent&&p&&d.preventDefault(),a._prevInputEvent=d;var h=ea(d),g=a.moveClients(h,d,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",Lt(Lt({},g),{isScroll:!!v,inputEvent:d}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(d,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(d){if(a.flag){var v=a.options,p=v.pinchOutside,h=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,b=v.preventClickEventByCondition,E=a.isDrag;(g||m||b)&&requestAnimationFrame(function(){a._allowClickEvent()}),!b&&!m&&g&&!E&&a._allowClickEvent(),a._useTouch&&p&&Gt(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(d);var C=d?.touches?ea(d):[],x=C.length;x===0||!a.options.keepDragging?a.flag=!1:a._addStore(new Ii(C));var S=a._getPosition(),w=en(),T=!E&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=E||T?0:w,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Lt({data:a.data,datas:a.data,isDouble:T,isDrag:E,isClick:!E,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:d,isTrusted:a._isTrusted},S)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Gt(a._window,"click",a._onClick,!0)},a._onClick=function(d){a._allowClickEvent(),a._preventMouseEvent=!1;var v=a.options.preventClickEventByCondition;v?.(d)||(d.stopPropagation(),d.preventDefault())},a._onContextMenu=function(d){var v=a.options;v.preventRightClick?a.onDragEnd(d):d.preventDefault()},a._passCallback=function(){};var i=[].concat(n),s=i[0];a._window=pv(s)?s:Ke(s),a.options=Lt({checkInput:!1,container:s&&!("document"in s)?Ke(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=a.options,l=o.container,c=o.events,u=o.checkWindowBlur;if(a._useDrag=c.indexOf("drag")>-1,a._useTouch=c.indexOf("touch")>-1,a._useMouse=c.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(d){Kt(d,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(d){Kt(d,"mousedown",a.onDragStart),Kt(d,"mousemove",a._passCallback)}),Kt(l,"contextmenu",a._onContextMenu)),u&&Kt(Ke(),"blur",a.onBlur),a._useTouch){var f={passive:!1};i.forEach(function(d){Kt(d,"touchstart",a.onDragStart,f),Kt(d,"touchmove",a._passCallback,f)})}return a}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,a){return r+a.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(n,r),i&&this.onDrag(a,!0))},e.prototype.move=function(n,r){var a=n[0],i=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+a,clientY:u+i,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var a in n)r[a]=n[a];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Lt(Lt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,a=this.options.container;this.off(),Gt(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(i){Gt(i,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(i){Gt(i,"mousedown",n.onDragStart)}),Gt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(i){Gt(i,"touchstart",n.onDragStart)}),Gt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new Ii(ea(n));this.pinchFlag=!0,this._addStore(i);var s=this.emit("pinchStart",Lt(Lt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Lt(Lt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:a.getAngle(r),rotation:a.getRotation(r),touches:a.getPositions(r),scale:a.getScale(r),distance:a.getDistance(r)},a.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Lt(Lt({data:this.data,datas:this.data,isPinch:r,touches:a.getPositions()},a.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,a){var i=this._getPosition(n,a),s=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Lt(Lt({data:this.data,datas:this.data},i),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var a=this.getCurrentStore(),i=a.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(c,u){var f=u.getPosition();return c.distX+=f.distX,c.distY+=f.distY,c},i),o=s.distX,l=s.distY;return Lt(Lt({},i),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,a={passive:!1};this._isDragAPI&&(Kt(r,"dragover",this.onDrag,a),Kt(n,"dragend",this.onDragEnd)),this._useMouse&&(Kt(r,"mousemove",this.onDrag),Kt(n,"mouseup",this.onDragEnd)),this._useTouch&&(Kt(r,"touchmove",this.onDrag,a),Kt(n,"touchend",this.onDragEnd,a),Kt(n,"touchcancel",this.onDragEnd,a))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Gt(r,"dragover",this.onDrag),Gt(n,"dragend",this.onDragEnd)),this._useMouse&&(Gt(r,"mousemove",this.onDrag),Gt(n,"mouseup",this.onDragEnd)),this._useTouch&&(Gt(r,"touchstart",this.onDragStart),Gt(r,"touchmove",this.onDrag),Gt(n,"touchend",this.onDragEnd),Gt(n,"touchcancel",this.onDragEnd))},e}(fn);function cp(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var up=cp;function dp(t){return up(t).toString(36)}function fp(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function vp(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,a){var i=a.trim();return(i?Ge(i):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function pp(t,e,n,r,a){var i=ge(r),s=i.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=vp(t,e,n),(a||i.head||i.body).appendChild(s),s}function hp(t){var e="rCS"+dp(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var a=fp(n),i=(a||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!i)i=pp(e,t,r,n,a);else{var s=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}const Cl=hp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Gi=function(t,e){return Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Gi(t,e)};function Sl(t,e){Gi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fi=function(){return Fi=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fi.apply(this,arguments)};function gp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}var mp=function(t){Sl(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,a=r.className,i=a===void 0?"":a,s=r.cspNonce,o=r.portalContainer,l=gp(r,["className","cspNonce","portalContainer"]),c=this.injector.className,u=this.tag,f={};return(kv||"").indexOf("simple")>-1&&o&&(f={portalContainer:o}),ue(u,Fi({ref:xe(this,"element"),"data-styled-id":c,className:i+" "+c},f,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(pi);function yp(t,e){var n=Cl(e);return function(r){Sl(a,r);function a(){var i=r!==null&&r.apply(this,arguments)||this;return i.injector=n,i.tag=t,i}return a}(mp)}const xl=yp;var Ki=function(t,e){return Ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Ki(t,e)};function Pr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ki(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var R=function(){return R=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R.apply(this,arguments)};function bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Ep(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function J(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function pn(t,e){var n;return R({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function Cp(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Sp(t){var e=Cp(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var ra=Av(),wl=ra.browser.webkit,Dl=wl&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),xp=ra.browser.name==="firefox",wp=parseInt(ra.browser.webkitVersion,10)>=612||parseInt(ra.browser.version,10)>=15,Wi="moveable-",Dp=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(Sp(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(Dl?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Tp=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Yi=1e-4,$t=1e-7,na=1e-9,Xi=Math.pow(10,10),Tl=-Xi,Mp=["n","w","s","e"],Hi=["n","w","s","e","nw","ne","sw","se"],kp={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Vi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Ml={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},kl=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function hn(t,e,n,r,a,i){var s,o;i===void 0&&(i="draggable");var l=(o=(s=e.gestos[i])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},c=l.originalDatas||l.datas,u=c[i]||(c[i]={});return R(R({},a?ql(e,l):l),{isPinch:!!r,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Rr=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var a=r.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),R(R({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var a,i,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],a=n[0],i=n[1],this.isFlag=!0;else{var o=this.isDrag;a=this.prevX+n[0],i=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Pl(t,e){var n=e.clientX,r=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,o=i.rootMatrix,l=i.is3d,c=i.pos1,u=s.left,f=s.top,d=l?4:3,v=U(dr(o,[n-u,r-f],d),c),p=v[0],h=v[1],g=De({datas:a,distX:p,distY:h}),m=g[0],b=g[1];return[m,b]}function cr(t,e){var n=e.datas,r=t.state,a=r.allMatrix,i=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,f=r.targetMatrix,d=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=a,n.targetMatrix=f,n.beforeMatrix=i,n.offsetMatrix=u,n.transformOrigin=d,n.inverseMatrix=me(a,v),n.inverseBeforeMatrix=me(i,v),n.absoluteOrigin=ir(ct([o,l],c),v),n.startDragBeforeDist=Wt(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=Wt(n.inverseMatrix,n.absoluteOrigin,v)}function Pp(t){return Ar(t.datas.beforeTransform,[50,50],100,100).direction}function aa(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,a=n.transformIndex,i=r.nextTransforms,s=i.length,o=r.nextTransformAppendedIndexes,l=0;a===-1?(e==="translate"?l=0:e==="rotate"&&(l=Oe(i,function(d){return d.match(/scale\(/g)})),l===-1&&(l=i.length),n.transformIndex=l):Ae(o,function(d){return d.index===a&&d.functionName===e})?l=a:l=a+o.filter(function(d){return d.index<a}).length;var c=eh(i,l),u=c.targetFunction,f=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===f?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=J(J([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function ia(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Rp(t){var e=t.datas,n=t.distX,r=t.distY,a=Ol({datas:e,distX:n,distY:r}),i=a[0],s=a[1],o=Rl(e,zv([i,s],4));return Wt(o,ir([0,0,0],4),4)}function Rl(t,e,n){var r=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?mt(o,e,4):mt(e,o,4),c=mt(me(n?i:r,4),l,4),u=mt(c,me(n?s:a,4),4);return u}function Ol(t){var e=t.datas,n=t.distX,r=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=i?4:3;return U(Wt(a,ct(o,[n,r]),l),s)}function De(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,f=o?4:3;return U(Wt(e?i:s,ct(u,[r,a]),f),e?l:c)}function Op(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,f=o?4:3;return U(Wt(e?i:s,ct(e?l:c,[r,a]),f),u)}function Ap(t,e,n,r,a,i){return r===void 0&&(r=e),a===void 0&&(a=n),i===void 0&&(i=[0,0]),t?t.map(function(s,o){var l=nr(s),c=l.value,u=l.unit,f=o?a:r,d=o?n:e;if(s==="%"||isNaN(c)){var v=f?i[o]/f:0;return d*v}else if(u!=="%")return c;return d*c/100}):i}function Al(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Np(t,e){return Al(e).map(function(n){return t[n]})}function Pt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,a=[rr(t[0][0],t[1][0],n,1-n),rr(t[0][1],t[1][1],n,1-n)],i=[rr(t[2][0],t[3][0],n,1-n),rr(t[2][1],t[3][1],n,1-n)];return[rr(a[0],i[0],r,1-r),rr(a[1],i[1],r,1-r)]}function Lp(t,e,n,r,a,i){var s=Xe(e,n,r,a),o=Pt(s,i),l=t[0]-o[0],c=t[1]-o[1];return[l,c]}function gn(t,e,n,r){return mt(t,ua(e,r,n),r)}function _p(t,e,n){var r=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=i?4:3,c=un([n]);return gn(a,we(mt(mt(s,c,4),o,4),4,l),r,l)}function Bp(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return gn(r,mt(i,wi(e,s),s),n,s)}function oa(t){var e=Or(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=Mt(n)?n:Ie(n),Zi(t,r)},setTransformIndex:function(n){Zi(t,n)}}}function sa(t,e){var n=Or(t),r=n.startTransforms;Zi(t,Oe(r,function(a){return a.indexOf("".concat(e,"("))===0}))}function Zi(t,e){var n=Or(t),r=t.datas;if(r.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var i=or([a]);r.startValue=i[0].functionValue}}}function $i(t,e){var n=Or(t);n.nextTransforms=Ie(e)}function Or(t){return t.originalDatas.beforeRenderable}function Nl(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function la(t){return Nl(t).join(" ")}function ca(t){return Or(t).nextStyle}function Ll(t,e,n,r,a){$i(a,e);var i=Ut.drag(t,hn(a,t.state,n,r,!1)),s=i?i.transform:e;return R(R({transform:e,drag:i},jt({transform:s},a)),{afterTransform:s})}function _l(t,e,n,r,a){var i=t.state,s=i.left,o=i.top,l=t.props.groupable,c=_p(t.state,a,e),u=l?s:0,f=l?o:0,d=zl(t,n,c),v=U(r,d);return U(v,[u,f])}function zp(t,e,n,r,a){var i=_l(t,"scale(".concat(e.join(", "),")"),n,r,a);return i}function Bl(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function zl(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,a=r.width,i=r.height,s=r.is3d,o=s?4:3,l=[a/2*(1+e[0]),i/2*(1+e[1])];return It(n,l,o)}function Ip(t,e,n){var r=n.fixedDirection,a=n.fixedPosition;return _l(t,"rotate(".concat(e,"deg)"),r,a,n)}function Gp(t,e,n,r,a,i){var s=t.props.groupable,o=t.state,l=o.transformOrigin,c=o.offsetMatrix,u=o.is3d,f=o.width,d=o.height,v=o.left,p=o.top,h=i.fixedDirection,g=i.nextTargetMatrix||o.targetMatrix,m=u?4:3,b=Ap(a,e,n,f,d,l),E=s?v:0,C=s?p:0,x=gn(c,g,b,m),S=Lp(r,x,e,n,m,h);return U(S,[E,C])}function Il(t,e){return Pt(ee(t.state),e)}function Fp(t,e){var n=t.targetGesto,r=t.controlGesto,a;return n?.isFlag()&&(a=n.getEventData()[e]),!a&&r?.isFlag()&&(a=r.getEventData()[e]),a||{}}function Kp(t,e){return[t[0]*e[0],t[1]*e[1]]}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Kf.apply(void 0,J([Wi],t,!1))}function Gl(t){t()}function Wp(t){return!t||t==="none"?[1,0,0,1,0,0]:te(t)?t:un(t)}function ua(t,e,n){return Ci(e,ln(n,e),t,ln(n.map(function(r){return-r}),e))}function Yp(t,e,n){if(e==="%"){var r=Ui(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Xp(t){var e=da(Ne(t,":before"));return e.map(function(n,r){var a=nr(n),i=a.value,s=a.unit;return i*Yp(t,s,r===0)})}function da(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Fl(t,e){e===void 0&&(e=Ne(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,a=r.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var s=[],o=function(c){var u=a[c].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return u[f]}).join(", "),")"))},l=0;l<i;++l)o(l);return s.join(" ")}return""}function mn(t,e,n,r,a){var i,s,o,l=t&&t.ownerDocument?t.ownerDocument:document,c=l.documentElement||l.body,u=!1,f,d;if(!t||n)f=t;else{var v=(i=t?.assignedSlot)===null||i===void 0?void 0:i.parentElement,p=t.parentElement;v?(u=!0,d=p,f=v):f=p}for(var h=!1,g=t===e||f===e,m="relative",b=1,E=parseFloat((s=a)===null||s===void 0?void 0:s.zoom)||1,C=a?.position;f&&f!==c;){e===f&&(g=!0);var x=Ne(f),S=f.tagName.toLowerCase(),w=Fl(f,x),T=x.willChange,D=parseFloat(x.zoom)||1;if(m=x.position,r&&D!==1){b=D;break}if(!n&&r&&E!==1&&C&&C!=="absolute"||S==="svg"||m!=="static"||w&&w!=="none"||T==="transform")break;var k=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,P=f.parentNode;k&&(u=!0,d=P);var M=k||P;if(M&&M.nodeType===11){f=M.host,h=!0;break}f=M,m="relative"}return{offsetZoom:b,hasSlot:u,parentSlotElement:d,isCustomElement:h,isStatic:m==="static",isEnd:g||!f||f===c,offsetParent:f||c}}function Hp(t,e,n){var r,a=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Yn(i),l=!o,c,u;return!l&&a!=="svg"?(c=Dl?Xp(t):da(n).map(function(f){return parseFloat(f)}),u=c.slice(),l=!0,r=$p(t,c,t===e&&e.tagName.toLowerCase()==="g"),i=r[0],s=r[1],c[0]=r[2],c[1]=r[3]):(c=da(n).map(function(f){return parseFloat(f)}),u=c.slice()),{tagName:a,isSVG:o,hasOffset:l,offset:[i||0,s||0],origin:c,targetOrigin:u}}function Kl(t,e,n){n===void 0&&(n=Ne(t));var r=Ne(document.body),a=r.position;if(!e&&(!a||a==="static"))return[0,0];var i=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(i=0)),[i,s]}function ji(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=we(n,3,4))})}function Vp(t){for(var e=t.parentElement,n=!1;e;){var r=Ne(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function fa(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(fl(t,!e).join(","),")")}function Ui(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n,clientWidth:e,clientHeight:n}}function Zp(t,e){var n=Ui(t),r=n.width,a=n.height,i=n.clientWidth,s=n.clientHeight,o=i/r,l=s/a,c=t.preserveAspectRatio.baseVal,u=c.align,f=c.meetOrSlice,d=[0,0],v=[o,l],p=[0,0];if(u!==1){var h=(u-2)%3,g=Math.floor((u-2)/3);d[0]=r*h/2,d[1]=a*g/2;var m=f===2?Math.max(l,o):Math.min(o,l);v[0]=m,v[1]=m,p[0]=(i-r)/2*h,p[1]=(s-a)/2*g}var b=wi(v,e);return b[e*(e-1)]=p[0],b[e*(e-1)+1]=p[1],ua(b,e,d)}function $p(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),a=Ui(t.ownerSVGElement),i=r.x-a.x,s=r.y-a.y;return[i,s,e[0]-i,e[1]-s]}function It(t,e,n){return Wt(t,ir(e,n),n)}function Xe(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(a){return It(t,a,r)})}function de(t){var e=t.map(function(c){return c[0]}),n=t.map(function(c){return c[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=i-r,l=s-a;return{left:r,top:a,right:i,bottom:s,width:o,height:l}}function Wl(t,e,n,r){var a=Xe(t,e,n,r);return de(a)}function jp(t,e,n,r,a){var i,s=t.target,o=t.origin,l=e.matrix,c=Xl(s),u=c.offsetWidth,f=c.offsetHeight,d=n.getBoundingClientRect(),v=[0,0];n===document.body&&(v=Kl(s,!0));for(var p=s.getBoundingClientRect(),h=p.left-d.left+n.scrollLeft-(n.clientLeft||0)+v[0],g=p.top-d.top+n.scrollTop-(n.clientTop||0)+v[1],m=p.width,b=p.height,E=Ci(r,a,l),C=Wl(E,u,f,r),x=C.left,S=C.top,w=C.width,T=C.height,D=It(E,o,r),k=U(D,[x,S]),P=[h+k[0]*m/w,g+k[1]*b/T],M=[0,0],O=0;++O<10;){var A=me(a,r);i=U(It(A,P,r),It(A,D,r)),M[0]=i[0],M[1]=i[1];var N=Ci(r,a,ln(M,r),l),_=Wl(N,u,f,r),z=_.left,B=_.top,I=z-h,L=B-g;if(Math.abs(I)<2&&Math.abs(L)<2)break;P[0]-=I,P[1]-=L}return M.map(function(F){return Math.round(F)})}function Up(t,e,n){var r=t.length===16,a=r?4:3,i=e.map(function(l){return It(t,l,a)}),s=n.left,o=n.top;return i.map(function(l){return[l[0]+s,l[1]+o]})}function Ar(t,e,n,r){var a=t.length===16,i=a?4:3,s=Xe(t,n,r,i),o=s[0],l=o[0],c=o[1],u=s[1],f=u[0],d=u[1],v=s[2],p=v[0],h=v[1],g=s[3],m=g[0],b=g[1],E=It(t,e,i),C=E[0],x=E[1],S=Math.min(l,f,p,m),w=Math.min(c,d,h,b),T=Math.max(l,f,p,m),D=Math.max(c,d,h,b);l=l-S||0,f=f-S||0,p=p-S||0,m=m-S||0,c=c-w||0,d=d-w||0,h=h-w||0,b=b-w||0,C=C-S||0,x=x-w||0;var k=si(Xe(t,100,100,i));return{left:S,top:w,right:T,bottom:D,origin:[C,x],pos1:[l,c],pos2:[f,d],pos3:[p,h],pos4:[m,b],direction:k}}function ye(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Yl(t,e){return ye([e[0]-t[0],e[1]-t[1]])}function yn(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=kt(t,e));var a=Yl(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(a,"px")}}function Qi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n.length,i=n.reduce(function(o,l){return o+l[0]},0)/a,s=n.reduce(function(o,l){return o+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function ur(t,e){var n=t[e];return te(n)?R(R({},t),n):t}function Xl(t,e){e===void 0&&(e=t?Ne(t):null);var n=t&&!Yn(t.offsetWidth),r=0,a=0,i=0,s=0,o=0,l=0,c=0,u=0,f=0,d=0,v=0,p=0,h=1/0,g=1/0,m=1/0,b=1/0,E=0,C=0,x=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var S=t.getBBox();x=!0,r=S.width,a=S.height,o=r,l=a,c=r,u=a,i=r,s=a}else{var w=t.style,T=e.boxSizing==="border-box",D=parseFloat(e.borderLeftWidth)||0,k=parseFloat(e.borderRightWidth)||0,P=parseFloat(e.borderTopWidth)||0,M=parseFloat(e.borderBottomWidth)||0,O=parseFloat(e.paddingLeft)||0,A=parseFloat(e.paddingRight)||0,N=parseFloat(e.paddingTop)||0,_=parseFloat(e.paddingBottom)||0,z=O+A,B=N+_,I=D+k,L=P+M,F=z+I,W=B+L,H=e.position,Y=0,K=0;if("clientLeft"in t){var V=null;if(H==="absolute"){var Q=mn(t,document.body);V=Q.offsetParent}else V=t.parentElement;if(V){var tt=Ne(V);Y=parseFloat(tt.width),K=parseFloat(tt.height)}}f=Math.max(z,bt(e.minWidth,Y)||0),d=Math.max(B,bt(e.minHeight,K)||0),h=bt(e.maxWidth,Y),g=bt(e.maxHeight,K),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),E=bt(w.width,0)||0,C=bt(w.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,c=Math.abs(o-E)<1?Vn(f,E||o,h):o,u=Math.abs(l-C)<1?Vn(d,C||l,g):l,r=c,a=u,i=c,s=u,T?(m=h,b=g,v=f,p=d,c=r-F,u=a-W):(m=h+F,b=g+W,v=f+F,p=d+W,r=c+F,a=u+W),i=c+z,s=u+B}return{svg:x,offsetWidth:r,offsetHeight:a,clientWidth:i,clientHeight:s,contentWidth:c,contentHeight:u,inlineCSSWidth:E,inlineCSSHeight:C,cssWidth:o,cssHeight:l,minWidth:f,minHeight:d,maxWidth:h,maxHeight:g,minOffsetWidth:v,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:b}}function Hl(t,e){return kt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function va(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Vl(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Ne(t).overflow!=="visible",R(R({},e),r)}function qi(t,e,n,r){var a=t.left,i=t.right,s=t.top,o=t.bottom,l=e.top,c=e.left,u={left:c+a,top:l+s,right:c+i,bottom:l+o,width:i-a,height:o-s};return n&&r?Vl(n,u):u}function bn(t,e){var n=0,r=0,a=0,i=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,a=s.width,i=s.height}var o={left:n,top:r,width:a,height:i,right:n+a,bottom:r+i};return t&&e?Vl(t,o):o}function Zl(t,e,n,r){var a;if(t)a=t;else if(e)a=[0,0];else{var i=n.target;a=$l(i,r)}return a}function $l(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var a=[0,0];return r.indexOf("w")>-1&&(a[0]=-1),r.indexOf("e")>-1&&(a[0]=1),r.indexOf("n")>-1&&(a[1]=-1),r.indexOf("s")>-1&&(a[1]=1),a}}}function Ji(t,e){return[ct(e,t[0]),ct(e,t[1]),ct(e,t[2]),ct(e,t[3])]}function ee(t){var e=t.left,n=t.top,r=t.pos1,a=t.pos2,i=t.pos3,s=t.pos4;return Ji([r,a,i,s],[e,n])}function Qp(t){return Math.round(t%1===-.5?t-1:t)}function Nr(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function jt(t,e){if(e){var n=Or(e);n.nextStyle=R(R({},n.nextStyle),t)}return{style:t,cssText:Fe(t).map(function(r){return"".concat(Hn(r,"-"),": ").concat(t[r],";")}).join("")}}function jl(t,e,n){var r=e.afterTransform||e.transform;return R(R({},jt(R(R(R({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function nt(t,e,n,r){var a=e.datas;a.datas||(a.datas={});var i=R(R({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return a.isStartEvent?r||(a.lastEvent=i):a.isStartEvent=!0,i}function oe(t,e,n){var r=e.datas,a="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),R(R({isDrag:a},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function pa(t,e,n){t._emitter.on(e,n)}function $(t,e,n,r){return t.triggerEvent(e,n,r)}function Ne(t,e){return window.getComputedStyle(t,e)}function ha(t,e,n){var r={},a={};return t.filter(function(i){var s=i.name;if(r[s]||!e.some(function(o){return i[o]}))return!1;if(!n&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return r[s]=!0,!0})}function to(t,e){return t===e||t==null&&e==null}function qp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!Yn(a))return a}return t[n]}function Ul(t,e){var n=[],r=[];return t.forEach(function(a,i){var s=e(a,i,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(a)}),n}function Jp(t,e){var n=[],r={};return t.forEach(function(a,i){var s=e(a,i,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(a)}),n}function Ql(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Lr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function dr(t,e,n){return Wt(me(t,n),ir(e,n),n)}function ql(t,e){var n,r=t.is3d,a=t.rootMatrix,i=r?4:3;return n=dr(a,[e.distX,e.distY],i),e.distX=n[0],e.distY=n[1],e}function ga(t,e,n,r,a){return U(It(t,ct(n,e),a),r)}function be(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function ma(t){return Math.abs(t)<=$t?0:t}function eo(t){return function(e){if(!e.isDragging(t))return"";var n=Fp(e,t),r=n.deg;return r?q("view-control-rotation".concat(r)):""}}function ro(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(i){return r.requestAble===i})?r.parentDirection:!1;var a=r.inputEvent.target;return Nt(a,q("direction"))&&(!t||Nt(a,q(t)))}}function th(t){var e={};for(var n in t)e[t[n]]=n;return e}function eh(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=or(n),l=or(r),c=or([a]),u=or(i),f=or(s),d=Tr(o),v=Tr(l),p=Tr(u),h=Tr(f),g=mt(d,p,4);return{transforms:t,beforeFunctionMatrix:d,beforeFunctionMatrix2:v,targetFunctionMatrix:Tr(c),afterFunctionMatrix:p,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:o,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:f,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:s}}function rh(t){return!t||!te(t)||t instanceof Element?!1:Mt(t)||"length"in t}function fr(t,e){return t?t instanceof Element?t:Vt(t)?e?document.querySelector(t):t:Xn(t)?t():"current"in t?t.current:t:null}function no(t,e){if(!t)return[];var n=rh(t)?[].slice.call(t):[t];return n.reduce(function(r,a){return Vt(a)&&e?J(J([],r,!0),[].slice.call(document.querySelectorAll(a)),!0):(Mt(a)?r.push(no(a,e)):r.push(fr(a,e)),r)},[])}function nh(t,e,n){var r=kt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function Jl(t,e){var n=t.rootMatrix,r=t.is3d,a=r?4:3,i=me(n,a);return r||(i=we(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Un(i,e)}function tc(t,e,n,r,a){var i=t[0],s=t[1],o=0,l=0;if(a&&i&&s){var c=kt([0,0],e),u=kt([0,0],r),f=ye(e),d=Math.cos(c-u)*f;if(!r[0])l=d,o=l*n;else if(!r[1])o=d,l=o/n;else{var v=r[0]*2*i,p=r[1]*2*s,h=ye([v+e[0],p+e[1]])-ye([v,p]),g=kt([0,0],[n,1]);o=Math.cos(g)*h,l=Math.sin(g)*h}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function ec(t,e,n,r){var a,i=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,c=0,u=r.distX,f=r.distY,d=r.parentDistance,v=r.parentDist,p=r.parentScale,h=n.fixedDirection,g=[0,1].map(function(S){return Math.abs(t[S]-h[S])}),m=[0,1].map(function(S){var w=g[S];return w!==0&&(w=2/w),w});if(v)l=v[0],c=v[1],e&&(l?c||(c=l/i):l=c*i);else if(p)l=(p[0]-1)*s,c=(p[1]-1)*o;else if(d){var b=s*g[0],E=o*g[1],C=ye([b,E]);l=d/C*b*m[0],c=d/C*E*m[1]}else{var x=De({datas:n,distX:u,distY:f});x=m.map(function(S,w){return x[w]*S}),a=tc([s,o],x,i,t,e),l=a[0],c=a[1]}return{distWidth:l,distHeight:c}}function ao(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],a=n[1],i=ao(r||""),s=ao(a||""),o=R(R({},i),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ah(t,e,n){var r=ao(t,!0),a=r.x,i=r.y;return[bt(a,e)||0,bt(i,n)||0]}function ih(t,e,n){var r=t.map(function(i){return U(i,e)}),a=r.map(function(i){return sn(i,n)});return{prev:r,next:a,result:a.map(function(i){return ct(i,e)})}}function rc(t,e){return t.length===e.length&&t.every(function(n,r){var a=e[r],i=Mt(n),s=Mt(a);return i&&s?rc(n,a):!i&&!s?n===a:!1})}var oh=pn("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,a=e.angle,i=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),f=(o===!0?t.controlAbles:l.filter(function(h){return o.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[u]}),d=nt(t,e,{});r&&(d.targets=r);var v=$(t,c,d);n.isPinch=v!==!1,n.ables=f;var p=n.isPinch;return p?(f.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[u]){var g=R(R({},e),{datas:i[h.name],parentRotate:a,isPinch:!0});h[u](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var n=e.datas,r=e.scale,a=e.distance,i=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var c=a*(1-1/r),u=nt(t,e,{});o&&(u.targets=o);var f="onPinch".concat(o?"Group":"");$(t,f,u);var d=n.ables,v="drag".concat(o?"Group":"","Control");return d.forEach(function(p){p[v]&&p[v](t,R(R({},e),{datas:i[p.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(i?"Group":"","End"),l=oe(t,e,{isDrag:r});i&&(l.targets=i),$(t,o,l);var c=n.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach(function(f){f[u]&&f[u](t,R(R({},e),{isDrag:r,datas:s[f.name],inputEvent:a,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,R(R({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,R(R({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,R(R({},e),{targets:t.props.targets}))}});function Ee(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var a=r.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(s,o){return i[o]=i[o]||{},i[o][e]=i[o][e]||{},R(R({},n),{datas:i[o][e],originalDatas:i[o]})})}function io(t,e,n,r,a,i,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=a.isPinch,u=a.datas,f=Ee(t,e.name,a),d=t.moveables,v=f.map(function(p,h){var g=d[h],m=g.state,b=m.gestos,E=p;if(o)E=new Rr(s).dragStart(r,p);else{if(b[s]||(b[s]=u.childGestos[h]),!b[s])return;E=hn(p,m,r,c,i,s)}var C=e[n](g,R(R({},E),{parentFlag:!0}));return l&&(b[s]=null),C});return o&&(u.childGestos=d.map(function(p){return p.state.gestos[s]})),v}function Le(t,e,n,r,a,i){a===void 0&&(a=function(u,f){return f});var s=!!n.match(/End$/g),o=Ee(t,e.name,r),l=t.moveables,c=o.map(function(u,f){var d=l[f],v=u;v=a(d,u);var p=e[n](d,R(R({},v),{parentFlag:!0}));return p&&i&&i(d,u,p,f),s&&(d.state.gestos={}),p});return c}var sh=["left","right","center"],lh=["top","bottom","middle"],He={start:"left",end:"right",center:"center"},Ve={start:"top",end:"bottom",center:"middle"};function _r(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,f=u.guidelines,d=u.enableSnap;return!r||!d||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||c||a||i||f&&f.length||s&&s.length||o&&o.length)}function oo(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function ch(t,e){var n=oo(t),r={};for(var a in n)a in e&&n[a]&&(r[a]=e[a]);return r}function so(t,e){var n=ch(t,e),r=lh.filter(function(i){return i in n}),a=sh.filter(function(i){return i in n});return{horizontal:r.map(function(i){return n[i]}),vertical:a.map(function(i){return n[i]})}}function uh(t,e,n){var r=It(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function dh(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];Math.abs(r)<Ot&&(r=0),Math.abs(a)<Ot&&(a=0);var i=0,s=0,o=0;return r?a?(i=-a/r,s=1,o=i*e[0]-e[1]):(s=1,o=-e[1]):(i=-1,o=e[0]),[i,s,o].map(function(l){return rt(l,Ot)})}function ya(t,e,n,r){var a=t.props,i=qp(r,a.snapThreshold,5);return nc(t.state.guidelines,e,n,i)}function nc(t,e,n,r){return{vertical:ic(t,"vertical",e,r),horizontal:ic(t,"horizontal",n,r)}}function fh(t,e,n){var r=n[0],a=n[1],i=e[0],s=e[1],o=U(n,e),l=o[0],c=o[1],u=c>0,f=l>0;l=ma(l),c=ma(c);var d={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(l===0&&c===0)return{vertical:d,horizontal:v};var p=ya(t,l?[r]:[],c?[a]:[]),h=p.vertical,g=p.horizontal;h.posInfos.filter(function(A){var N=A.pos;return f?N>=i:N<=i}),g.posInfos.filter(function(A){var N=A.pos;return u?N>=s:N<=s}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=lo(h),b=m.isSnap,E=m.guideline,C=lo(g),x=C.isSnap,S=C.guideline,w=x?S.pos[1]:0,T=b?E.pos[0]:0;if(l===0)x&&(v.isSnap=!0,v.pos=S.pos[1],v.offset=a-v.pos);else if(c===0)b&&(d.isSnap=!0,d.pos=T,d.offset=r-T);else{var D=c/l,k=n[1]-D*r,P=0,M=0,O=!1;b?(M=T,P=D*M+k,O=!0):x&&(P=w,M=(P-k)/D,O=!0),O&&(d.isSnap=!0,d.pos=M,d.offset=r-M,v.isSnap=!0,v.pos=P,v.offset=a-P)}return{vertical:d,horizontal:v}}function ac(t,e,n){var r=so(t.props.snapDirections,e);return ya(t,r.vertical,r.horizontal,n)}function lo(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,s=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:s}}function ic(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=e==="vertical",i=a?0:1,s=n.map(function(l,c){var u=t.map(function(f){var d=f.pos,v=l-d[i];return{offset:v,dist:Math.abs(v),guideline:f}}).filter(function(f){var d=f.guideline,v=f.dist,p=d.type;return!(p!==e||v>r)}).sort(function(f,d){return f.dist-d.dist});return{pos:l,index:c,guidelineInfos:u}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,c){return l.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function vh(t,e,n,r){r===void 0&&(r=1);var a=[];if(n[0]&&n[1])a=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return Pt(e,o)});else if(!n[0]&&!n[1])for(var i=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)a.push(i[s]),a.push([(i[s][0]+i[s+1][0])/2,(i[s][1]+i[s+1][1])/2]);else t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return Pt(e,o)}):(a=Np(e,n),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return ya(t,a.map(function(o){return o[0]}),a.map(function(o){return o[1]}),r)}function oc(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<$t?1:r<$t?-1:n-r}function ba(t,e){return t.slice().sort(function(n,r){var a=n.sign[e],i=r.sign[e],s=n.offset[e],o=r.offset[e];if(a){if(!i)return-1}else return 1;return oc({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function ph(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*a[0],o*a[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var i=Math.abs(e[0])===1?[1]:[1,-1];i.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var i=Math.abs(e[1])===1?[1]:[1,-1];i.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function sc(t,e){var n=oi([e[0][0],e[1][0]]),r=oi([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function co(t,e){var n=e[0],r=e[1],a=r[0]-n[0],i=r[1]-n[1];Math.abs(a)<$t&&(a=0),Math.abs(i)<$t&&(i=0);var s,o;if(!a)s=n[0],o=t[0];else if(!i)s=n[1],o=t[1];else{var l=i/a;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function lc(t,e,n,r){return r===void 0&&(r=$t),t.every(function(a){var i=co(a,e),s=i<=0;return s===n||Math.abs(i)<=r})}function cc(t,e,n,r,a){return a===void 0&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function hh(t,e){var n=e.line,r=e.centerSign,a=e.verticalSign,i=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,c=o.top,u=o.width,f=o.height,d=[[l,c],[l,c+f]],v=[[l,c],[l+u,c]],p=[[l+u,c],[l+u,c+f]],h=[[l,c+f],[l+u,c+f]];if(lc([[l,c],[l+u,c],[l,c+f],[l+u,c+f]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ze(n,s,v,a),m=Ze(n,s,h,a),b=Ze(n,s,d,i),E=Ze(n,s,p,i),C=g.isBound&&m.isBound,x=g.isBound||m.isBound,S=b.isBound&&E.isBound,w=b.isBound||E.isBound,T=Lr(g.offset,m.offset),D=Lr(b.offset,E.offset),k=[0,0],P=!1,M=!1;return Math.abs(D)<Math.abs(T)?(k=[T,0],P=x,M=C):(k=[0,D],P=w,M=S),{isAllBound:M,isVerticalBound:x,isHorizontalBound:w,isBound:P,offset:k}}function Ze(t,e,n,r,a,i){var s=e[0],o=e[1],l=t[0],c=n[0],u=n[1],f=ma(u[1]-c[1]),d=ma(u[0]-c[0]),v=o,p=s,h=-s/o;if(d){if(!f){if(i&&!v)return{isBound:!1,offset:0};if(p){var E=(c[1]-l[1])/h+l[0];return cc(E,c[0],u[0],r,a)}else{var m=c[1]-l[1],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}}else{if(i&&!p)return{isBound:!1,offset:0};if(v){var g=h*(c[0]-l[0])+l[1];return cc(g,c[1],u[1],r,a)}else{var m=c[0]-l[0],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}return{isBound:!1,offset:0}}function uc(t,e,n){return e.map(function(r){var a=hh(t,r),i=a.isBound,s=a.offset,o=a.isVerticalBound,l=a.isHorizontalBound,c=r.multiple,u=De({datas:n,distX:s[0],distY:s[1]}).map(function(f,d){return f*(c[d]?2/c[d]:0)});return{sign:c,isBound:i,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:u}})}function gh(t,e,n){var r,a=uo(t,e,[0,0],!1).map(function(d){return R(R({},d),{multiple:d.multiple.map(function(v){return Math.abs(v)*2})})}),i=uc(t,a,n),s=ba(i,0),o=ba(i,1),l=0,c=0,u=s.isVerticalBound||o.isVerticalBound,f=s.isHorizontalBound||o.isHorizontalBound;return(u||f)&&(r=Op({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],c=r[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:f,offset:c}}}function mh(t,e){var n=[],r=t[0],a=t[1];return r&&a?n.push([[0,a*2],t,[-r,a]],[[r*2,0],t,[r,-a]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):a?(n.push([[0,a*2],[1,a],[-1,a]]),e&&n.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function uo(t,e,n,r){var a=t.state,i=a.allMatrix,s=a.is3d,o=Xe(i,100,100,s?4:3),l=Pt(o,[0,0]);return mh(n,r).map(function(c){var u=c[0],f=c[1],d=c[2],v=[Pt(o,f),Pt(o,d)],p=dh(v),h=sc(l,v),g=h.vertical,m=h.horizontal,b=co(l,v)<=0;return{multiple:u,centerSign:b,verticalSign:g,horizontalSign:m,lineConstants:p,line:[Pt(e,f),Pt(e,d)]}})}function dc(t,e,n,r){var a=r?t.map(function(i){return sn(i,r)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var s=co(n,i)<=0;return!lc(e,i,s)})}function yh(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}function bh(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,s=-i*e[0]+e[1];return[-s/(i+1/i),s/(i*i+1)]}function Eh(t,e,n,r,a){var i=t.props.innerBounds,s=a*Math.PI/180;if(!i)return[];var o=i.left,l=i.top,c=i.width,u=i.height,f=o-r[0],d=o+c-r[0],v=l-r[1],p=l+u-r[1],h=[[f,v],[d,v],[f,p],[d,p]],g=Pt(n,[0,0]);if(!dc(n,h,g,0))return[];var m=[],b=h.map(function(E){return[ye(E),kt([0,0],E)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(E){var C=kt([0,0],bh(E)),x=yh(E);m.push.apply(m,b.filter(function(S){var w=S[0];return w&&x<=w}).map(function(S){var w=S[0],T=S[1],D=Math.acos(w?x/w:0),k=T+D,P=T-D;return[s+k-C,s+P-C]}).reduce(function(S,w){return S.push.apply(S,w),S},[]).filter(function(S){return!dc(e,h,g,S)}).map(function(S){return rt(S*180/Math.PI,$t)}))}),m}function Ch(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,s=n.pos4,o=[r,a,i,s],l=Pt(o,[0,0]),c=e.left,u=e.top,f=e.width,d=e.height,v=[[c,u],[c,u+d]],p=[[c,u],[c+f,u]],h=[[c+f,u],[c+f,u+d]],g=[[c,u+d],[c+f,u+d]],m=uo(t,o,[0,0],!1),b=[],E=[],C={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(x){var S=x.line,w=x.lineConstants,T=sc(l,S),D=T.horizontal,k=T.vertical,P=Ze(S,w,p,k,1,!0),M=Ze(S,w,g,k,1,!0),O=Ze(S,w,v,D,1,!0),A=Ze(S,w,h,D,1,!0);P.isBound&&!C.top&&(b.push(u),C.top=!0),M.isBound&&!C.bottom&&(b.push(u+d),C.bottom=!0),O.isBound&&!C.left&&(E.push(c),C.left=!0),A.isBound&&!C.right&&(E.push(c+f),C.right=!0)}),{horizontal:b,vertical:E}}function fo(t,e,n){var r=t||{},a=r.position,i=a===void 0?"client":a,s=r.left,o=s===void 0?-1/0:s,l=r.top,c=l===void 0?-1/0:l,u=r.right,f=u===void 0?1/0:u,d=r.bottom,v=d===void 0?1/0:d,p={position:i,left:o,top:c,right:f,bottom:v};return{vertical:fc(p,e,!0),horizontal:fc(p,n,!1)}}function Ea(t,e){var n=t.state,r=n.containerClientRect,a=r.clientHeight,i=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,f=l.right,d=l.bottom,v=e||t.props.bounds||{},p=v.position||"client",h=p==="css",g=v.left,m=g===void 0?-1/0:g,b=v.top,E=b===void 0?-1/0:b,C=v.right,x=C===void 0?h?-1/0:1/0:C,S=v.bottom,w=S===void 0?h?-1/0:1/0:S;return h&&(x=i+f-c-x,w=a+d-u-w),{left:m+c-s,right:x+c-s,top:E+u-o,bottom:w+u-o}}function Sh(t,e,n){var r=Ea(t),a=r.left,i=r.top,s=r.right,o=r.bottom,l=n[0],c=n[1],u=U(n,e),f=u[0],d=u[1];Math.abs(f)<$t&&(f=0),Math.abs(d)<$t&&(d=0);var v=d>0,p=f>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(f===0&&d===0)return{vertical:h,horizontal:g};if(f===0)v?o<c&&(g.pos=o,g.offset=c-o):i>c&&(g.pos=i,g.offset=c-i);else if(d===0)p?s<l&&(h.pos=s,h.offset=l-s):a>l&&(h.pos=a,h.offset=l-a);else{var m=d/f,b=n[1]-m*l,E=0,C=0,x=!1;p&&s<=l?(E=m*s+b,C=s,x=!0):!p&&l<=a&&(E=m*a+b,C=a,x=!0),x&&(E<i||E>o)&&(x=!1),x||(v&&o<=c?(E=o,C=(E-b)/m,x=!0):!v&&c<=i&&(E=i,C=(E-b)/m,x=!0)),x&&(h.isBound=!0,h.pos=C,h.offset=l-C,g.isBound=!0,g.pos=E,g.offset=c-E)}return{vertical:h,horizontal:g}}function fc(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>i&&o.push({isBound:!0,offset:i-r,pos:r}),a-1<s&&o.push({isBound:!0,offset:s-a,pos:a}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,c){return Math.abs(c.offset)-Math.abs(l.offset)})}function vc(t,e,n){var r=n?t.map(function(a){return sn(a,n)}):t;return r.some(function(a){return a[0]<e.left&&Math.abs(a[0]-e.left)>.1||a[0]>e.right&&Math.abs(a[0]-e.right)>.1||a[1]<e.top&&Math.abs(a[1]-e.top)>.1||a[1]>e.bottom&&Math.abs(a[1]-e.bottom)>.1})}function xh(t,e,n){var r=ye(t),a=Math.sqrt(r*r-e*e)||0;return[a,-a].sort(function(i,s){return Math.abs(i-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(i){return kt([0,0],n?[i,e]:[e,i])})}function wh(t,e,n,r,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,s=Ea(t),o=s.left,l=s.top,c=s.right,u=s.bottom,f=o-r[0],d=c-r[0],v=l-r[1],p=u-r[1],h={left:f,top:v,right:d,bottom:p};if(!vc(n,h,0))return[];var g=[];return[[f,0],[d,0],[v,1],[p,1]].forEach(function(m){var b=m[0],E=m[1];n.forEach(function(C){var x=kt([0,0],C);g.push.apply(g,xh(C,b,E).map(function(S){return i+S-x}).filter(function(S){return!vc(e,h,S)}).map(function(S){return rt(S*180/Math.PI,$t)}))})}),g}function Dh(t,e){var n,r=t.direction,a=t.classNames,i=t.size,s=t.pos,o=t.zoom,l=t.key,c=r==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:a.join(" "),style:(n={},n[c?"width":"height"]="".concat(i),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(o,")"),n)})}function vo(t,e){return Dh(R(R({},t),{classNames:J([q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function pc(t,e,n,r,a,i,s,o){var l=t.props.zoom;return n.map(function(c,u){var f=c.type,d=c.pos,v=[0,0];return v[s]=r,v[s?0:1]=-a+d,vo({key:"".concat(e,"TargetGuideline").concat(u),classNames:[q("target","bold",f)],posValue:v,sizeValue:i,zoom:l,direction:e},o)})}function hc(t,e,n,r,a,i){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,c=e==="horizontal"?He:Ve,u=a[c.start],f=a[c.end];return n.filter(function(d){var v=d.hide,p=d.elementRect;if(v)return!1;if(l&&p){var h=p.rect;if(h[c.start]<=u&&f<=h[c.end])return!1}return!0}).map(function(d,v){var p=d.pos,h=d.size,g=d.element,m=d.className,b=[-r[0]+p[0],-r[1]+p[1]];return vo({key:"".concat(e,"-default-guideline-").concat(v),classNames:g?[q("bold"),m]:[q("normal"),m],direction:e,posValue:b,sizeValue:h,zoom:o},i)})}function En(t,e,n,r,a,i,s,o){var l,c=t.props,u=c.snapDigit,f=u===void 0?0:u,d=c.isDisplaySnapDigit,v=d===void 0?!0:d,p=c.snapDistFormat,h=p===void 0?function(x,S){return x}:p,g=c.zoom,m=e==="horizontal"?"X":"Y",b=e==="vertical"?"height":"width",E=Math.abs(a),C=v?parseFloat(E.toFixed(f)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:q("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[b]="".concat(E,"px"),l)},vo({direction:e,classNames:[q(n),s],size:"100%",posValue:[0,0],sizeValue:E,zoom:g},o),o.createElement("div",{className:q("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},C>0?h(C,e):""))}function Th(t,e,n,r){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,s=a?He:Ve,o=n[s.start],l=n[s.end];return Ul(e,function(c){return c.pos[a]}).map(function(c){var u=[],f=[],d=[];return c.forEach(function(v){var p,h,g=v.element,m=v.elementRect.rect;if(m[s.end]<o)u.push(v);else if(l<m[s.start])f.push(v);else if(m[s.start]<=o&&l<=m[s.end]&&r){var b=v.pos,E={element:g,rect:R(R({},m),(p={},p[s.end]=m[s.start],p))},C={element:g,rect:R(R({},m),(h={},h[s.start]=m[s.end],h))},x=[0,0],S=[0,0];x[a]=b[a],x[i]=b[i],S[a]=b[a],S[i]=b[i]+v.size,u.push({type:t,pos:x,size:0,elementRect:E}),f.push({type:t,pos:S,size:0,elementRect:C})}}),u.sort(function(v,p){return p.pos[i]-v.pos[i]}),f.sort(function(v,p){return v.pos[i]-p.pos[i]}),{total:c,start:u,end:f,inner:d}})}function Mh(t,e,n,r,a){var i=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(g){return g.type===o}),c=o==="vertical"?1:0,u=c?0:1,f=Th(o,l,r,i),d=c?Ve:He,v=c?He:Ve,p=r[d.start],h=r[d.end];f.forEach(function(g){var m=g.total,b=g.start,E=g.end,C=g.inner,x=n[u]+m[0].pos[u]-r[v.start],S=r;b.forEach(function(w){var T=w.elementRect.rect,D=S[d.start]-T[d.end];if(D>0){var k=[0,0];k[c]=n[c]+S[d.start]-p-D,k[u]=x,s.push(En(t,o,"dashed",s.length,D,k,w.className,a))}S=T}),S=r,E.forEach(function(w){var T=w.elementRect.rect,D=T[d.start]-S[d.end];if(D>0){var k=[0,0];k[c]=n[c]+S[d.end]-p,k[u]=x,s.push(En(t,o,"dashed",s.length,D,k,w.className,a))}S=T}),C.forEach(function(w){var T=w.elementRect.rect,D=p-T[d.start],k=T[d.end]-h,P=[0,0],M=[0,0];P[c]=n[c]-D,P[u]=x,M[c]=n[c]+h-p,M[u]=x,s.push(En(t,o,"dashed",s.length,D,P,w.className,a)),s.push(En(t,o,"dashed",s.length,k,M,w.className,a))})})}),s}function kh(t,e,n,r,a){var i=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,c=l?0:1,u=l?Ve:He,f=l?He:Ve,d=r[u.start],v=r[u.end],p=r[f.start],h=r[f.end];o.forEach(function(g){var m=g.gap,b=g.gapRects,E=Math.max.apply(Math,J([p],b.map(function(S){var w=S.rect;return w[f.start]}),!1)),C=Math.min.apply(Math,J([h],b.map(function(S){var w=S.rect;return w[f.end]}),!1)),x=(E+C)/2;E===C||x===(p+h)/2||b.forEach(function(S){var w=S.rect,T=S.className,D=[n[0],n[1]];if(w[u.end]<d)D[l]+=w[u.end]-d;else if(v<w[u.start])D[l]+=w[u.start]-d-m;else return;D[c]+=x-p,i.push(En(t,l?"vertical":"horizontal","gap",i.length,m,D,T,a))})})}),i}function Ph(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];if(Math.abs(a)<Ot&&(a=0),Math.abs(i)<Ot&&(i=0),!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var s=i/a,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var c=(e[1]+n-o)/s;return[c-e[0],n]}}function po(t,e,n,r,a){var i=Ph(t,e,n,r);if(!i)return{isOutside:!1,offset:[0,0]};var s=ce(t,e),o=ce(i,t),l=ce(i,e),c=o>s||l>s,u=De({datas:a,distX:i[0],distY:i[1]}),f=u[0],d=u[1];return{offset:[f,d],isOutside:c}}function Ca(t,e){return t.isBound?t.offset:e.isSnap?lo(e).offset:0}function Rh(t,e,n,r,a){var i=e[0],s=e[1],o=n[0],l=n[1],c=r[0],u=r[1],f=a[0],d=a[1],v=-f,p=-d;if(t&&i&&s){v=0,p=0;var h=[];if(o&&l?h.push([0,d],[f,0]):o?h.push([f,0]):l?h.push([0,d]):c&&u?h.push([0,d],[f,0]):c?h.push([f,0]):u&&h.push([0,d]),h.length){h.sort(function(E,C){return ye(U([i,s],E))-ye(U([i,s],C))});var g=h[0];if(g[0]&&Math.abs(i)>Ot)v=-g[0],p=s*Math.abs(i+v)/Math.abs(i)-s;else if(g[1]&&Math.abs(s)>Ot){var m=s;p=-g[1],v=i*Math.abs(s+p)/Math.abs(m)-i}if(t&&l&&o)if(Math.abs(v)>Ot&&Math.abs(v)<Math.abs(f)){var b=Math.abs(f)/Math.abs(v);v*=b,p*=b}else if(Math.abs(p)>Ot&&Math.abs(p)<Math.abs(d)){var b=Math.abs(d)/Math.abs(p);v*=b,p*=b}else v=Lr(-f,v),p=Lr(-d,p)}}else v=i||o?-f:0,p=s||l?-d:0;return[v,p]}function Oh(t,e,n,r,a,i){if(!_r(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Ji(i.absolutePoses,[e,n]),o=de(s),l=o.left,c=o.right,u=o.top,f=o.bottom,d={horizontal:s.map(function(A){return A[1]}),vertical:s.map(function(A){return A[0]})},v=oo(t.props.snapDirections),p=so(v,{left:l,right:c,top:u,bottom:f,center:(l+c)/2,middle:(u+f)/2}),h=Sa(t,a,p,d),g=h.vertical,m=h.horizontal,b=gh(t,s,i),E=b.vertical,C=b.horizontal,x=g.isSnap,S=m.isSnap,w=g.isBound||E.isBound,T=m.isBound||C.isBound,D=Lr(g.offset,E.offset),k=Lr(m.offset,C.offset),P=Rh(r,[e,n],[w,T],[x,S],[D,k]),M=P[0],O=P[1];return[{isBound:w,isSnap:x,offset:M},{isBound:T,isSnap:S,offset:O}]}function Sa(t,e,n,r){r===void 0&&(r=n);var a=fo(Ea(t),r.vertical,r.horizontal),i=a.horizontal,s=a.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ya(t,n.vertical,n.horizontal),l=o.horizontal,c=o.vertical,u=Ca(i[0],l),f=Ca(s[0],c),d=Math.abs(u),v=Math.abs(f);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:d,bounds:i,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:v,bounds:s,snap:c}}}function gc(t,e,n,r,a){var i=fo(e,n,r),s=i.horizontal,o=i.vertical,l=nc(t,n,r,a),c=l.horizontal,u=l.vertical,f=Ca(s[0],c),d=Ca(o[0],u),v=Math.abs(f),p=Math.abs(d);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:v,bounds:s,snap:c},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:p,bounds:o,snap:u}}}function Ah(t,e,n,r){var a=kt(t,e)/Math.PI*180,i=n.vertical,s=i.isBound,o=i.isSnap,l=i.dist,c=n.horizontal,u=c.isBound,f=c.isSnap,d=c.dist,v=a%180,p=v<3||v>177,h=v>87&&v<93;return d<l&&(s||o&&!h&&(!r||!p))?"vertical":u||f&&!p&&(!r||!h)?"horizontal":""}function Nh(t,e,n,r,a,i){return n.map(function(s){var o=s[0],l=s[1],c=Pt(e,o),u=Pt(e,l),f=r?Lh(t,c,u,a):Sa(t,a,{vertical:[u[0]],horizontal:[u[1]]}),d=f.horizontal,v=d.offset,p=d.isBound,h=d.isSnap,g=f.vertical,m=g.offset,b=g.isBound,E=g.isSnap,C=U(l,o);if(!m&&!v)return{isBound:b||p,isSnap:E||h,sign:C,offset:[0,0]};var x=Ah(c,u,f,r);if(!x)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var S=x==="vertical",w=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?w=De({datas:i,distX:-m,distY:-v}):w=po(c,u,-(S?m:v),S,i).offset,w=w.map(function(T,D){return T*(C[D]?2/C[D]:0)}),{sign:C,isBound:S?b:p,isSnap:S?E:h,offset:w}})}function mc(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Lh(t,e,n,r){var a=Sh(t,e,n),i=a.horizontal,s=a.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:fh(t,e,n),l=o.horizontal,c=o.vertical,u=mc(i,l),f=mc(s,c),d=Math.abs(u),v=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:f,dist:v}}}function _h(t,e,n,r,a){var i=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,c=t.props.bounds,u=1/0,f=1/0;if(c){var d=[[n[0],-n[1]],[-n[0],n[1]]],v=c.left,p=v===void 0?-1/0:v,h=c.top,g=h===void 0?-1/0:h,m=c.right,b=m===void 0?1/0:m,E=c.bottom,C=E===void 0?1/0:E;d.forEach(function(x){var S=x[0]!==i[0],w=x[1]!==i[1],T=Pt(e,x),D=kt(r,T)*360/Math.PI;if(w){var k=T.slice();(Math.abs(D-360)<2||Math.abs(D-180)<2)&&(k[1]=r[1]);var P=po(r,k,(r[1]<T[1]?C:g)-T[1],!1,a),M=P.offset,O=M[1],A=P.isOutside;isNaN(O)||(f=l+(A?1:-1)*Math.abs(O))}if(S){var k=T.slice();(Math.abs(D-90)<2||Math.abs(D-270)<2)&&(k[0]=r[0]);var N=po(r,k,(r[0]<T[0]?b:p)-T[0],!0,a),_=N.offset[0],z=N.isOutside;isNaN(_)||(u=o+(z?1:-1)*Math.abs(_))}})}return{maxWidth:u,maxHeight:f}}function ho(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,a=n.overflow,i=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,c=n.clientLeft,u=n.clientTop,f=t.props,d=f.snapGap,v=d===void 0?!0:d,p=f.verticalGuidelines,h=f.horizontalGuidelines,g=f.snapThreshold,m=g===void 0?5:g,b=f.snapGridWidth,E=b===void 0?0:b,C=f.snapGridHeight,x=C===void 0?0:C,S=f.maxSnapElementGuidelineDistance,w=S===void 0?1/0:S,T=de(ee(t.state)),D=T.top,k=T.left,P=T.bottom,M=T.right,O={top:D,left:k,bottom:P,right:M,center:(k+M)/2,middle:(D+P)/2},A=Ih(t),N=J([],A,!0);v&&N.push.apply(N,Bh(t,O,m)),N.push.apply(N,zh(E,x,a?s:l,a?i:o,c,u));var _=R({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var z=n.left,B=n.top;_.left+=z,_.top+=B,_.right+=z,_.bottom+=B}return N.push.apply(N,bc(h||!1,p||!1,a?s:l,a?i:o,c,u,_)),N=N.filter(function(I){var L=I.element,F=I.elementRect,W=I.type;if(!L||!F)return!0;var H=F.rect;return yc(O,H,W,w)}),N}function Bh(t,e,n){var r=t.props,a=r.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,c=[];return[["vertical",He,Ve],["horizontal",Ve,He]].forEach(function(u){var f=u[0],d=u[1],v=u[2],p=e[d.start],h=e[d.end],g=e[d.center],m=e[v.start],b=e[v.end];function E(S){var w=S.rect;return w[d.end]<p+n?p-w[d.end]:h-n<w[d.start]?w[d.start]-h:-1}var C=l.filter(function(S){var w=S.rect;return w[v.start]>b||w[v.end]<m?!1:E(S)>0}).sort(function(S,w){return E(S)-E(w)}),x=[];C.forEach(function(S){C.forEach(function(w){if(S!==w){var T=S.rect,D=w.rect,k=T[v.start],P=T[v.end],M=D[v.start],O=D[v.end];k>O||M>P||x.push([S,w])}})}),x.forEach(function(S){var w=S[0],T=S[1],D=w.rect,k=T.rect,P=D[d.start],M=D[d.end],O=k[d.start],A=k[d.end],N=0,_=0,z=!1,B=!1,I=!1;if(M<=p&&h<=O){if(B=!0,N=(O-M-(h-p))/2,_=M+N+(h-p)/2,Math.abs(_-g)>n)return}else if(M<O&&A<p+n){if(z=!0,N=O-M,_=A+N,Math.abs(_-p)>n)return}else if(M<O&&h-n<P){if(I=!0,N=O-M,_=P-N,Math.abs(_-h)>n)return}else return;N&&yc(e,k,f,i)&&(N>o||c.push({type:f,pos:f==="vertical"?[_,0]:[0,_],element:T.element,size:0,className:T.className,isStart:z,isCenter:B,isEnd:I,gap:N,hide:!0,gapRects:[w,T]}))})}),c}function zh(t,e,n,r,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,rt(o-i,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[rt(o-a,.1),0],size:r,hide:!0});return s}function yc(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Ih(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter(function(d){return!d.refresh}),i=r.map(function(d){return te(d)&&"element"in d?R(R({},d),{element:fr(d.element,!0)}):{element:fr(d,!0)}}).filter(function(d){return d.element}),s=Mr(a.map(function(d){return d.element}),i.map(function(d){return d.element})),o=s.maintained,l=s.added,c=[];o.forEach(function(d){var v=d[0],p=d[1];c[p]=a[v]}),Gh(t,l.map(function(d){return i[d]})).map(function(d,v){c[l[v]]=d}),e.elementRects=c;var u=oo(t.props.elementSnapDirections),f=[];return c.forEach(function(d){var v=d.element,p=d.top,h=p===void 0?u.top:p,g=d.left,m=g===void 0?u.left:g,b=d.right,E=b===void 0?u.right:b,C=d.bottom,x=C===void 0?u.bottom:C,S=d.center,w=S===void 0?u.center:S,T=d.middle,D=T===void 0?u.middle:T,k=d.className,P=d.rect,M=so({top:h,right:E,left:m,bottom:x,center:w,middle:D},P),O=M.horizontal,A=M.vertical,N=P.top,_=P.left,z=P.right-_,B=P.bottom-N,I=[z,B];A.forEach(function(L){f.push({type:"vertical",element:v,pos:[rt(L,.1),N],size:B,sizes:I,className:k,elementRect:d})}),O.forEach(function(L){f.push({type:"horizontal",element:v,pos:[_,rt(L,.1)],size:z,sizes:I,className:k,elementRect:d})})}),f}function bc(t,e,n,r,a,i,s){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,c=s.top,u=s.bottom,f=s.right,d=n+f-l,v=r+u-c;return t&&t.forEach(function(p){var h=te(p)?p:{pos:p};o.push({type:"horizontal",pos:[l,rt(h.pos-i+c,.1)],size:d,className:h.className})}),e&&e.forEach(function(p){var h=te(p)?p:{pos:p};o.push({type:"vertical",pos:[rt(h.pos-a+l,.1),c],size:v,className:h.className})}),o}function Gh(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,a=n.targetClientRect,i=a.top,s=a.left,o=n.rootMatrix,l=n.is3d,c=l?4:3,u=uh(o,r,c),f=u[0],d=u[1],v=ee(n),p=Ye(v),h=p.minX,g=p.minY,m=U([h,g],dr(o,[s-f,i-d],c)).map(function(C){return Qp(C)}),b=m[0],E=m[1];return e.map(function(C){var x=C.element.getBoundingClientRect(),S=x.left-f,w=x.top-d,T=w+x.height,D=S+x.width,k=dr(o,[S,w],c),P=k[0],M=k[1],O=dr(o,[D,T],c),A=O[0],N=O[1];return R(R({},C),{rect:{left:P+b,right:A+b,top:M+E,bottom:N+E,center:(P+A)/2+b,middle:(M+N)/2+E}})})}function xa(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(n!==r){var s=fr(r,!0);if(s){var o=bn(s),l=Jl(e,[o.left-a.left,o.top-a.top]),c=Jl(e,[o.right-a.right,o.bottom-a.bottom]);i.left=rt(l[0],1e-5),i.top=rt(l[1],1e-5),i.right=rt(c[0],1e-5),i.bottom=rt(c[1],1e-5)}}return e.snapContainer=r,e.snapOffset=i,e.guidelines=ho(t),e.enableSnap=!0,!0}function Ec(t,e,n,r,a,i){var s=Xe(t,e,n,i?4:3),o=Pt(s,r);return Ji(s,U(a,o))}function Fh(t,e,n,r,a,i){var s=i.fixedDirection,o=ph(n,s,r),l=uo(t,e,n,r),c=J(J([],Nh(t,e,o,r,a,i),!0),uc(t,l,i),!0),u=ba(c,0),f=ba(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Kh(t,e,n,r,a,i,s,o,l){var c=Pt(e,s),u=Sa(t,o,{vertical:[c[0]],horizontal:[c[1]]}),f=u.horizontal.offset,d=u.vertical.offset;if(rt(d,Yi)||rt(f,Yi)){var v=De({datas:l,distX:-d,distY:-f}),p=v[0],h=v[1],g=Math.min(a||1/0,n+s[0]*p),m=Math.min(i||1/0,r+s[1]*h);return[g-n,m-r]}return[0,0]}function Cc(t,e,n,r,a,i,s,o){for(var l=ee(t.state),c=t.props.keepRatio,u=0,f=0,d=0;d<2;++d){var v=e(u,f),p=Fh(t,v,a,c,s,o),h=p.width,g=p.height,m=h.isBound,b=g.isBound,E=h.offset,C=g.offset;if(d===1&&(m||(E=0),b||(C=0)),d===0&&s&&!m&&!b)return[0,0];if(c){var x=Math.abs(E)*(n?1/n:1),S=Math.abs(C)*(r?1/r:1),w=m&&b?x<S:b||!m&&x<S;w?E=n*C/r:C=r*E/n}u+=E,f+=C}if(a[0]&&a[1]){var T=_h(t,l,a,i,o),D=T.maxWidth,k=T.maxHeight,P=Kh(t,e(u,f).map(function(A){return A.map(function(N){return rt(N,Yi)})}),n+u,r+f,D,k,a,s,o),E=P[0],C=P[1];u+=E,f+=C}return[u,f]}function Wh(t,e,n){if(!_r(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,a=e.pos2,i=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,c=[r,a,i,s].map(function(v){return U(v,o)}),u=c.map(function(v){return sn(v,l)}),f=J(J([],wh(t,c,u,o,n),!0),Eh(t,c,u,o,n),!0);f.sort(function(v,p){return Math.abs(v-n)-Math.abs(p-n)});var d=f.length>0;return{isSnap:d,rotation:d?f[0]:n}}function Yh(t,e,n,r,a,i,s){if(!_r(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,c=t.state,u=c.allMatrix,f=c.is3d;return Cc(t,function(d,v){return Ec(l||u,e+d,n+v,o,a,f)},e,n,r,a,i,s)}function Xh(t,e,n,r,a){if(!_r(t,"scalable"))return[0,0];var i=a.startOffsetWidth,s=a.startOffsetHeight,o=a.fixedPosition,l=a.fixedDirection,c=a.is3d,u=Cc(t,function(f,d){return Ec(Bp(a,ct(e,[f/i,d/s])),i,s,l,o,c)},i,s,n,o,r,a);return[u[0]/i,u[1]/s]}function Hh(t,e){e.absolutePoses=ee(t.state)}function Sc(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var a=r.guideline;e.indexOf(a)>-1||e.push(a)})}),e}function xc(t,e,n,r,a,i){var s=fo(Ea(t,i),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(d){d.isBound&&r.push({type:"bounds",pos:d.pos})}),l.forEach(function(d){d.isBound&&a.push({type:"bounds",pos:d.pos})});var c=Ch(t),u=c.vertical,f=c.horizontal;u.forEach(function(d){Oe(r,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===d})>=0||r.push({type:"bounds",pos:d})}),f.forEach(function(d){Oe(a,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===d})>=0||a.push({type:"bounds",pos:d})})}var Vh=ro("",["resizable","scalable"]),Zh={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,f=u===void 0?1:u;if(!c||!c.render||!_r(t,""))return[];n.guidelines=ho(t);var d=Math.min(i[0],s[0],o[0],l[0]),v=Math.min(i[1],s[1],o[1],l[1]),p=c.externalPoses||[],h=ee(t.state),g=[],m=[],b=[],E=[],C=[],x=de(h),S=x.width,w=x.height,T=x.top,D=x.left,k=x.bottom,P=x.right,M={left:D,right:P,top:T,bottom:k,center:(D+P)/2,middle:(T+k)/2},O=p.length>0,A=O?de(p):{};if(!c.request){if(c.direction&&C.push(vh(t,h,c.direction,f)),c.snap){var N=de(h);c.center&&(N.middle=(N.top+N.bottom)/2,N.center=(N.left+N.right)/2),C.push(ac(t,N,f))}O&&(c.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),C.push(ac(t,A,f))),C.forEach(function(I){var L=I.vertical.posInfos,F=I.horizontal.posInfos;g.push.apply(g,L.filter(function(W){var H=W.guidelineInfos;return H.some(function(Y){var K=Y.guideline;return!K.hide})}).map(function(W){return{type:"snap",pos:W.pos}})),m.push.apply(m,F.filter(function(W){var H=W.guidelineInfos;return H.some(function(Y){var K=Y.guideline;return!K.hide})}).map(function(W){return{type:"snap",pos:W.pos}})),b.push.apply(b,Sc(L)),E.push.apply(E,Sc(F))})}xc(t,[D,P],[T,k],g,m),O&&xc(t,[A.left,A.right],[A.top,A.bottom],g,m,c.externalBounds);var _=J(J([],b,!0),E,!0),z=_.filter(function(I){return I.element&&!I.gapRects}),B=_.filter(function(I){return I.gapRects}).sort(function(I,L){return I.gap-L.gap});return $(t,"onSnap",{guidelines:_.filter(function(I){var L=I.element;return!L}),elements:z,gaps:B},!0),J(J(J(J(J(J([],Mh(t,z,[d,v],M,e),!0),kh(t,B,[d,v],M,e),!0),hc(t,"horizontal",E,[a,r],M,e),!0),hc(t,"vertical",b,[a,r],M,e),!0),pc(t,"horizontal",m,d,r,S,0,e),!0),pc(t,"vertical",g,v,a,w,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},xa(t)},drag:function(t){var e=t.state;xa(t)||(e.guidelines=ho(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Vh(t,e)||Eo(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Nt(e.inputEvent.target,q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,xa(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,xa(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function wc(t,e,n,r){var a=t.getState(),i=a.renderPoses,s=a.rotation,o=a.direction,l=ur(t.props,e).zoom,c=o>0?1:-1,u=s/Math.PI*180,f={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var v=d.renderDirectionMap;return n.forEach(function(p){var h=p.dir;f[h]=!0}),n.map(function(p){var h=p.data,g=p.classNames,m=p.dir,b=Vi[m];if(!b||!f[m])return null;v[m]=!0;var E=(rt(u,15)+c*Ml[m]+720)%180,C={};return Fe(h).forEach(function(x){C["data-".concat(x)]=h[x]}),r.createElement("div",R({className:q.apply(void 0,J(["control","direction",m,e],g,!1)),"data-rotation":E,"data-direction":m},C,{key:"direction-".concat(m),style:Qi.apply(void 0,J([s,l],b.map(function(x){return i[x]}),!1))}))})}function Dc(t,e,n,r){var a=ur(t.props,n).renderDirections,i=a===void 0?e:a;if(!i)return[];var s=i===!0?Hi:i;return wc(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function $h(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),a=r.renderPoses,i=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,u=i/Math.PI*180;return Fe(o).map(function(f){var d=Vi[f];if(!d)return null;var v=(rt(u,15)+c*Ml[f]+720)%180;return e.createElement("div",{className:q("around-control"),"data-rotation":v,"data-direction":f,key:"direction-around-".concat(f),style:Qi.apply(void 0,J([i,l],d.map(function(p){return a[p]}),!1))})})}function Cn(t,e,n,r,a,i){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=kt(n,r),c=e?rt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:q.apply(void 0,J(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":i,"data-direction":e,style:yn(n,r,a,l)})}function Tc(t,e,n,r,a){var i=n===!0?Mp:n;return i.map(function(s,o){var l=Vi[s],c=l[0],u=l[1];if(u!=null)return Cn(t,s,r[c],r[u],a,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Mc(t){return function(e,n){var r=ur(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],Tc(n,t,r,e.getState().renderPoses,e.props.zoom),!0),jh(e,t,n),!0):kc(e,t,n)}}function kc(t,e,n){return Dc(t,Hi,e,n)}function jh(t,e,n){return Dc(t,["nw","ne","sw","se"],e,n)}var Ut={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,a=n.zoom,i=t.getState(),s=i.dragInfo,o=i.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=ye(l),u=kt(l,[0,0]);return[e.createElement("div",{className:q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(u,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentGesto,i=t.state,s=i.gestos,o=i.style;if(s.draggable)return!1;s.draggable=a||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],cr(t,e),sa(e,"translate"),Hh(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=nt(t,e,R({set:function(u){n.startValue=u}},oa(e))),c=r||$(t,"onDragStart",l);return c!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){aa(e,"translate");var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,f=n.prevDist,d=n.prevBeforeDist,v=n.startValue;if(u){o&&(l+=o[0],c+=o[1]);var p=t.props,h=p.parentMoveable,g=r?0:p.throttleDrag||0,m=r?0:p.throttleDragRotate||0,b=0,E=!1,C=!1,x=!1,S=!1;if(!r&&m>0&&(l||c)){var w=p.startDragRotate||0,T=rt(w+kt([0,0],[l,c])*180/Math.PI,m)-w,D=c*Math.abs(Math.cos((T-90)/180*Math.PI)),k=l*Math.abs(Math.cos(T/180*Math.PI)),P=ye([k,D]);b=T*Math.PI/180,l=P*Math.cos(b),c=P*Math.sin(b)}if(!i&&!r&&!a){var M=Oh(t,l,c,m,s||o,n),O=M[0],A=M[1];E=O.isSnap,C=O.isBound,x=A.isSnap,S=A.isBound;var N=O.offset,_=A.offset;l+=N,c+=_}var z=ct(Ol({datas:n,distX:l,distY:c}),v),B=ct(Rp({datas:n,distX:l,distY:c}),v);Ys(B,$t),Ys(z,$t),m||(!E&&!C&&(B[0]=rt(B[0],g),z[0]=rt(z[0],g)),!x&&!S&&(B[1]=rt(B[1],g),z[1]=rt(z[1],g)));var I=U(z,v),L=U(B,v),F=U(L,f),W=U(I,d);n.prevDist=L,n.prevBeforeDist=I,n.passDelta=F,n.passDist=L;var H=n.left+I[0],Y=n.top+I[1],K=n.right-I[0],V=n.bottom-I[1],Q=ia(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(L[0],"px, ").concat(L[1],"px)"));if($i(e,Q),t.state.dragInfo.dist=r?[0,0]:L,!(!r&&!h&&F.every(function(ot){return!ot})&&W.some(function(ot){return!ot}))){var tt=t.state,et=tt.width,X=tt.height,Z=nt(t,e,R({transform:Q,dist:L,delta:F,translate:B,beforeDist:I,beforeDelta:W,beforeTranslate:z,left:H,top:Y,right:K,bottom:V,width:et,height:X,isPinch:i},jt({transform:Q},e)));return!r&&$(t,"onDrag",Z),Z}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,R(R({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var a=oe(t,e,{});return!n&&$(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var s=io(t,this,"dragStart",[r||0,a||0],e,!1,"draggable"),o=R(R({},i),{targets:t.props.targets,events:s}),l=$(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?i:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),a=e.datas.passDelta,i=io(t,this,"drag",a,e,!1,"draggable");if(r){var s=R({targets:t.props.targets,events:i},r);return $(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var a=io(t,this,"dragEnd",[0,0],e,!1,"draggable");return $(t,"onDragGroupEnd",oe(t,e,{targets:t.props.targets,events:a})),n}},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(i){return"x"in i?r=i.x-n.left:"deltaX"in i&&(r+=i.deltaX),"y"in i?a=i.y-n.top:"deltaY"in i&&(a+=i.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Pc=ro("resizable"),go={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Mc("resizable"),dragControlCondition:Pc,viewClassName:eo("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,a=e.isPinch,i=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,f=Zl(s,a,r,l),d=t.state,v=d.target,p=d.width,h=d.height,g=d.gestos;if(!f||!v||g.resizable)return!1;g.resizable=o||t.controlGesto,!a&&cr(t,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&Vt(m)?m.split(" "):m,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!f[0]&&!f[1]||f[0]||!f[1];function b(D){l.ratio=D&&isFinite(D)?D:0}l.startPositions=ee(t.state);function E(D){l.fixedDirection=D,l.fixedPosition=Pt(l.startPositions,D)}function C(D){var k=t.state,P=k.width,M=k.height;l.fixedPosition=D,l.fixedDirection=Bl(D,P,M)}function x(D){l.minSize=[bt("".concat(D[0]),0)||0,bt("".concat(D[1]),0)||0]}function S(D){var k=[D[0]||1/0,D[1]||1/0];(!ei(k[0])||isFinite(k[0]))&&(k[0]=bt("".concat(k[0]),0)||1/0),(!ei(k[1])||isFinite(k[1]))&&(k[1]=bt("".concat(k[1]),0)||1/0),l.maxSize=k}b(p/h),E(c||[-f[0],-f[1]]),l.setFixedDirection=E,l.setFixedPosition=C,l.setMin=x,l.setMax=S;var w=nt(t,e,{direction:f,startRatio:l.ratio,set:function(D){var k=D[0],P=D[1];l.startWidth=k,l.startHeight=P},setMin:x,setMax:S,setRatio:b,setFixedDirection:E,setFixedPosition:C,setOrigin:function(D){l.transformOrigin=D},dragStart:Ut.dragStart(t,new Rr().dragStart([0,0],e))}),T=u||$(t,"onResizeStart",w);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,T!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?w:!1},dragControl:function(t,e){var n,r=e.datas,a=e.parentFlag,i=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,f=e.parentEvent,d=e.resolveMatrix,v=r.isResize,p=r.transformOrigin,h=r.startWidth,g=r.startHeight,m=r.prevWidth,b=r.prevHeight,E=r.minSize,C=r.maxSize,x=r.ratio,S=r.startOffsetWidth,w=r.startOffsetHeight,T=r.isWidth;if(!v)return;if(d){var D=t.state.is3d,k=r.startOffsetMatrix,P=r.startTransformOrigin,M=D?4:3,O=un(Nl(e)),A=Math.sqrt(O.length);M!==A&&(O=we(O,A,M));var N=gn(k,O,P,M),_=Xe(N,S,w,M);r.startPositions=_,r.nextTargetMatrix=O,r.nextAllMatrix=N}var z=ur(t.props,"resizable"),B=z.resizeFormat,I=z.throttleResize,L=I===void 0?a?0:1:I,F=z.parentMoveable,W=z.keepRatioFinally,H=r.direction,Y=H,K=0,V=0;!H[0]&&!H[1]&&(Y=[1,1]);var Q=x&&(s??z.keepRatio)||!1;function tt(){var yt=r.fixedDirection,wt=ec(Y,Q,r,e);K=wt.distWidth,V=wt.distHeight;var Qt=Y[0]-yt[0]||Q?Math.max(S+K,$t):S,re=Y[1]-yt[1]||Q?Math.max(w+V,$t):w;return Q&&S&&w&&(T?re=Qt/x:Qt=re*x),[Qt,re]}var et=tt(),X=et[0],Z=et[1];f||(r.setFixedDirection(r.fixedDirection),$(t,"onBeforeResize",nt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(yt){var wt;return r.setFixedDirection(yt),wt=tt(),X=wt[0],Z=wt[1],[X,Z]},setFixedPosition:function(yt){var wt;return r.setFixedPosition(yt),wt=tt(),X=wt[0],Z=wt[1],[X,Z]},boundingWidth:X,boundingHeight:Z,setSize:function(yt){X=yt[0],Z=yt[1]}},!0)));var ot=o;o||(!a&&i?ot=Il(t,[0,0]):ot=r.fixedPosition);var at=[0,0];i||(at=Yh(t,X,Z,H,ot,c,r)),l&&(!l[0]&&(at[0]=0),!l[1]&&(at[1]=0));function At(){var yt;B&&(yt=B([X,Z]),X=yt[0],Z=yt[1]),X=rt(X,L),Z=rt(Z,L)}if(Q){Y[0]&&Y[1]&&at[0]&&at[1]&&(Math.abs(at[0])>Math.abs(at[1])?at[1]=0:at[0]=0);var vt=!at[0]&&!at[1];vt&&At(),Y[0]&&!Y[1]||at[0]&&!at[1]||vt&&T?(X+=at[0],Z=X/x):(!Y[0]&&Y[1]||!at[0]&&at[1]||vt&&!T)&&(Z+=at[1],X=Z*x)}else X+=at[0],Z+=at[1],X=Math.max(0,X),Z=Math.max(0,Z);n=Ws([X,Z],E,C,Q?x:!1),X=n[0],Z=n[1],At(),Q&&(u||W)&&(T?Z=X/x:X=Z*x),K=X-S,V=Z-w;var dt=[K-m,V-b];r.prevWidth=K,r.prevHeight=V;var gt=Gp(t,X,Z,ot,p,r);if(!(!F&&dt.every(function(yt){return!yt})&&gt.every(function(yt){return!yt}))){var it=Ut.drag(t,hn(e,t.state,gt,!!i,!1,"draggable")),lt=it.transform,ft=h+K,Xt=g+V,ht=nt(t,e,R({width:ft,height:Xt,offsetWidth:Math.round(X),offsetHeight:Math.round(Z),startRatio:x,boundingWidth:X,boundingHeight:Z,direction:H,dist:[K,V],delta:dt,isPinch:!!i,drag:it},jl({style:{width:"".concat(ft,"px"),height:"".concat(Xt,"px")},transform:lt},it,e)));return!f&&$(t,"onResize",ht),ht}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,f=c-(a+s),d=u-(i+o),v=Math.abs(f)>3,p=Math.abs(d)>3;if(v&&(n.startWidth+=f,n.startOffsetWidth+=f,n.prevWidth+=f),p&&(n.startHeight+=d,n.startOffsetHeight+=d,n.prevHeight+=d),v||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var a=oe(t,e,{});return!r&&$(t,"onResizeEnd",a),a}},dragGroupControlCondition:Pc,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,R(R({},e),{isGroup:!0}));if(!r)return!1;var a=Ee(t,"resizable",e);function i(p,h){var g=n.fixedDirection,m=n.fixedPosition,b=h.datas.startPositions||ee(p.state),E=Pt(b,g),C=Wt(Dr(-t.rotation/180*Math.PI,3),[E[0]-m[0],E[1]-m[1],1],3),x=C[0],S=C[1];return h.datas.originalX=x,h.datas.originalY=S,h}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var p=n.minSize;a.forEach(function(h){var g=h.datas,m=g.minSize,b=g.startOffsetWidth,E=g.startOffsetHeight,C=s*(b?m[0]/b:0),x=o*(E?m[1]/E:0);p[0]=Math.max(p[0],C),p[1]=Math.max(p[1],x)})}function c(){var p=n.maxSize;a.forEach(function(h){var g=h.datas,m=g.maxSize,b=g.startOffsetWidth,E=g.startOffsetHeight,C=s*(b?m[0]/b:0),x=o*(E?m[1]/E:0);p[0]=Math.min(p[0],C),p[1]=Math.min(p[1],x)})}var u=Le(t,this,"dragControlStart",e,function(p,h){return i(p,h)});l(),c();var f=function(p){r.setFixedDirection(p),u.forEach(function(h,g){h.setFixedDirection(p),i(h.moveable,a[g])})};n.setFixedDirection=f;var d=R(R({},r),{targets:t.props.targets,events:u.map(function(p){return R(R({},p),{setMin:function(h){p.setMin(h),l()},setMax:function(h){p.setMax(h),c()}})}),setFixedDirection:f,setMin:function(p){r.setMin(p),l()},setMax:function(p){r.setMax(p),c()}}),v=$(t,"onResizeGroupStart",d);return n.isResize=v!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=ur(t.props,"resizable");pa(t,"onBeforeResize",function(v){$(t,"onBeforeResizeGroup",nt(t,e,R(R({},v),{targets:r.targets}),!0))});var a=this.dragControl(t,R(R({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,s=a.boundingHeight,o=a.dist,l=r.keepRatio,c=[i/(i-o[0]),s/(s-o[1])],u=n.fixedPosition,f=Le(t,this,"dragControl",e,function(v,p){var h=Wt(Dr(t.rotation/180*Math.PI,3),[p.datas.originalX*c[0],p.datas.originalY*c[1],1],3),g=h[0],m=h[1];return R(R({},p),{parentDist:null,parentScale:c,dragClient:ct(u,[g,m]),parentKeepRatio:l})}),d=R({targets:r.targets,events:f},a);return $(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var a=Le(t,this,"dragControlEnd",e),i=oe(t,e,{targets:t.props.targets,events:a});return $(t,"onResizeGroupEnd",i),n}},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var s;return{datas:e,parentDirection:i.direction||[1,1],parentIsWidth:(s=i?.horizontal)!==null&&s!==void 0?s:!0}},request:function(i){return"offsetWidth"in i?n=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(n+=i.deltaWidth),"offsetHeight"in i?r=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(r+=i.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function mo(t,e,n,r,a){var i=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,c=It(t.state.rootMatrix,U([l[0],l[1]],i?[0,0]:[s.left,s.top]),o),u=ct([a.left,a.top],c);e.startAbsoluteOrigin=u,e.prevDeg=kt(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ce(u,[n,r])}function wa(t,e,n){var r=n.defaultDeg,a=n.prevDeg,i=a%360,s=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++s:i<t&&i<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function yo(t,e,n,r){return wa(kt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function bo(t,e,n,r,a,i){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,c=0,u=!1;if(i){var f=Wh(t,e,r);u=f.isSnap,c=a+f.rotation}u||(c=rt(a+r,o));var d=c-a;return n.prevSnapDeg=d,[d-l,d,c]}function Rc(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3];if(t==="none")return[];if(Mt(t))return t.map(function(h){return Rc(h,[r,a,i,s],n)[0]});var o=(t||"top").split("-"),l=o[0],c=o[1],u=[r,a];l==="left"?u=[i,r]:l==="right"?u=[a,s]:l==="bottom"&&(u=[s,i]);var f=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],d=Hl(u,n);if(c){var v=c==="top"||c==="left",p=l==="bottom"||l==="left";f=u[v&&!p||!v&&p?0:1]}return[[f,d]]}function Eo(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Nt(n,q("rotation-control"))||Nt(n,q("around-control"))||Nt(n,q("control"))&&Nt(n,q("rotatable")))return!0;var r=t.props.rotationTarget;return r?no(r,!0).some(function(a){return a?n===a||n.contains(a):!1}):!1}var Uh=Hi.map(function(t){var e="",n="",r="center",a="center";return t.indexOf("n")>-1&&(e="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(a,`;
    }`)}).join(`
`),Qh=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Uh,`
`),qh={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Qh],viewClassName:function(t){return t.isDragging("rotatable")?q("view-rotation-dragging"):""},render:function(t,e){var n=ur(t.props,"rotatable"),r=n.rotatable,a=n.rotationPosition,i=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,f=c.direction;if(!r)return null;var d=Rc(a,u,f),v=[];if(d.forEach(function(m,b){var E=m[0],C=m[1];v.push(e.createElement("div",{key:"rotation".concat(b),className:q("rotation"),style:{transform:"translate(-50%) translate(".concat(E[0],"px, ").concat(E[1],"px) rotate(").concat(C,"rad)")}},e.createElement("div",{className:q("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),s){var p=Fe(l||{}),h={};p.forEach(function(m){l[m].forEach(function(b){h[b]=m})});var g=[];Mt(s)&&(g=s.map(function(m){var b=h[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),v.push.apply(v,wc(t,"rotatable",g,e))}return o&&v.push.apply(v,$h(t,e)),v},dragControlCondition:Eo,dragControlStart:function(t,e){var n,r,a=e.datas,i=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,f=t.state,d=f.target,v=f.left,p=f.top,h=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect,E=f.offsetMatrix,C=f.targetMatrix,x=f.allMatrix,S=f.width,w=f.height;if(!u&&!d)return!1;var T=t.getRect();a.rect=T,a.transform=m,a.left=v,a.top=p;var D=function(K){var V=t.state,Q=V.allMatrix,tt=V.is3d,et=V.width,X=V.height,Z=Bl(K,et,X);a.fixedDirection=Z,a.fixedPosition=It(Q,K,tt?4:3),F&&F.setFixedPosition(K)},k=function(K){a.fixedDirection=K,a.fixedPosition=zl(t,K),F&&F.setFixedDirection(K)},P=i,M=s;if(u||c||l){var O=o||0;a.beforeInfo={origin:T.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},a.afterInfo=R(R({},a.beforeInfo),{origin:T.origin}),a.absoluteInfo=R(R({},a.beforeInfo),{origin:T.origin,startValue:O})}else{var A=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(A){var N=A.getAttribute("data-direction")||"",_=kp[N];if(_){a.isControl=!0,a.isAroundControl=Nt(A,q("around-control")),a.controlDirection=_;var z=A.getAttribute("data-resolve");z&&(a.resolveAble=z);var B=Up(f.rootMatrix,f.renderPoses,b);n=Pt(B,_),P=n[0],M=n[1]}}a.beforeInfo={origin:T.beforeOrigin},a.afterInfo={origin:T.origin},a.absoluteInfo={origin:T.origin,startValue:T.rotation};var I=D;D=function(K){var V=f.is3d?4:3,Q=ct(dl(C,V),K),tt=Q[0],et=Q[1],X=Wt(E,ir([tt,et],V)),Z=Wt(x,ir([K[0],K[1]],V));I(K);var ot=f.posDelta;a.beforeInfo.origin=U(X,ot),a.afterInfo.origin=U(Z,ot),a.absoluteInfo.origin=U(Z,ot),mo(t,a.beforeInfo,P,M,b),mo(t,a.afterInfo,P,M,b),mo(t,a.absoluteInfo,P,M,b)},k=function(K){var V=Pt([[0,0],[S,0],[0,w],[S,w]],K);D(V)}}a.startClientX=P,a.startClientY=M,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},sa(e,"rotate");var L=!1,F=!1;if(a.isControl&&a.resolveAble){var W=a.resolveAble;W==="resizable"&&(F=go.dragControlStart(t,R(R({},new Rr("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}F||(L=Ut.dragStart(t,new Rr().dragStart([0,0],e))),D(f.transformOrigin);var H=nt(t,e,R(R({set:function(K){a.startValue=K*Math.PI/180},setFixedDirection:k,setFixedPosition:D},oa(e)),{dragStart:L,resizeStart:F})),Y=$(t,"onRotateStart",H);return a.isRotate=Y!==!1,f.snapRenderInfo={request:e.isRequest},a.isRotate?H:!1},dragControl:function(t,e){var n,r,a,i=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.groupDelta,d=i.beforeDirection,v=i.beforeInfo,p=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,b=i.rect,E=i.startClientX,C=i.startClientY;if(g){aa(e,"rotate");var x=Pp(e),S=d*x,w=t.props.parentMoveable,T=0,D,k,P=0,M,O,A=0,N,_,z=180/Math.PI*m,B=h.startValue,I=!1,L=E+s,F=C+o;if(!c&&"parentDist"in e){var W=e.parentDist;D=W,M=W,N=W}else u||c?(D=wa(l,d,v),M=wa(l,S,p),N=wa(l,S,h)):(D=yo(L,F,d,v),M=yo(L,F,S,p),N=yo(L,F,S,h),I=!0);if(k=z+D,O=z+M,_=B+N,$(t,"onBeforeRotate",nt(t,e,{beforeRotation:k,rotation:O,absoluteRotation:_,setRotation:function(ot){M=ot-z,D=M,N=M}},!0)),n=bo(t,b,v,D,z,I),T=n[0],D=n[1],k=n[2],r=bo(t,b,p,M,z,I),P=r[0],M=r[1],O=r[2],a=bo(t,b,h,N,B,I),A=a[0],N=a[1],_=a[2],!(!A&&!P&&!T&&!w)){var H=ia(i,"rotate(".concat(O,"deg)"),"rotate(".concat(M,"deg)")),Y=Ip(t,M,i),K=U(ct(f||[0,0],Y),i.prevInverseDist||[0,0]);i.prevInverseDist=Y,i.requestValue=null;var V=Ll(t,H,K,u,e),Q=V,tt=ce([L,F],h.startAbsoluteOrigin)-h.startDist,et=void 0;if(i.resolveAble==="resizable"){var X=go.dragControl(t,R(R({},hn(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:tt}));X&&(et=X,Q=jl(Q,X,e))}var Z=nt(t,e,R(R({delta:P,dist:M,rotate:O,rotation:O,beforeDist:D,beforeDelta:T,beforeRotate:k,beforeRotation:k,absoluteDist:N,absoluteDelta:A,absoluteRotate:_,absoluteRotation:_,isPinch:!!u,resize:et},V),Q));return $(t,"onRotate",Z),Z}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=oe(t,e,{});return $(t,"onRotateEnd",r),r}},dragGroupControlCondition:Eo,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,a=r.left,i=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=Le(t,this,"dragControlStart",e,function(f,d){var v=f.state,p=v.left,h=v.top,g=v.beforeOrigin,m=ct(U([p,h],[a,i]),U(g,s));return d.datas.startGroupClient=m,d.datas.groupClient=m,R(R({},d),{parentRotate:0})}),c=R(R({},o),{targets:t.props.targets,events:l}),u=$(t,"onRotateGroupStart",c);return n.isRotate=u!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){pa(t,"onBeforeRotate",function(c){$(t,"onBeforeRotateGroup",nt(t,e,R(R({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.beforeDirection,i=r.beforeDist,s=i/180*Math.PI,o=Le(t,this,"dragControl",e,function(c,u){var f=u.datas.startGroupClient,d=u.datas.groupClient,v=d[0],p=d[1],h=sn(f,s*a),g=h[0],m=h[1],b=[g-v,m-p];return u.datas.groupClient=[g,m],R(R({},u),{parentRotate:i,groupDelta:b})});t.rotation=a*r.beforeRotation;var l=R({targets:t.props.targets,events:o,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},r);return $(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var a=Le(t,this,"dragControlEnd",e),i=oe(t,e,{targets:t.props.targets,events:a});return $(t,"onRotateGroupEnd",i),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaRotate"in a?n+=a.deltaRotate:"rotate"in a&&(n=a.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Oc=ro("scalable"),Jh={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Mc("scalable"),dragControlCondition:Oc,viewClassName:eo("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection,s=Zl(i,r,a,n),o=t.state,l=o.width,c=o.height,u=o.targetTransform,f=o.target,d=o.pos1,v=o.pos2,p=o.pos4;if(!s||!f)return!1;r||cr(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var h=ce(d,v),g=ce(v,p),m=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/l,n.scaleYRatio=g/c,sa(e,"scale"),n.isWidth=m;function b(S){n.ratio=S&&isFinite(S)?S:0}n.startPositions=ee(t.state);function E(S){n.fixedDirection=S,n.fixedPosition=Pt(n.startPositions,S)}n.setFixedDirection=E,b(ce(d,v)/ce(v,p)),E([-s[0],-s[1]]);var C=nt(t,e,R(R({direction:s,set:function(S){n.startValue=S},setRatio:b,setFixedDirection:E},oa(e)),{dragStart:Ut.dragStart(t,new Rr().dragStart([0,0],e))})),x=$(t,"onScaleStart",C);return n.startFixedDirection=n.fixedDirection,x!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?C:!1},dragControl:function(t,e){aa(e,"scale");var n=e.datas,r=e.parentKeepRatio,a=e.parentFlag,i=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,f=n.startOffsetHeight,d=n.isScale,v=n.startValue,p=n.isWidth,h=n.ratio;if(!d)return!1;var g=t.props,m=g.throttleScale,b=g.parentMoveable,E=c;!c[0]&&!c[1]&&(E=[1,1]);var C=h&&(r??g.keepRatio)||!1,x=t.state;function S(){var F=ec(E,C,n,e),W=F.distWidth,H=F.distHeight,Y=u?(u+W)/u:1,K=f?(f+H)/f:1;return Y=E[0]||C?Y*v[0]:v[0],K=E[1]||C?K*v[1]:v[1],Y===0&&(Y=(l[0]>0?1:-1)*na),K===0&&(K=(l[1]>0?1:-1)*na),[Y,K]}var w=S();if(!i&&t.props.groupable){var T=x.snapRenderInfo||{},D=T.direction;Mt(D)&&(D[0]||D[1])&&(x.snapRenderInfo={direction:c,request:e.isRequest})}$(t,"onBeforeScale",nt(t,e,{scale:w,setFixedDirection:function(F){return n.setFixedDirection(F),w=S(),w},startFixedDirection:n.startFixedDirection,setScale:function(F){w=F}},!0));var k=[w[0]/v[0],w[1]/v[1]],P=s,M=[0,0];if(s||(!a&&i?P=Il(t,[0,0]):P=n.fixedPosition),i||(M=Xh(t,k,c,o,n)),C){E[0]&&E[1]&&M[0]&&M[1]&&(Math.abs(M[0]*u)>Math.abs(M[1]*f)?M[1]=0:M[0]=0);var O=!M[0]&&!M[1];if(O&&(p?k[0]=rt(k[0]*v[0],m)/v[0]:k[1]=rt(k[1]*v[1],m)/v[1]),E[0]&&!E[1]||M[0]&&!M[1]||O&&p){k[0]+=M[0];var A=u*k[0]*v[0]/h;k[1]=A/f/v[1]}else if(!E[0]&&E[1]||!M[0]&&M[1]||O&&!p){k[1]+=M[1];var N=f*k[1]*v[1]*h;k[0]=N/u/v[0]}}else k[0]+=M[0],k[1]+=M[1],M[0]||(k[0]=rt(k[0]*v[0],m)/v[0]),M[1]||(k[1]=rt(k[1]*v[1],m)/v[1]);k[0]===0&&(k[0]=(l[0]>0?1:-1)*na),k[1]===0&&(k[1]=(l[1]>0?1:-1)*na);var _=[k[0]/l[0],k[1]/l[1]];w=Kp(k,v);var z=zp(t,k,n.fixedDirection,P,n),B=U(z,n.prevInverseDist||[0,0]);if(n.prevDist=k,n.prevInverseDist=z,w[0]===l[0]&&w[1]===l[1]&&B.every(function(F){return!F})&&!b)return!1;var I=ia(n,"scale(".concat(w.join(", "),")"),"scale(".concat(k.join(", "),")")),L=nt(t,e,R({offsetWidth:u,offsetHeight:f,direction:c,scale:w,dist:k,delta:_,isPinch:!!i},Ll(t,I,B,i,e)));return $(t,"onScale",L),L},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=oe(t,e,{});return $(t,"onScaleEnd",r),r},dragGroupControlCondition:Oc,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var a=Ee(t,"resizable",e);function i(u,f){var d=n.fixedDirection,v=n.fixedPosition,p=f.datas.startPositions||ee(u.state),h=Pt(p,d),g=Wt(Dr(-t.rotation/180*Math.PI,3),[h[0]-v[0],h[1]-v[1],1],3),m=g[0],b=g[1];return f.datas.originalX=m,f.datas.originalY=b,f}n.moveableScale=t.scale;var s=Le(t,this,"dragControlStart",e,function(u,f){return i(u,f)}),o=function(u){r.setFixedDirection(u),s.forEach(function(f,d){f.setFixedDirection(u),i(f.moveable,a[d])})};n.setFixedDirection=o;var l=R(R({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),c=$(t,"onScaleGroupStart",l);return n.isScale=c!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){pa(t,"onBeforeScale",function(f){$(t,"onBeforeScaleGroup",nt(t,e,R(R({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.moveableScale;t.scale=[r.scale[0]*a[0],r.scale[1]*a[1]];var i=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,c=Le(t,this,"dragControl",e,function(f,d){var v=Wt(Dr(t.rotation/180*Math.PI,3),[d.datas.originalX*s[0],d.datas.originalY*s[1],1],3),p=v[0],h=v[1];return R(R({},d),{parentDist:null,parentScale:o,parentKeepRatio:i,dragClient:ct(l,[p,h])})}),u=R({targets:t.props.targets,events:c},r);return $(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var a=Le(t,this,"dragControlEnd",e),i=oe(t,e,{targets:t.props.targets,events:a});return $(t,"onScaleGroupEnd",i),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function $e(t,e){return t.map(function(n,r){return rr(n,e[r],1,2)})}function Ac(t,e,n){var r=kt(t,e),a=kt(t,n),i=a-r;return i>=0?i:i+2*Math.PI}function tg(t,e){var n=Ac(t[0],t[1],t[2]),r=Ac(e[0],e[1],e[2]),a=Math.PI;return!(n>=a&&r<=a||n<=a&&r>=a)}var eg={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:eo("warpable"),render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable,s=n.zoom;if(r||a||!i)return[];var o=t.state,l=o.pos1,c=o.pos2,u=o.pos3,f=o.pos4,d=$e(l,c),v=$e(c,l),p=$e(l,u),h=$e(u,l),g=$e(u,f),m=$e(f,u),b=$e(c,f),E=$e(f,c);return J([e.createElement("div",{className:q("line"),key:"middeLine1",style:yn(d,g,s)}),e.createElement("div",{className:q("line"),key:"middeLine2",style:yn(v,m,s)}),e.createElement("div",{className:q("line"),key:"middeLine3",style:yn(p,b,s)}),e.createElement("div",{className:q("line"),key:"middeLine4",style:yn(h,E,s)})],kc(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Nt(n,q("direction"))&&Nt(n,q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,a=t.props.target,i=r.target,s=$l(i,n);if(!s||!a)return!1;var o=t.state,l=o.transformOrigin,c=o.is3d,u=o.targetTransform,f=o.targetMatrix,d=o.width,v=o.height,p=o.left,h=o.top;n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?f:we(f,3,4),n.targetInverseMatrix=ul(me(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=p,n.top=h,n.poses=[[0,0],[d,0],[0,v],[d,v]].map(function(b){return U(b,l)}),n.nextPoses=n.poses.map(function(b){var E=b[0],C=b[1];return Wt(n.warpTargetMatrix,[E,C,0,1],4)}),n.startValue=Dt(4),n.prevMatrix=Dt(4),n.absolutePoses=ee(o),n.posIndexes=Al(s),cr(t,e),sa(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=nt(t,e,R({set:function(b){n.startValue=b}},oa(e))),m=$(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,a=e.distX,i=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,f=n.posIndexes,d=n.absolutePoses;if(!l)return!1;if(aa(e,"matrix3d"),_r(t,"warpable")){var v=f.map(function(D){return d[D]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var p=Sa(t,r,{horizontal:v.map(function(D){return D[1]+i}),vertical:v.map(function(D){return D[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=De({datas:n,distX:a,distY:i},!0),b=n.nextPoses.slice();if(f.forEach(function(D){b[D]=ct(b[D],m)}),!Tp.every(function(D){return tg(D.map(function(k){return u[k]}),D.map(function(k){return b[k]}))}))return!1;var E=Di(u[0],u[2],u[1],u[3],b[0],b[2],b[1],b[3]);if(!E.length)return!1;var C=mt(s,E,4),x=Rl(n,C,!0),S=mt(me(o,4),x,4);n.prevMatrix=x;var w=mt(c,x,4),T=ia(n,"matrix3d(".concat(w.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return $i(e,T),$(t,"onWarp",nt(t,e,R({delta:S,matrix:w,dist:x,multiply:mt,transform:T},jt({transform:T},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,$(t,"onWarpEnd",oe(t,e,{})),r):!1}},rg=q("area-pieces"),Da=q("area-piece"),Nc=q("avoid"),ng=q("view-dragging");function Co(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,a=n.height;Hs(e,Nc),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(a,"px")}}function Lc(t){return t.createElement("div",{key:"area_pieces",className:rg},t.createElement("div",{className:Da}),t.createElement("div",{className:Da}),t.createElement("div",{className:Da}),t.createElement("div",{className:Da}))}var _c={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,c=o.height,u=o.renderPoses,f=s?q("area","pass"):q("area");if(i)return[e.createElement("div",{key:"area",ref:xe(t,"areaElement"),className:f}),Lc(e)];if(!r||!a)return[];var d=Di([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),v=d.length?fa(d,!0):"none";return[e.createElement("div",{key:"area",ref:xe(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:v}}),Lc(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,c=o.renderPoses,u=o.rootMatrix,f=o.is3d,d=l.left,v=l.top,p=de(c),h=p.left,g=p.top,m=p.width,b=p.height,E=f?4:3,C=dr(u,[r-d,a-v],E),x=C[0],S=C[1];x-=h,S-=g;var w=[{left:h,top:g,width:m,height:S-10},{left:h,top:g,width:x-10,height:b},{left:h,top:g+S+10,width:m,height:b-S-10},{left:h+x+10,top:g,width:m-x-10,height:b}],T=[].slice.call(s.nextElementSibling.children);w.forEach(function(D,k){T[k].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),li(s,Nc),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Co(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Co(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Co(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Fs(function(){e.disableNativeEvent=!1})}},ag=pn("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),a=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:q("control","origin"),style:Qi(i,n,a),key:"beforeOrigin"})]}});function ig(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var og={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,a=r===void 0?t.getContainer():r,i=n.scrollOptions,s=new gl,o=fr(a,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;s.on("scroll",function(u){var f=u.container,d=u.direction,v=nt(t,e,{scrollContainer:f,direction:d}),p=c?"onScrollGroup":"onScroll";c&&(v.targets=c),$(t,p,v)}).on("move",function(u){var f=u.offsetX,d=u.offsetY,v=u.inputEvent;t[l].scrollBy(f,d,v.inputEvent,!0)}).on("scrollDrag",function(u){var f=u.next;f(t[l].getCurrentEvent())}),s.dragStart(e,R({container:o},i))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=a===void 0?t.getContainer():a,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,c=l===void 0?0:l,u=r.getScrollPosition,f=u===void 0?ig:u,d=r.scrollOptions;return n.drag(e,R({container:i,threshold:o,throttleTime:c,getScrollPosition:function(v){return f({scrollContainer:v.container,direction:v.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,R(R({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,R(R({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,R(R({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,R(R({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,R(R({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,R(R({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,R(R({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},Bc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},sg=pn("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},a=r.left,i=a===void 0?0:a,s=r.top,o=s===void 0?0:s,l=r.right,c=l===void 0?0:l,u=r.bottom,f=u===void 0?0:u,d=t.getState(),v=d.renderPoses,p=d.pos1,h=d.pos2,g=d.pos3,m=d.pos4,b=[p,h,g,m],E=[];return i>0&&E.push([0,2]),o>0&&E.push([0,1]),c>0&&E.push([1,3]),f>0&&E.push([2,3]),E.map(function(C,x){var S=C[0],w=C[1],T=b[S],D=b[w],k=v[S],P=v[w],M=Di([0,0],[100,0],[0,100],[100,100],T,D,k,P);if(M.length)return e.createElement("div",{key:"padding".concat(x),className:q("padding"),style:{transform:fa(M,!0)}})})}}),zc=["nw","ne","se","sw"];function Ta(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var lg=[1,2,5,6],cg=[0,3,4,7],vr=[1,-1,-1,1],pr=[1,1,-1,-1];function So(t,e,n,r,a,i,s,o){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],c=!1,u=t.filter(function(d){return!d.virtual}),f=u.map(function(d){var v=d.horizontal,p=d.vertical,h=d.pos;if(p&&!c&&(c=!0,l.push("/")),c){var g=Math.max(0,p===1?h[1]-i:o-h[1]);return l.push(be(g,r,e)),g}else{var g=Math.max(0,v===1?h[0]-a:s-h[0]);return l.push(be(g,n,e)),g}});return{radiusPoses:u,styles:l,raws:f}}function Ic(t){for(var e=[0,0],n=[0,0],r=t.length,a=0;a<r;++a){var i=t[a];i.sub&&(i.horizontal&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1,n[0]=a+1),i.vertical&&(n[1]===0&&(n[0]=a),n[1]=a-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Gc(t,e,n,r,a,i,s){var o,l,c,u;i===void 0&&(i=[0,0]),s===void 0&&(s=!1);var f=t.indexOf("/"),d=(f>-1?t.slice(0,f):t).length,v=t.slice(0,d),p=t.slice(d+1),h=v.length,g=p.length,m=g>0,b=v[0],E=b===void 0?"0px":b,C=v[1],x=C===void 0?E:C,S=v[2],w=S===void 0?E:S,T=v[3],D=T===void 0?x:T,k=p[0],P=k===void 0?E:k,M=p[1],O=M===void 0?m?P:x:M,A=p[2],N=A===void 0?m?P:w:A,_=p[3],z=_===void 0?m?O:D:_,B=[E,x,w,D].map(function(Y){return bt(Y,e)}),I=[P,O,N,z].map(function(Y){return bt(Y,n)}),L=B.slice(),F=I.slice();o=Ta([L[0],L[1]],e),L[0]=o[0],L[1]=o[1],l=Ta([L[3],L[2]],e),L[3]=l[0],L[2]=l[1],c=Ta([F[0],F[3]],n),F[0]=c[0],F[3]=c[1],u=Ta([F[1],F[2]],n),F[1]=u[0],F[2]=u[1];var W=s?L:L.slice(0,Math.max(i[0],h)),H=s?F:F.slice(0,Math.max(i[1],g));return J(J([],W.map(function(Y,K){var V=zc[K];return{virtual:K>=h,horizontal:vr[K],vertical:0,pos:[r+Y,a+(pr[K]===-1?n:0)],sub:!0,raw:B[K],direction:V}}),!0),H.map(function(Y,K){var V=zc[K];return{virtual:K>=g,horizontal:0,vertical:pr[K],pos:[r+(vr[K]===-1?e:0),a+Y],sub:!0,raw:I[K],direction:V}}),!0)}function ug(t,e,n,r,a){a===void 0&&(a=e.length);var i=Ic(t.slice(r)),s=i.horizontalRange,o=i.verticalRange,l=n-r,c=0;if(l===0)c=a;else if(l>0&&l<s[1])c=s[1]-l;else if(l>=o[0])c=o[0]+o[1]-l;else return;t.splice(n,c),e.splice(n,c)}function dg(t,e,n,r,a,i,s,o,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var f=Ic(t.slice(n)),d=f.horizontalRange,v=f.verticalRange;if(r>-1)for(var p=vr[r]===1?i-c:o-i,h=d[1];h<=r;++h){var g=pr[h]===1?u:l,m=0;if(r===h?m=i:h===0?m=c+p:vr[h]===-1&&(m=o-(e[n][0]-c)),t.splice(n+h,0,{horizontal:vr[h],vertical:0,pos:[m,g]}),e.splice(n+h,0,[m,g]),h===0)break}else if(a>-1){var b=pr[a]===1?s-u:l-s;if(d[1]===0&&v[1]===0){var E=[c+b,u];t.push({horizontal:vr[0],vertical:0,pos:E}),e.push(E)}for(var C=v[0],h=v[1];h<=a;++h){var m=vr[h]===1?c:o,g=0;if(a===h?g=s:h===0?g=u+b:pr[h]===1?g=e[n+C][1]:pr[h]===-1&&(g=l-(e[n+C][1]-u)),t.push({horizontal:0,vertical:pr[h],pos:[m,g]}),e.push([m,g]),h===0)break}}}function fg(t,e){e===void 0&&(e=t.map(function(a){return a.raw}));var n=t.map(function(a,i){return a.horizontal?e[i]:null}).filter(function(a){return a!=null}),r=t.map(function(a,i){return a.vertical?e[i]:null}).filter(function(a){return a!=null});return{horizontals:n,verticals:r}}var vg=[[0,-1,"n"],[1,0,"e"]],pg=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function xo(t,e,n){var r=t.props.clipRelative,a=t.state,i=a.width,s=a.height,o=e,l=o.type,c=o.poses,u=l==="rect",f=l==="circle";if(l==="polygon")return n.map(function(S){return"".concat(be(S[0],i,r)," ").concat(be(S[1],s,r))});if(u||l==="inset"){var d=n[1][1],v=n[3][0],p=n[7][0],h=n[5][1];if(u)return[d,v,h,p].map(function(S){return"".concat(S,"px")});var g=[d,i-v,s-h,p].map(function(S,w){return be(S,w%2?i:s,r)});if(n.length>8){var m=U(n[4],n[0]),b=m[0],E=m[1];g.push.apply(g,J(["round"],So(c.slice(8).map(function(S,w){return R(R({},S),{pos:n[w]})}),r,b,E,p,d,v,h).styles,!1))}return g}else if(f||l==="ellipse"){var C=n[0],x=be(Math.abs(n[1][1]-C[1]),f?Math.sqrt((i*i+s*s)/2):s,r),g=f?[x]:[be(Math.abs(n[2][0]-C[0]),i,r),x];return g.push("at",be(C[0],i,r),be(C[1],s,r)),g}}function Ma(t,e,n,r){var a=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return pg.map(function(s){var o=s[0],l=s[1],c=s[2],u=a[o+1],f=i[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:c,pos:[u,f]}})}function Fc(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var a=r.pos;e[0]=Math.min(e[0],a[0]),e[1]=Math.max(e[1],a[0]),n[0]=Math.min(n[0],a[1]),n[1]=Math.max(n[1],a[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function Kc(t,e,n,r,a){var i,s,o,l,c,u,f;if(t){var d=a;if(!d){var v=getComputedStyle(t),p=v.clipPath;d=p!=="none"?p:v.clip}if(!((!d||d==="none"||d==="auto")&&(d=r,!d))){var h=ai(d),g=h.prefix,m=g===void 0?d:g,b=h.value,E=b===void 0?"":b,C=m==="circle",x=" ";if(m==="polygon"){var S=Ge(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var w=S.map(function(it){var lt=it.split(" "),ft=lt[0],Xt=lt[1];return{vertical:1,horizontal:1,pos:[bt(ft,e),bt(Xt,n)]}}),T=Ye(w.map(function(it){return it.pos}));return{type:m,clipText:d,poses:w,splitter:x,left:T.minX,right:T.maxX,top:T.minY,bottom:T.maxY}}else if(C||m==="ellipse"){var D="",k="",P=0,M=0,S=Ie(E);if(C){var O="";i=S[0],O=i===void 0?"50%":i,s=S[2],D=s===void 0?"50%":s,o=S[3],k=o===void 0?"50%":o,P=bt(O,Math.sqrt((e*e+n*n)/2)),M=P}else{var A="",N="";l=S[0],A=l===void 0?"50%":l,c=S[1],N=c===void 0?"50%":c,u=S[3],D=u===void 0?"50%":u,f=S[4],k=f===void 0?"50%":f,P=bt(A,e),M=bt(N,n)}var _=[bt(D,e),bt(k,n)],w=J([{vertical:1,horizontal:1,pos:_,direction:"nesw"}],vg.slice(0,C?1:2).map(function(ft){return{vertical:Math.abs(ft[1]),horizontal:ft[0],direction:ft[2],sub:!0,pos:[_[0]+ft[0]*P,_[1]+ft[1]*M]}}),!0);return{type:m,clipText:d,radiusX:P,radiusY:M,left:_[0]-P,top:_[1]-M,right:_[0]+P,bottom:_[1]+M,poses:w,splitter:x}}else if(m==="inset"){var S=Ie(E||"0 0 0 0"),z=S.indexOf("round"),B=(z>-1?S.slice(0,z):S).length,I=S.slice(B+1),L=S.slice(0,B),F=L[0],W=L[1],H=W===void 0?F:W,Y=L[2],K=Y===void 0?F:Y,V=L[3],Q=V===void 0?H:V,tt=[F,K].map(function(ft){return bt(ft,n)}),et=tt[0],X=tt[1],Z=[Q,H].map(function(ft){return bt(ft,e)}),ot=Z[0],at=Z[1],At=e-at,vt=n-X,dt=Gc(I,At-ot,vt-et,ot,et),w=J(J([],Ma(et,At,vt,ot),!0),dt,!0);return{type:"inset",clipText:d,poses:w,top:et,left:ot,right:At,bottom:vt,radius:I,splitter:x}}else if(m==="rect"){var S=Ge(E||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));x=",";var gt=S.map(function(wt){var Qt=nr(wt).value;return Qt}),et=gt[0],at=gt[1],X=gt[2],ot=gt[3],w=Ma(et,at,X,ot);return{type:"rect",clipText:d,poses:w,top:et,right:at,bottom:X,left:ot,values:S,splitter:x}}}}}function hg(t,e,n,r,a){var i=t[e],s=i.direction,o=i.sub,l=t.map(function(){return[0,0]}),c=s?s.split(""):[];if(r&&e<8){var u=c.filter(function(O){return O==="w"||O==="e"}),f=c.filter(function(O){return O==="n"||O==="s"}),d=u[0],v=f[0];l[e]=n;var p=Fc(t),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var b=(e+4)%8,E=t[b].pos,C=[0,0];s.indexOf("w")>-1?C[0]=-1:s.indexOf("e")>-1&&(C[0]=1),s.indexOf("n")>-1?C[1]=-1:s.indexOf("s")>-1&&(C[1]=1);var x=tc([h,g],n,m,C,!0),S=h+x[0],w=g+x[1],T=E[1],D=E[1],k=E[0],P=E[0];C[0]===-1?k=P-S:C[0]===1?P=k+S:(k=k-S/2,P=P+S/2),C[1]===-1?T=D-w:(C[1]===1||(T=D-w/2),D=T+w);var M=Ma(T,P,D,k);t.forEach(function(O,A){l[A][0]=M[A].pos[0]-O.pos[0],l[A][1]=M[A].pos[1]-O.pos[1]})}else t.forEach(function(O,A){var N=O.direction;N&&(N.indexOf(d)>-1&&(l[A][0]=n[0]),N.indexOf(v)>-1&&(l[A][1]=n[1]))}),d&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),v&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?c.forEach(function(O){var A=O==="n"||O==="s";t.forEach(function(N,_){var z=N.direction,B=N.horizontal,I=N.vertical;!z||z.indexOf(O)===-1||(l[_]=[A||!B?0:n[0],!A||!I?0:n[1]])})}):l[e]=n;return l}function gg(t,e){var n=Pl(t,e),r=n[0],a=n[1],i=e.datas,s=i.clipPath,o=i.clipIndex,l=s,c=l.type,u=l.poses,f=l.splitter,d=u.map(function(b){return b.pos});if(c==="polygon")d.splice(o,0,[r,a]);else if(c==="inset"){var v=lg.indexOf(o),p=cg.indexOf(o),h=u.length;if(dg(u,d,8,v,p,r,a,d[4][0],d[4][1],d[0][0],d[0][1]),h===u.length)return}else return;var g=xo(t,s,d),m="".concat(c,"(").concat(g.join(f),")");$(t,"onClip",nt(t,e,R({clipEventType:"added",clipType:c,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},jt({clipPath:m},e))))}function mg(t,e){var n=e.datas,r=n.clipPath,a=n.clipIndex,i=r,s=i.type,o=i.poses,l=i.splitter,c=o.map(function(v){return v.pos}),u=c.length;if(s==="polygon")o.splice(a,1),c.splice(a,1);else if(s==="inset"){if(a<8||(ug(o,c,a,8,u),u===o.length))return}else return;var f=xo(t,r,c),d="".concat(s,"(").concat(f.join(l),")");$(t,"onClip",nt(t,e,R({clipEventType:"removed",clipType:s,poses:c,clipStyles:f,clipStyle:d,distX:0,distY:0},jt({clipPath:d},e))))}var yg={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,a=n.defaultClipPath,i=n.clipArea,s=n.zoom,o=n.groupable,l=t.getState(),c=l.target,u=l.width,f=l.height,d=l.allMatrix,v=l.is3d,p=l.left,h=l.top,g=l.pos1,m=l.pos2,b=l.pos3,E=l.pos4,C=l.clipPathState,x=l.snapBoundInfos,S=l.rotation;if(!c||o)return[];var w=Kc(c,u,f,a||"inset",C||r);if(!w)return[];var T=v?4:3,D=w.type,k=w.poses,P=k.map(function(vt){var dt=It(d,vt.pos,T);return[dt[0]-p,dt[1]-h]}),M=[],O=[],A=D==="rect",N=D==="inset",_=D==="polygon";if(A||N||_){var z=N?P.slice(0,8):P;O=z.map(function(vt,dt){var gt=dt===0?z[z.length-1]:z[dt-1],it=kt(gt,vt),lt=Yl(gt,vt);return e.createElement("div",{key:"clipLine".concat(dt),className:q("line","clip-line","snap-control"),"data-clip-index":dt,style:{width:"".concat(lt,"px"),transform:"translate(".concat(gt[0],"px, ").concat(gt[1],"px) rotate(").concat(it,"rad) scaleY(").concat(s,")")}})})}if(M=P.map(function(vt,dt){return e.createElement("div",{key:"clipControl".concat(dt),className:q("control","clip-control","snap-control"),"data-clip-index":dt,style:{transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(S,"rad) scale(").concat(s,")")}})}),N&&M.push.apply(M,P.slice(8).map(function(vt,dt){return e.createElement("div",{key:"clipRadiusControl".concat(dt),className:q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+dt,style:{transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(S,"rad) scale(").concat(s,")")}})})),D==="circle"||D==="ellipse"){var B=w.left,I=w.top,L=w.radiusX,F=w.radiusY,W=U(It(d,[B,I],T),It(d,[0,0],T)),H=W[0],Y=W[1],K="none";if(!i){for(var V=Math.max(10,L/5,F/5),Q=[],tt=0;tt<=V;++tt){var et=Math.PI*2/V*tt;Q.push([L+(L-s)*Math.cos(et),F+(F-s)*Math.sin(et)])}Q.push([L,-2]),Q.push([-2,-2]),Q.push([-2,F*2+2]),Q.push([L*2+2,F*2+2]),Q.push([L*2+2,-2]),Q.push([L,-2]),K="polygon(".concat(Q.map(function(vt){return"".concat(vt[0],"px ").concat(vt[1],"px")}).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:q("clip-ellipse","snap-control"),style:{width:"".concat(L*2,"px"),height:"".concat(F*2,"px"),clipPath:K,transform:"translate(".concat(-p+H,"px, ").concat(-h+Y,"px) ").concat(fa(d))}}))}if(i){var X=de(J([g,m,b,E],P,!0)),Z=X.width,ot=X.height,at=X.left,At=X.top;if(_||A||N){var Q=N?P.slice(0,8):P;M.push(e.createElement("div",{key:"clipArea",className:q("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat(ot,"px"),transform:"translate(".concat(at,"px, ").concat(At,"px)"),clipPath:"polygon(".concat(Q.map(function(dt){return"".concat(dt[0]-at,"px ").concat(dt[1]-At,"px")}).join(", "),")")}}))}}return x&&["vertical","horizontal"].forEach(function(vt){var dt=x[vt],gt=vt==="horizontal";dt.isSnap&&O.push.apply(O,dt.snap.posInfos.map(function(it,lt){var ft=it.pos,Xt=U(It(d,gt?[0,ft]:[ft,0],T),[p,h]),ht=U(It(d,gt?[u,ft]:[ft,f],T),[p,h]);return Cn(e,"",Xt,ht,s,"clip".concat(vt,"snap").concat(lt),"guideline")})),dt.isBound&&O.push.apply(O,dt.bounds.map(function(it,lt){var ft=it.pos,Xt=U(It(d,gt?[0,ft]:[ft,0],T),[p,h]),ht=U(It(d,gt?[u,ft]:[ft,f],T),[p,h]);return Cn(e,"",Xt,ht,s,"clip".concat(vt,"bounds").concat(lt),"guideline","bounds","bold")}))}),J(J([],M,!0),O,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,a=r===void 0?!0:r;return a?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,R(R({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,a=r.defaultClipPath,i=r.customClipPath,s=n.target,o=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",f=e.datas,d=Kc(s,o,l,a||"inset",i);if(!d)return!1;var v=d.clipText,p=d.type,h=d.poses,g=$(t,"onClipStart",nt(t,e,{clipType:p,clipStyle:v,poses:h.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=u&&u.indexOf("clip-control")>-1,f.isLine=u.indexOf("clip-line")>-1,f.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,f.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,n.clipPathState=v,cr(t,e),!0)},dragControl:function(t,e){var n,r,a=e.datas,i=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var o=a,l=o.isControl,c=o.isLine,u=o.isArea,f=o.clipIndex,d=o.clipPath;if(!d)return!1;var v=ur(t.props,"clippable"),p=v.keepRatio,h=0,g=0,m=i.draggable,b=De(e);s&&m?(n=m.prevBeforeDist,h=n[0],g=n[1]):(h=b[0],g=b[1]);var E=[h,g],C=t.state,x=C.width,S=C.height,w=!u&&!l&&!c,T=d.type,D=d.poses,k=d.splitter,P=D.map(function(Ct){return Ct.pos});w&&(h=-h,g=-g);var M=!l||D[f].direction==="nesw",O=T==="inset"||T==="rect",A=D.map(function(){return[0,0]});if(l&&!M){var N=D[f],_=N.horizontal,z=N.vertical,B=[h*Math.abs(_),g*Math.abs(z)];A=hg(D,f,B,O,p)}else M&&(A=P.map(function(){return[h,g]}));var I=P.map(function(Ct,qt){return ct(Ct,A[qt])}),L=J([],I,!0);C.snapBoundInfos=null;var F=d.type==="circle",W=d.type==="ellipse";if(F||W){var H=de(I),Y=Math.abs(H.bottom-H.top),K=Math.abs(W?H.right-H.left:Y),V=I[0][1]+Y,Q=I[0][0]-K,tt=I[0][0]+K;F&&(L.push([tt,H.bottom]),A.push([1,0])),L.push([H.left,V]),A.push([0,1]),L.push([Q,H.bottom]),A.push([1,0])}var et=bc((v.clipHorizontalGuidelines||[]).map(function(Ct){return bt("".concat(Ct),S)}),(v.clipVerticalGuidelines||[]).map(function(Ct){return bt("".concat(Ct),x)}),x,S),X=[],Z=[];if(F||W)X=[L[4][0],L[2][0]],Z=[L[1][1],L[3][1]];else if(O){var ot=[L[0],L[2],L[4],L[6]],at=[A[0],A[2],A[4],A[6]];X=ot.filter(function(Ct,qt){return at[qt][0]}).map(function(Ct){return Ct[0]}),Z=ot.filter(function(Ct,qt){return at[qt][1]}).map(function(Ct){return Ct[1]})}else X=L.filter(function(Ct,qt){return A[qt][0]}).map(function(Ct){return Ct[0]}),Z=L.filter(function(Ct,qt){return A[qt][1]}).map(function(Ct){return Ct[1]});var At=[0,0],vt=gc(et,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},X,Z,5),dt=vt.horizontal,gt=vt.vertical,it=dt.offset,lt=gt.offset;if(dt.isBound&&(At[1]+=it),gt.isBound&&(At[0]+=lt),(W||F)&&A[0][0]===0&&A[0][1]===0){var H=de(I),ft=H.bottom-H.top,Xt=W?H.right-H.left:ft,ht=gt.isBound?Math.abs(lt):gt.snapIndex===0?-lt:lt,yt=dt.isBound?Math.abs(it):dt.snapIndex===0?-it:it;Xt-=ht,ft-=yt,F&&(ft=oc(gt,dt)>0?ft:Xt,Xt=ft);var wt=L[0];L[1][1]=wt[1]-ft,L[2][0]=wt[0]+Xt,L[3][1]=wt[1]+ft,L[4][0]=wt[0]-Xt}else if(O&&p&&l){var Qt=Fc(D),re=Qt[0],Pe=Qt[1],Er=re&&Pe?re/Pe:0,Cr=D[f],Re=Cr.direction||"",Ha=L[1][1],V=L[5][1],Q=L[7][0],tt=L[3][0];it<=lt?it=lt/Er:lt=it*Er,Re.indexOf("w")>-1?Q-=lt:Re.indexOf("e")>-1?tt-=lt:(Q+=lt/2,tt-=lt/2),Re.indexOf("n")>-1?Ha-=it:Re.indexOf("s")>-1?V-=it:(Ha+=it/2,V-=it/2);var Sy=Ma(Ha,tt,V,Q);L.forEach(function(Rd,Ty){var ss;ss=Sy[Ty].pos,Rd[0]=ss[0],Rd[1]=ss[1]})}else L.forEach(function(Ct,qt){var Pd=A[qt];Pd[0]&&(Ct[0]-=lt),Pd[1]&&(Ct[1]-=it)});var kd=xo(t,d,I),is="".concat(T,"(").concat(kd.join(k),")");if(C.clipPathState=is,F||W)X=[L[4][0],L[2][0]],Z=[L[1][1],L[3][1]];else if(O){var ot=[L[0],L[2],L[4],L[6]];X=ot.map(function(qt){return qt[0]}),Z=ot.map(function(qt){return qt[1]})}else X=L.map(function(Ct){return Ct[0]}),Z=L.map(function(Ct){return Ct[1]});if(C.snapBoundInfos=gc(et,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},X,Z,1),m){var xy=C.is3d,wy=C.allMatrix,Dy=xy?4:3,os=At;s&&(os=[E[0]+At[0]-b[0],E[1]+At[1]-b[1]]),m.deltaOffset=mt(wy,[os[0],os[1],0,0],Dy)}return $(t,"onClip",nt(t,e,R({clipEventType:"changed",clipType:T,poses:I,clipStyle:is,clipStyles:kd,distX:h,distY:g},jt((r={},r[T==="rect"?"clip":"clipPath"]=is,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,a=e.isDouble,i=r.isLine,s=r.isClipStart,o=r.isControl;return s?($(t,"onClipEnd",oe(t,e,{})),a&&(o?mg(t,e):i&&gg(t,e)),a||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},bg={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Nt(e.inputEvent.target,q("origin"))},dragControlStart:function(t,e){var n=e.datas;cr(t,e);var r=nt(t,e,{dragStart:Ut.dragStart(t,new Rr().dragStart([0,0],e))}),a=$(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,a===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,a=e.isRequest;if(!n.isDragOrigin)return!1;var i=De(e),s=i[0],o=i[1],l=t.state,c=l.width,u=l.height,f=l.offsetMatrix,d=l.targetMatrix,v=l.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=v?4:3,m=[s,o];if(a){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var E=ct(n.startOrigin,m),C=ct(n.startTargetOrigin,m),x=U(m,n.prevOrigin),S=gn(f,d,E,g),w=t.getRect(),T=de(Xe(S,c,u,g)),D=[w.left-T.left,w.top-T.top];n.prevOrigin=m;var k=[be(C[0],c,h),be(C[1],u,h)].join(" "),P=Ut.drag(t,hn(e,t.state,D,!!r,!1)),M=nt(t,e,R(R({width:c,height:u,origin:E,dist:m,delta:x,transformOrigin:k,drag:P},jt({transformOrigin:k,transform:P.transform},e)),{afterTransform:P.transform}));return $(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?($(t,"onDragOriginEnd",oe(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,a=0,i=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-i[0],s[1]=o.origin[1]-i[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?a=o.y-n.top:"deltaY"in o&&(a+=o.deltaY)),{datas:e,distX:r,distY:a,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Eg(t,e,n,r){var a=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,i=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,s=-1;if(e===0&&(a===0?s=0:a===1&&(s=1)),e===2&&(a<=2?s=2:a<=3&&(s=3)),e===3&&(i===0?s=4:i<4&&(s=7)),e===1&&(i<=1?s=5:i<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Cg(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Cg(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Sg(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function Wc(t,e,n,r,a){r===void 0&&(r=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=Ie(t),Gc(i,e,n,0,0,r,a)}function Yc(t,e,n,r,a){var i=t.state,s=i.width,o=i.height,l=So(a,t.props.roundRelative,s,o),c=l.raws,u=l.styles,f=l.radiusPoses,d=fg(f,c),v=d.horizontals,p=d.verticals,h=u.join(" ");i.borderRadiusState=h;var g=nt(t,e,R({horizontals:v,verticals:p,borderRadius:h,width:s,height:o,delta:r,dist:n},jt({borderRadius:h},e)));return $(t,"onRound",g),g}function Xc(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var xg={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,a=n.width,i=n.height,s=n.allMatrix,o=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,f=t.props,d=f.minRoundControls,v=d===void 0?[0,0]:d,p=f.maxRoundControls,h=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,b=m===void 0?0:m,E=f.isDisplayShadowRoundControls,C=f.groupable;if(!r)return null;var x=u||Xc(t),S=o?4:3,w=Wc(x,a,i,v,!0);if(!w)return null;var T=0,D=0,k=C?[0,0]:[l,c];return w.map(function(P,M){var O=P.horizontal,A=P.vertical,N=P.direction||"",_=J([],P.pos,!0);D+=Math.abs(O),T+=Math.abs(A),O&&N.indexOf("n")>-1&&(_[1]-=b),A&&N.indexOf("w")>-1&&(_[0]-=b),O&&N.indexOf("s")>-1&&(_[1]+=b),A&&N.indexOf("e")>-1&&(_[0]+=b);var z=U(It(s,_,S),k),B=P.vertical?T<=h[1]&&(E||!P.virtual):D<=h[0]&&(E||!P.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(M),className:q("control","border-radius",P.vertical?"vertical":"",P.virtual?"virtual":""),"data-radius-index":M,style:{display:B?"block":"none",transform:"translate(".concat(z[0],"px, ").concat(z[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,a=n.target,i=a.getAttribute("class")||"",s=i.indexOf("border-radius")>-1,o=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=s?parseInt(a.getAttribute("data-radius-index"),10):-1,c=-1;if(o){var u=a.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!o)return!1;var f=nt(t,e,{}),d=$(t,"onRoundStart",f);if(d===!1)return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=o,cr(t,e);var v=t.props,p=v.roundRelative,h=v.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,b=m.width,E=m.height;r.isRound=!0,r.prevDist=[0,0];var C=Xc(t),x=Wc(C||"",b,E,g,!0)||[];return r.controlPoses=x,m.borderRadiusState=So(x,p,b,E).styles.join(" "),f},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var a=n.controlIndex,i=De(e),s=i[0],o=i[1],l=[s,o],c=U(l,n.prevDist),u=t.props.maxRoundControls,f=u===void 0?[4,4]:u,d=t.state,v=d.width,p=d.height,h=r[a],g=h.vertical,m=h.horizontal,b=r.map(function(C){var x=C.horizontal,S=C.vertical,w=[x*m*l[0],S*g*l[1]];if(x){if(f[0]===1)return w;if(f[0]<4&&x!==m)return w}else{if(f[1]===0)return w[1]=S*m*l[0]/v*p,w;if(g){if(f[1]===1)return w;if(f[1]<4&&S!==g)return w}}return[0,0]});b[a]=l;var E=r.map(function(C,x){return R(R({},C),{pos:ct(C.pos,b[x])})});return a<4?E.slice(0,a+1).forEach(function(C){C.virtual=!1}):E.slice(4,a+1).forEach(function(C){C.virtual=!1}),n.prevDist=[s,o],Yc(t,e,l,c,E)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,a=e.isDouble;if(!r.isRound)return!1;var i=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter(function(m){var b=m.virtual;return b}).length,f=t.props.roundClickable,d=f===void 0?!0:f;if(a&&d){if(i&&(d===!0||d==="control"))Sg(c,s);else if(o&&(d===!0||d==="line")){var v=Pl(t,e),p=v[0],h=v[1];Eg(c,l,p,h)}u!==c.filter(function(m){var b=m.virtual;return b}).length&&Yc(t,e,[0,0],[0,0],c)}var g=oe(t,e,{});return $(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=Ee(t,"roundable",e),s=R({targets:t.props.targets,events:i.map(function(o,l){return R(R({},o),{target:a[l],moveable:r[l],currentTarget:r[l]})})},n);return $(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=Ee(t,"roundable",e),s=R({targets:t.props.targets,events:i.map(function(o,l){return R(R(R({},o),{target:a[l],moveable:r[l],currentTarget:r[l]}),jt({borderRadius:n.borderRadius},o))})},n);return $(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,a=Ee(t,"roundable",e);pa(t,"onRound",function(o){var l=R({targets:t.props.targets,events:a.map(function(c,u){return R(R(R({},c),{target:r[u],moveable:n[u],currentTarget:n[u]}),jt({borderRadius:o.borderRadius},c))})},o);$(t,"onRoundGroup",l)});var i=this.dragControlEnd(t,e);if(!i)return!1;var s=R({targets:t.props.targets,events:a.map(function(o,l){var c;return R(R({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(c=o.datas)===null||c===void 0?void 0:c.lastEvent})})},i);return $(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function wg(t,e){var n=e?4:3,r=Dt(n),a="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var Hc={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,a=n.target,i=n.targetMatrix,s=a?.style.transform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(fl(i,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=wg(l,r)?[]:Ie(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return nt(t,e,{setTransform:function(n){e.datas.startTransforms=Mt(n)?n:Ie(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return nt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),$(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),$(t,"onBeforeRender",nt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){$(t,"onBeforeRenderEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Ee(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});$(t,"onBeforeRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Ee(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.resetStyle(s),n.fillDragParams(l,s)});$(t,"onBeforeRenderGroup",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),$(t,"onBeforeRenderGroupEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Vc={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){$(t,"onRenderStart",nt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){$(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){$(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){$(t,"onRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Ee(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragParams(l,s)});$(t,"onRenderGroup",nt(t,e,R(R({isPinch:!!e.isPinch,targets:t.props.targets,transform:la(e)},jt(ca(e))),{events:i})))},dragGroupEnd:function(t,e){var n=this,r=Ee(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragEndParams(l,s)});$(t,"onRenderGroupEnd",nt(t,e,R({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:la(e)},jt(ca(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return nt(t,e,R({isPinch:!!e.isPinch,transform:la(e)},jt(ca(e))))},fillDragEndParams:function(t,e){return nt(t,e,R({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:la(e)},jt(ca(e))))}};function Sn(t,e,n,r,a,i,s){var o=a==="Start",l=t.state.target,c=i.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!c&&t.areaElement===i.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(a),f="".concat(n).concat(r,"Condition"),d=a==="End",v=a==="After",p=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!c&&ql(t.state,i);var h=J([],t[e],!0);if(c){var g=i.requestAble;h.some(function(M){return M.name===g})||h.push.apply(h,t.props.ables.filter(function(M){return M.name===g}))}if(!h.length||h.every(function(M){return M.dragRelation}))return!1;var m=J(J([Hc],h,!0),[Vc],!1).filter(function(M){return M[u]}),b=i.datas;p&&m.forEach(function(M){M.unset&&M.unset(t)});var E=i.inputEvent,C;d&&E&&(C=document.elementFromPoint(i.clientX,i.clientY)||E.target);var x=0,S=!1,w=function(){var M;S=!0,(M=i.stop)===null||M===void 0||M.call(i)},T=m.filter(function(M){var O=M.name,A=b[O]||(b[O]={});if(o&&(A.isEventStart=!M[f]||M[f](t,i)),A.isEventStart){var N=M[u](t,R(R({},i),{stop:w,resultCount:x,datas:A,originalDatas:b,inputTarget:C}));return t._emitter.off(),o&&N===!1&&(A.isEventStart=!1),x+=N||A.isEventStart?1:0,N}return!1}),D=T.length,k=!1;if(S&&(k=!0),!k&&o&&m.length&&!D&&(k=m.filter(function(M){var O=M.name,A=b[O];return A.isEventStart?M.dragRelation!=="strong":!1}).length),(d||k)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(M){M.state.gestos={}}),m.forEach(function(M){M.unset&&M.unset(t)})),o&&!k&&!c&&D&&i?.preventDefault(),t.isUnmounted||k)return!1;if(!o&&D&&!s||d){var P=t.props.flushSync||Gl;P(function(){t.updateRect(d?a:"",!0,!1),t.forceUpdate()})}return!o&&!d&&!v&&D&&!s&&Sn(t,e,n,r,a+"After",i),!0}function wo(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,a=t.areaElement;return n&&(r===n||n.contains(r))||r===a||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||Nt(r,"moveable-area")||Nt(r,"moveable-padding")||Nt(r,"moveable-edgeDraggable")}}function Zc(t,e,n){var r=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(r),(!t.props.dragArea||i)&&a.push(e),Do(t,a,"targetAbles",n,{dragStart:wo(t),pinchStart:wo(t)})}function Do(t,e,n,r,a){a===void 0&&(a={});var i=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,u=s.preventClickDefault,f=s.checkInput,d={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:i?c:!1,preventClickEventOnDragStart:i?u:!1,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:i?f:!1},v=new El(e,d),p=r==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){v.on("".concat(h).concat(g),function(m){var b,E=m.eventType;if(a[E]&&!a[E](m)){m.stop();return}var C=Sn(t,n,h,r,g,m);C?(t.props.stopPropagation||g==="Start"&&p)&&((b=m?.inputEvent)===null||b===void 0||b.stopPropagation()):m.stop()})})}),v}var Dg=function(){function t(n,r,a){var i=this;this.target=n,this.moveable=r,this.eventName=a,this.ables=[],this._onEvent=function(s){var o=i.eventName,l=i.moveable;l.state.disableNativeEvent||i.ables.forEach(function(c){c[o](l,{inputEvent:s})})},n.addEventListener(a.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Tg(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function $c(t,e,n){for(var r=t,a=[],i=document.documentElement||document.body,s=!n&&t===e||t===i,o=s,l=!1,c=3,u,f,d,v=!1,p=mn(e,e,!0).offsetParent,h=1;r&&!o;){o=s;var g=getComputedStyle(r),m=g.position,b=Fl(r,g),E=Iv(Wp(b)),C=m==="fixed",x={hasTransform:!1,fixedContainer:null};C&&(v=!0,x=Vp(r),p=x.fixedContainer);var S=E.length;!l&&S===16&&(l=!0,c=4,ji(a),d&&(d=we(d,3,4))),l&&S===9&&(E=we(E,3,4));var w=Hp(r,t,g),T=w.tagName,D=w.hasOffset,k=w.isSVG,P=w.origin,M=w.targetOrigin,O=w.offset,A=O[0],N=O[1];T==="svg"&&d&&(a.push({type:"target",target:r,matrix:Zp(r,c)}),a.push({type:"offset",target:r,matrix:Dt(c)}));var _=void 0,z=!1,B=!1,I=parseFloat(g.zoom)||1;if(C)_=x.fixedContainer,z=!0;else{var L=mn(r,e,!1,!0,g),F=L.offsetZoom;if(_=L.offsetParent,z=L.isEnd,B=L.isStatic,h*=F,F!==1&&B)A-=_.offsetLeft,N-=_.offsetTop;else if(xp){var W=L.parentSlotElement;if(W){for(var H=_,Y=0,K=0;H&&Tg(H);)Y+=H.offsetLeft,K+=H.offsetTop,H=H.offsetParent;A-=Y,N-=K}}}wl&&!wp&&D&&!k&&B&&(m==="relative"||m==="static")&&(A-=_.offsetLeft,N-=_.offsetTop,s=s||z);var V=0,Q=0,tt=0,et=0;if(C)D&&x.hasTransform&&(tt=_.clientLeft,et=_.clientTop);else if(D&&p!==_&&(V=_.clientLeft,Q=_.clientTop),D&&_===i){var X=Kl(r,!1,g);A+=X[0],N+=X[1]}if(a.push({type:"target",target:r,matrix:ua(E,c,P)}),D){var Z=r===t,ot=Z?0:r.scrollLeft,at=Z?0:r.scrollTop;a.push({type:"offset",target:r,matrix:ln([A-ot+V-tt,N-at+Q-et],c)})}else a.push({type:"offset",target:r,origin:P});if(I!==1&&a.push({type:"zoom",target:r,matrix:ua(wi([I,I],c),c,[0,0])}),d||(d=E),u||(u=P),f||(f=M),o||C)break;r=_,s=z,(!n||r===i)&&(o=s)}return d||(d=Dt(c)),u||(u=[0,0]),f||(f=[0,0]),{zoom:h,offsetContainer:p,matrixes:a,targetMatrix:d,transformOrigin:u,targetOrigin:f,is3d:l,hasFixed:v}}function Mg(t,e,n,r){var a;n===void 0&&(n=e);var i=$c(t,e),s=i.matrixes,o=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,f=i.offsetContainer,d=i.hasFixed,v=i.zoom,p=$c(f,n,!0),h=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,E=r||g||o,C=E?4:3,x=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,S=l,w=Dt(C),T=Dt(C),D=Dt(C),k=Dt(C),P=s.length;h.reverse(),s.reverse(),!o&&E&&(S=we(S,3,4),ji(s)),!g&&E&&ji(h),h.forEach(function(B){T=mt(T,B.matrix,C)});var M=n||document.body,O=((a=h[0])===null||a===void 0?void 0:a.target)||mn(M,M,!0).offsetParent,A=h.slice(1).reduce(function(B,I){return mt(B,I.matrix,C)},Dt(C));s.forEach(function(B,I){if(P-2===I&&(D=w.slice()),P-1===I&&(k=w.slice()),!B.matrix){var L=s[I+1],F=jp(B,L,O,C,mt(A,w,C));B.matrix=ln(F,C)}w=mt(w,B.matrix,C)});var N=!x&&o;S||(S=Dt(N?4:3));var _=fa(x&&S.length===16?we(S,4,3):S,N),z=T;return T=ul(T,C,C),{hasZoom:v!==1||b!==1,hasFixed:d,rootMatrix:T,originalRootMatrix:z,beforeMatrix:D,offsetMatrix:k,allMatrix:w,targetMatrix:S,targetTransform:_,transformOrigin:c,targetOrigin:u,is3d:E,offsetContainer:f,offsetRootContainer:m}}function jc(t,e,n,r){n===void 0&&(n=e);var a=0,i=0,s=0,o={},l=Xl(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var c=Mg(t,e,n,r),u=Ar(c.allMatrix,c.transformOrigin,a,i);o=R(R({},c),u);var f=Ar(c.allMatrix,[50,50],100,100);s=Hl([f.pos1,f.pos2],f.direction)}var d=r?4:3;return R(R(R({hasZoom:!1,width:a,height:i,rotation:s},l),{originalRootMatrix:Dt(d),rootMatrix:Dt(d),beforeMatrix:Dt(d),offsetMatrix:Dt(d),allMatrix:Dt(d),targetMatrix:Dt(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function cb(t,e,n){return n===void 0&&(n=e),jc(t,e,n,!0)}function To(t,e,n,r,a,i){i===void 0&&(i=[]);var s=1,o=[0,0],l=va(),c=va(),u=va(),f=va(),d=[0,0],v={},p=jc(e,n,a,!0);if(e){var h=getComputedStyle(e);i.forEach(function(M){v[M]=h[M]});var g=p.is3d?4:3,m=Ar(p.offsetMatrix,ct(p.transformOrigin,dl(p.targetMatrix,g)),p.width,p.height);s=m.direction,o=ct(m.origin,[m.left-p.left,m.top-p.top]),f=bn(p.offsetRootContainer);var b=mn(r,r,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var E=Ar(mt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),C=Ar(p.originalRootMatrix,da(getComputedStyle(b)).map(function(M){return parseFloat(M)}),b.offsetWidth,b.offsetHeight);if(l=qi(E,f),u=qi(C,f,b,!0),t){var x=E.left,S=E.top;c=qi({left:x,top:S,bottom:S,right:S},f)}}else{l=bn(e),u=bn(b,!0),t&&(c=bn(t));var w=u.left,T=u.top,D=u.clientLeft,k=u.clientTop,P=[l.left-w,l.top-T];d=U(dr(p.rootMatrix,P,4),[D+p.left,k+p.top])}}return R({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:d},p)}function Uc(t){var e=t.pos1,n=t.pos2,r=t.pos3,a=t.pos4;if(!e||!n||!r||!a)return null;var i=Ye([e,n,r,a]),s=[i.minX,i.minY],o=U(t.origin,s);return e=U(e,s),n=U(n,s),r=U(r,s),a=U(a,s),R(R({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:a,origin:o,beforeOrigin:o,isPersisted:!0})}var Br=function(t){Pr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=R({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},To(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new fn,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var a=r.props.parentMoveable;if(a){a.checkUpdateRect();return}sv(r._observerId),r._observerId=Fs(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,a=this.getState(),i=r.parentPosition,s=r.className,o=r.target,l=r.zoom,c=r.cspNonce,u=r.translateZ,f=r.cssStyled,d=r.portalContainer,v=r.groupable,p=r.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],g=h[0],m=h[1],b=a.left,E=a.top,C=a.target,x=a.direction,S=a.hasFixed,w=a.offsetDelta,T=r.targets,D=this.isDragging(),k={};this.getEnabledAbles().forEach(function(_){k["data-able-".concat(_.name.toLowerCase())]=!0});var P=this._getAbleClassName(),M=T&&T.length&&(C||v)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,A=[b-g,E-m];!v&&r.useAccuratePosition&&(A[0]+=w[0],A[1]+=w[1]);var N={position:S?"fixed":"absolute",display:M?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(A[0],"px, ").concat(A[1],"px, ").concat(u,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return p&&(N["--moveable-line-padding"]=p),ue(f,R({cspNonce:c,ref:xe(this,"controlBox"),className:"".concat(q("control-box",x===-1?"reverse":"",D?"dragging":"")," ").concat(P," ").concat(s)},k,{onClick:this._onPreventClick,portalContainer:d,style:N}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,a=r.parentMoveable,i=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),Nr(this,"targetGesto"),Nr(this,"controlGesto");var a=this.events;for(var i in a){var s=a[i];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var a=this.props.ables||[];return Ae(a,function(i){return i.name===r})},n.getContainer=function(){var r=this.props,a=r.parentMoveable,i=r.wrapperMoveable,s=r.container;return s||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var a;return r&&(((a=r.getAttribute)===null||a===void 0?void 0:a.call(r,"class"))||"").indexOf(Wi)>-1},n.dragStart=function(r){var a=this.targetGesto,i=this.controlGesto;return a&&wo(this)({inputEvent:r})?a.isFlag()||a.triggerDragStart(r):i&&this.isMoveableElement(r.target)&&(i.isFlag()||i.triggerDragStart(r)),this},n.hitTest=function(r){var a=this.state,i=a.target,s=a.pos1,o=a.pos2,l=a.pos3,c=a.pos4,u=a.targetClientRect;if(!i)return 0;var f;if(r instanceof Element){var d=r.getBoundingClientRect();f={left:d.left,top:d.top,width:d.width,height:d.height}}else f=R({width:0,height:0},r);var v=f.left,p=f.top,h=f.width,g=f.height,m=ki([s,o,c,l],u),b=qv(m,[[v,p],[v+h,p],[v+h,p+g],[v,p+g]]),E=dn(m);return!b||!E?0:Math.min(100,b/E*100)},n.isInside=function(r,a){var i=this.state,s=i.target,o=i.pos1,l=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return s?Qn([r,a],ki([o,l,u,c],f)):!1},n.updateRect=function(r,a,i){i===void 0&&(i=!0);var s=this.props,o=s.parentMoveable,l=this.state,c=l.target||this.props.target,u=this.getContainer(),f=o?o._rootContainer:this._rootContainer,d=To(this.controlBox&&this.controlBox.getElement(),c,u,u,f||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&s.persistData){var v=Uc(s.persistData);for(var p in v)d[p]=v[p]}this.updateState(d,o?!1:i)},n.isDragging=function(r){var a,i,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,a=ee(this.state),i=a[0],s=a[1],o=a[2],l=a[3],c=de(a),u=r.width,f=r.height,d=c.width,v=c.height,p=c.left,h=c.top,g=[r.left,r.top],m=ct(g,r.origin),b=ct(g,r.beforeOrigin),E=r.transformOrigin;return{width:d,height:v,left:p,top:h,pos1:i,pos2:s,pos3:o,pos4:l,offsetWidth:u,offsetHeight:f,beforeOrigin:b,origin:m,transformOrigin:E,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var a,i;(!r||r==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!r||r==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},n.getRotation=function(){var r=this.state,a=r.pos1,i=r.pos2,s=r.direction;return nh(a,i,s)},n.request=function(r,a,i){a===void 0&&(a={});var s=this.props,o=s.ables,l=s.groupable,c=o.filter(function(g){return g.name===r})[0];if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var u=this,f=c.request(this),d=i||a.isInstant,v=f.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(f.isControl?"Control":""),h={request:function(g){return Sn(u,v,"drag",p,"",R(R({},f.request(g)),{requestAble:r,isRequest:!0}),d),this},requestEnd:function(){return Sn(u,v,"drag",p,"End",R(R({},f.requestEnd()),{requestAble:r,isRequest:!0}),d),this}};return Sn(u,v,"drag",p,"Start",R(R({},f.requestStart(a)),{requestAble:r,isRequest:!0}),d),d?h.request(a).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),a=this.props,i=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,f=r.pos3,d=r.pos4,v=r.left,p=r.top,h=r.isPersisted,g=a.padding||{},m=g.left,b=m===void 0?0:m,E=g.top,C=E===void 0?0:E,x=g.bottom,S=x===void 0?0:x,w=g.right,T=w===void 0?0:w,D=l?4:3,k=[];h?k=s:this.controlBox&&a.groupable?k=i:k=ct(i,[v,p]),r.renderPoses=[ct(c,ga(o,[-b,-C],s,k,D)),ct(u,ga(o,[T,-C],s,k,D)),ct(f,ga(o,[-b,S],s,k,D)),ct(d,ga(o,[T,S],s,k,D))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,a=r.target,i=r.container,s=r.parentMoveable,o=this.state,l=o.target,c=o.container;if(!(!l&&!a)){this.updateAbles();var u=!to(l,a),f=u||!to(c,i);if(f){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:a,container:i}),!s&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,a){this._emitter.trigger(r,a);var i=this.props[r];return i&&i(a)},n.useCSS=function(r,a){var i=this.props.customStyledMap,s=r+a;return i[s]||(i[s]=xl(r,a)),i[s]},n.getState=function(){var r,a=this.props;(a.target||!((r=a.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=a.persistData,o=a.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var l=Uc(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(r)})},n.updateAbles=function(r,a){r===void 0&&(r=this.props.ables),a===void 0&&(a="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(a,"Start"),c="pinch".concat(a,"Start"),u="drag".concat(a,"ControlStart"),f=ha(o,[l,c],s),d=ha(o,[u],s);this.enabledAbles=o,this.targetAbles=f,this.controlAbles=d},n.updateState=function(r,a){if(a){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var s in r)i[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var a=this.props;return r.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},n.renderAbles=function(){var r=this,a=this.props,i=a.triggerAblesSimultaneously,s={createElement:ue};return this.renderState={},Jp(Ql(ha(this.getEnabledAbles(),["render"],i).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(a,i){var s,o,l=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return J(J([],a,!0),l,!0)},[]);return r},n._updateObserver=function(r){var a,i=this.props,s=i.target;if(!window.ResizeObserver||!s||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!a&&this.targetGesto||this._isTargetChanged(!0);l&&(Nr(this,"targetGesto"),this.updateState({gesto:null})),i||Nr(this,"controlGesto"),o&&a&&!this.targetGesto&&(this.targetGesto=Zc(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=Do(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,a=r,i=a.zoom,s=a.hideDefaultLines,o=a.hideChildMoveableDefaultLines,l=a.parentMoveable;if(s||l&&o)return[];var c=this.getState().renderPoses,u={createElement:ue};return[[0,1],[1,3],[3,2],[2,0]].map(function(f,d){var v=f[0],p=f[1];return Cn(u,"",c[v],c[p],i,"render-line-".concat(d))})},n._isTargetChanged=function(r){var a=this.props,i=a.dragTarget||a.target,s=this._prevTarget,o=this._prevDragArea,l=a.dragArea,c=!l&&s!==i,u=(r||l)&&o!==l;return c||u},n._updateNativeEvents=function(){var r=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,s=this.events,o=Fe(s);if(this._isTargetChanged())for(var l in s){var c=s[l];c&&c.destroy(),s[l]=null}if(i){var u=this.enabledAbles;o.forEach(function(f){var d=ha(u,[f]),v=d.length>0,p=s[f];if(!v){p&&(p.destroy(),s[f]=null);return}p||(p=new Dg(i,r,f),s[f]=p),p.setAbles(d)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=fr(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=fr(r,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(J(J([],this._getAbleViewClassNames(),!0),[this.isDragging()?ng:""],!1))},n._changeAbleViewClassNames=function(r){var a=this._viewContainer,i=Ul(r.filter(Boolean),function(u){return u}).map(function(u){var f=u[0];return f}),s=this._viewClassNames,o=Jr(s,i),l=o.removed,c=o.added;l.forEach(function(u){Hs(a,s[u])}),c.forEach(function(u){li(a,i[u])}),this._viewClassNames=i},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var a=this;r===void 0&&(r="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},c=o?.isFlag()?o.getEventData():{};return i.map(function(u){var f,d,v,p=u.name,h=((f=u.className)===null||f===void 0?void 0:f.call(u,a))||"";return(!((d=l[p])===null||d===void 0)&&d.isEventStart||!((v=c[p])===null||v===void 0)&&v.isEventStart)&&(h+=" ".concat(q("".concat(p).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Gl,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(hi),Mo={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,a=r.targets||[];t.moveables=[];var i=t.getState(),s=i.left,o=i.top,l=i.isPersisted,c=[s,o],u=r.zoom||1,f=t.renderGroupRects,d=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?a=d.map(function(){return null}):d=[],J(J([],a.map(function(v,p){return e.createElement(Br,{key:"moveable"+p,ref:As(t,"moveables",p),target:v,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:c,persistData:d[p],zoom:u})}),!0),Ql(f.map(function(v,p){var h=v.pos1,g=v.pos2,m=v.pos3,b=v.pos4,E=[h,g,m,b];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,x){var S=C[0],w=C[1];return Cn(e,"",U(E[S],c),U(E[w],c),u,"group-rect-".concat(p,"-").concat(x))})})),!0)}},kg=pn("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,a=e.inputTarget,i=t.isMoveableElement(a),s=!i&&t.controlBox.getElement().contains(a);if(!(!r||!a||e.isDrag||t.isMoveableElement(a)||s)){var o=n.contains(a);$(t,"onClick",nt(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:n===a,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var a=t.props.targets,i=a.indexOf(r),s=i>-1,o=!1;i===-1&&(i=Oe(a,function(l){return l.contains(r)}),o=i>-1),$(t,"onClickGroup",nt(t,e,{isDouble:e.isDouble,targets:a,inputTarget:r,targetIndex:i,isTarget:s,containsTarget:o,moveableTarget:a[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function zr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),R(R({},t),{datas:e})}var Pg=pn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Tc(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Nt(a,q("direction"))&&Nt(a,q("edge"))&&Nt(a,q("edgeDraggable"))},dragStart:function(t,e){return Ut.dragStart(t,zr(e))},drag:function(t,e){return Ut.drag(t,zr(e))},dragEnd:function(t,e){return Ut.dragEnd(t,zr(e))},dragGroupCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Nt(a,q("direction"))&&Nt(a,q("line"))},dragGroupStart:function(t,e){return Ut.dragGroupStart(t,zr(e))},dragGroup:function(t,e){return Ut.dragGroup(t,zr(e))},dragGroupEnd:function(t,e){return Ut.dragGroupEnd(t,zr(e))},unset:function(t){return Ut.unset(t)}}),Qc={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ko=[Hc,Bc,Zh,oh,Ut,Pg,go,Jh,eg,qh,og,sg,ag,bg,yg,xg,Mo,Qc,kg,_c,Vc],Rg=ko.reduce(function(t,e){return R(R({},t),"events"in e?e.events:{})},{}),Og=ko.reduce(function(t,e){return R(R({},t),e.props)},{}),Ag=th(Rg),Ng=Object.keys(Ag),Lg=Object.keys(Og);function qc(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/Math.sqrt(n*n+r*r)}function ka(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function Jc(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.max(r[e],a[e],i[e],s[e])}))}function tu(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.min(r[e],a[e],i[e],s[e])}))}function _g(t,e){var n,r=[0,0],a=[0,0],i=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:a,pos3:i,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var c=rt(e,$t);if(c%90){var u=c/180*Math.PI,f=Math.tan(u),d=-1/f,v=[Xi,Tl],p=[[0,0],[0,0]],h=[Xi,Tl],g=[[0,0],[0,0]];t.forEach(function(I){I.forEach(function(L){var F=qc([-f,1,0],L),W=qc([-d,1,0],L);v[0]>F&&(p[0]=L,v[0]=F),v[1]<F&&(p[1]=L,v[1]=F),h[0]>W&&(g[0]=L,h[0]=W),h[1]<W&&(g[1]=L,h[1]=W)})});var m=p[0],b=p[1],E=g[0],C=g[1],x=[-f,1,ka([-f,1],m)],S=[-f,1,ka([-f,1],b)],w=[-d,1,ka([-d,1],E)],T=[-d,1,ka([-d,1],C)];n=[[x,w],[x,T],[S,w],[S,T]].map(function(I){var L=I[0],F=I[1];return qn(L,F)[0]}),r=n[0],a=n[1],i=n[2],s=n[3],o=h[1]-h[0],l=v[1]-v[0]}else{var D=tu(t,0),k=tu(t,1),P=Jc(t,0),M=Jc(t,1);if(r=[D,k],a=[P,k],i=[D,M],s=[P,M],o=P-D,l=M-k,c%180){var O=[i,r,s,a];r=O[0],a=O[1],i=O[2],s=O[3],o=M-k,l=P-D}}if(c%360>180){var O=[s,i,a,r];r=O[0],a=O[1],i=O[2],s=O[3]}var A=Ye([r,a,i,s]),N=A.minX,_=A.minY,z=A.maxX,B=A.maxY;return{pos1:r,pos2:a,pos3:i,pos4:s,width:o,height:l,minX:N,minY:_,maxX:z,maxY:B,rotation:e}}function eu(t,e){var n=e.map(function(r){if(Mt(r)){var a=eu(t,r),i=a.length;return i>1?a:i===1?a[0]:null}else{var s=Ae(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&Mt(n[0])?n[0]:n}var Bg=function(t){Pr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new pl,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(tt){tt.updateRect(r,!1,!1)});var l=this.props,c=this.moveables,u=o.target||l.target,f=c.map(function(tt){return{finded:!1,manager:tt}}),d=this.props.targetGroups||[],v=eu(f,d);v.push.apply(v,f.filter(function(tt){var et=tt.finded;return!et}).map(function(tt){var et=tt.manager;return et}));var p=[],h=!a||r!==""&&l.updateGroup,g=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function b(tt,et,X){var Z=tt.map(function(it){if(Mt(it)){var lt=b(it,et),ft=[lt.pos1,lt.pos2,lt.pos3,lt.pos4];return p.push(lt),{poses:ft,rotation:lt.rotation}}else return{poses:ee(it.state),rotation:it.getRotation()}}),ot=Z.map(function(it){var lt=it.rotation;return lt}),at=0,At=ot[0],vt=ot.every(function(it){return Math.abs(At-it)<.1});h?at=vt?At:g:at=!X&&vt?At:et;var dt=Z.map(function(it){var lt=it.poses;return lt}),gt=_g(dt,at);return gt}var E=b(v,this.rotation,!0);h&&(this.rotation=E.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=p;var C=this.transformOrigin,x=this.rotation,S=this.scale,w=E.width,T=E.height,D=E.minX,k=E.minY,P=ih([[0,0],[w,0],[0,T],[w,T]],ah(C,w,T),this.rotation/180*Math.PI),M=Ye(P.result),O=M.minX,A=M.minY,N=" rotate(".concat(x,"deg)")+" scale(".concat(S[0]>=0?1:-1,", ").concat(S[1]>=0?1:-1,")"),_="translate(".concat(-O,"px, ").concat(-A,"px)").concat(N);this.controlBox.getElement().style.transform="translate3d(".concat(D,"px, ").concat(k,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(w,"px;height:").concat(T,"px;")+"transform: ".concat(_),o.width=w,o.height=T;var z=this.getContainer(),B=To(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this._rootContainer||z,[]),I=[B.left,B.top],L=ee(B),F=L[0],W=L[1],H=L[2],Y=L[3],K=Ye([F,W,H,Y]),V=[K.minX,K.minY],Q=S[0]*S[1]>0?1:-1;B.pos1=U(F,V),B.pos2=U(W,V),B.pos3=U(H,V),B.pos4=U(Y,V),B.left=D-B.left+V[0],B.top=k-B.top+V[1],B.origin=U(ct(I,B.origin),V),B.beforeOrigin=U(ct(I,B.beforeOrigin),V),B.originalBeforeOrigin=ct(I,B.originalBeforeOrigin),B.transformOrigin=U(ct(I,B.transformOrigin),V),u.style.transform="translate(".concat(-O-V[0],"px, ").concat(-A-V[1],"px)")+N,this.updateState(R(R({},B),{posDelta:V,direction:Q,beforeDirection:Q}),i)},n.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,a,i){if(i||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,a);this._emitter.trigger(r,a)},n.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],this.props.ables,!0),[Mo],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,a=this.props,i=this._prevTarget,s=a.dragTarget||this.areaElement;i!==s&&(Nr(this,"targetGesto"),Nr(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Zc(this,s,"Group")),this.controlGesto||(this.controlGesto=Do(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!to(r.container,a.container);o&&(r.container=a.container);var l=a.targets,c=this.differ.update(l),u=c.added,f=c.changed,d=c.removed,v=u.length||d.length;(o||v||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||f.length||l.length&&!rc(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},n._updateObserver=function(){},e.defaultProps=R(R({},Br.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Br),zg=function(t){Pr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,a,i=this.props,s=i.cspNonce,o=i.cssStyled,l=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,d=(a=l?.children)!==null&&a!==void 0?a:[];return f&&!u&&d.length?c=d.map(function(){return null}):f||(d=[]),ue(o,{cspNonce:s,ref:xe(this,"controlBox"),className:q("control-box")},c.map(function(v,p){return ue(Br,R({key:"moveable"+p,ref:As(r,"moveables",p)},r.props,{target:v,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:d[p]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(s){s.updateRect(r,a,i)})},n.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Br);function ru(t,e){var n=[];return t.forEach(function(r){if(r){if(Vt(r)){e[r]&&n.push.apply(n,e[r]);return}Mt(r)?n.push.apply(n,ru(r,e)):n.push(r)}}),n}function nu(t,e){var n=[];return t.forEach(function(r){if(r){if(Vt(r)){e[r]&&n.push.apply(n,e[r]);return}Mt(r)?n.push(nu(r,e)):n.push(r)}}),n}function au(t,e){return t.length!==e.length||t.some(function(n,r){var a=e[r];return!n&&!a?!1:n!=a?Mt(n)&&Mt(a)?au(n,a):!0:!1})}var iu=function(t){Pr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new pl,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},a=this.getTotalAbles();a.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var i=Fe(r).join(`
`);this.defaultStyled=xl("div",Wf(Wi,Dp+i))},e.getTotalAbles=function(){return J([Bc,Mo,Qc,_c],this.defaultAbles,!0)},n.render=function(){var r,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,s=i.ables,o=i.props,l=bp(i,["ables","props"]),c=this._updateRefs(!0),u=ru(c,this.selectorMap),f=u.length>1,d=a.getTotalAbles(),v=J(J([],d,!0),s||[],!0),p=R(R(R({},l),o||{}),{ables:v,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=u;var h=null,g=this.moveable,m=l.persistData;if(m?.children&&(f=!0),f){if(l.individualGroupable)return ue(zg,R({key:"individual-group",ref:xe(this,"moveable")},p,{target:null,targets:u}));var b=nu(c,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var E=g.props.target;E&&u.indexOf(E)>-1&&(h=R({},g.state))}return ue(Bg,R({key:"group",ref:xe(this,"moveable")},p,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:u,targetGroups:b,firstRenderState:h}))}else{var C=u[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var x=g.moveables||[],S=Ae(x,function(w){return w.props.target===C});S&&(h=R({},S.state))}return ue(Br,R({key:"single",ref:xe(this,"moveable")},p,{target:C,firstRenderState:h}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,a;return(a=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&a!==void 0?a:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,a;return this._onChangeTargets=function(){r._onChangeTargets=null,a()},new Promise(function(i){a=i})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var a=this.refTargets,i=no(this.props.target||this.props.targets),s=typeof document<"u",o=au(a,i),l=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Vt(f)){var d=l[f];d?c[f]=l[f]:s&&(o=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else Mt(f)&&f.forEach(u)}),this.refTargets=i,this.selectorMap=c,!r&&o&&this.forceUpdate(),i},n._checkChangeTargets=function(){var r,a,i,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,c=o.length||l.length;c&&((a=(r=this.props).onChangeTargets)===null||a===void 0||a.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Ep([Yf(kl)],e.prototype,"moveable",void 0),e}(hi),Ig=function(t){Pr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=ko,e}(iu);function ub(t){var e;return e=function(n){Pr(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(iu),e.defaultAbles=t,e}var Gg=Ig;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Po=function(t,e){return Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Po(t,e)};function Ro(t,e){Po(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xn=function(){return xn=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xn.apply(this,arguments)};function Fg(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}var Kg=function(t){Ro(e,t);function e(r){var a=t.call(this,r)||this;return a.state={},a.state=a.props,a}var n=e.prototype;return n.render=function(){return Mv(ue(Gg,xn({ref:xe(this,"moveable")},this.state)),this.state.parentElement)},e}(pi),Wg=Lg,Yg=kl,Xg=Ng,db=null,Hg=function(t){Ro(e,t);function e(r,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var s=xn({},a),o={};Xg.forEach(function(c){o[ii("on ".concat(c))]=function(u){return i.trigger(c,u)}}),el(ue(Kg,xn({ref:xe(i,"innerMoveable"),parentElement:r},s,o)),i.tempElement);var l=s.target;return Mt(l)&&l.length>1&&i.updateRect(),i}var n=e.prototype;return n.setState=function(r,a){this.innerMoveable.setState(r,a)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){el(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Fg([ti(Yg,function(r,a){r[a]||(r[a]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[a]))return o[a].apply(o,i)})}),ti(Wg,function(r,a){Object.defineProperty(r,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var s;this.setState((s={},s[a]=i,s))},enumerable:!0,configurable:!0})})],e),e}(fn),Vg=function(t){Ro(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Hg);function fb(t,e,n){return getElementInfo$1(t,e,n)}function vb(t,e){return makeAble$1(t,e)}var ou=G(94557),su=G(11356),lu=G(4681),Oo=function(t,e){return Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Oo(t,e)};function Zg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Oo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $g="object",jg="string";function cu(t){return t&&typeof t===$g}function uu(t){return Array.isArray(t)}function du(t){return typeof t===jg}function Ug(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function Ao(t,e,n,r){t.addEventListener(e,n,r)}function No(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lo=function(){return Lo=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lo.apply(this,arguments)};function Qg(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var qg=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(cu(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(cu(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=Ug(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Qg(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(Lo({listener:r},a))},t}();function Jg(t,e){return e={exports:{}},t(e,e.exports),e.exports}var wn=Jg(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),f=r[u.toLowerCase()];if(f)return f;var f=a[u.toLowerCase()];if(f)return f;if(u.length===1)return u.charCodeAt(0)}n.isEventKey=function(c,u){if(c&&typeof c=="object"){var f=c.which||c.keyCode||c.charCode;if(f==null)return!1;if(typeof u=="string"){var d=r[u.toLowerCase()];if(d)return d===f;var d=a[u.toLowerCase()];if(d)return d===f}else if(typeof u=="number")return u===f;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=e.names=e.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),pb=wn.code,hb=wn.codes,gb=wn.aliases,t0=wn.names,mb=wn.title,fu={"+":"plus","left command":"meta","right command":"meta"},vu={shift:1,ctrl:2,alt:3,meta:4};function pu(t,e){var n=(t0[t]||e||"").toLowerCase();for(var r in fu)n=n.replace(r,fu[r]);return n.replace(/\s/g,"")}function hu(t,e){e===void 0&&(e=pu(t.keyCode,t.key));var n=e0(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function e0(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function gu(t){var e=t.slice();return e.sort(function(n,r){var a=vu[n]||5,i=vu[r]||5;return a-i}),e}var mu,r0=function(t){Zg(e,t);function e(r){r===void 0&&(r=window);var a=t.call(this)||this;return a.container=r,a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a.clear=function(){return a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a},a.keydownEvent=function(i){a.triggerEvent("keydown",i)},a.keyupEvent=function(i){a.triggerEvent("keyup",i)},a.blur=function(){a.clear(),a.trigger("blur")},Ao(r,"blur",a.blur),Ao(r,"keydown",a.keydownEvent),Ao(r,"keyup",a.keyupEvent),a}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return mu||(mu=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),No(r,"blur",this.blur),No(r,"keydown",this.keydownEvent),No(r,"keyup",this.keyupEvent)},n.keydown=function(r,a){return this.addEvent("keydown",r,a)},n.offKeydown=function(r,a){return this.removeEvent("keydown",r,a)},n.offKeyup=function(r,a){return this.removeEvent("keyup",r,a)},n.keyup=function(r,a){return this.addEvent("keyup",r,a)},n.addEvent=function(r,a,i){return uu(a)?this.on(r+"."+gu(a).join("."),i):du(a)?this.on(r+"."+a,i):this.on(r,a),this},n.removeEvent=function(r,a,i){return uu(a)?this.off(r+"."+gu(a).join("."),i):du(a)?this.off(r+"."+a,i):this.off(r,a),this},n.triggerEvent=function(r,a){this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey;var i=pu(a.keyCode,a.key),s=i==="ctrl"||i==="shift"||i==="meta"||i==="alt",o={key:i,isToggle:s,inputEvent:a,keyCode:a.keyCode,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey};this.trigger(r,o),this.trigger(r+"."+i,o);var l=hu(a,i);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(qg);const n0=r0;var _o=function(t,e){return _o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},_o(t,e)};function yu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _t=function(){return _t=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_t.apply(this,arguments)};function a0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function i0(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function Dn(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function o0(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function s0(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function l0(t,e,n){var r=ge(t);return r.elementFromPoint&&r.elementFromPoint(e,n)||null}function bu(t,e,n){var r=t.tag,a=t.children,i=t.attributes,s=t.className,o=t.style,l=e||ge(n).createElement(r);for(var c in i)l.setAttribute(c,i[c]);var u=l.children;if(a.forEach(function(d,v){bu(d,u[v],l)}),s&&s.split(/\s+/g).forEach(function(d){d&&!Nt(l,d)&&li(l,d)}),o){var f=l.style;for(var c in o)f[c]=o[c]}return!e&&n&&n.appendChild(l),l}function c0(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.className,s=i===void 0?"":i,o=a.style,l=o===void 0?{}:o,c=a0(a,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}function Bo(t,e,n){t!==e&&n(t,e)}function Eu(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var a=t.distX,i=a===void 0?0:a,s=t.distY,o=s===void 0?0:s,l=t.data,c=l.startX,u=l.startY;if(e>0){var f=Math.sqrt((i*i+o*o)/(1+e*e)),d=e*f;i=(i>=0?1:-1)*d,o=(o>=0?1:-1)*f}var v=Math.abs(i),p=Math.abs(o),h=i<0?c-n.left:n.right-c,g=o<0?u-n.top:n.bottom-u;r=Ws([v,p],[0,0],[h,g],!!e),v=r[0],p=r[1],i=(i>=0?1:-1)*v,o=(o>=0?1:-1)*p;var m=Math.min(0,i),b=Math.min(0,o),E=c+m,C=u+b;return{left:E,top:C,right:E+v,bottom:C+p,width:v,height:p}}function Pa(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,a=e.width,i=e.height;return{pos1:[n,r],pos2:[n+a,r],pos3:[n,r+i],pos4:[n+a,r+i]}}function Cu(t,e,n){var r=Mr(t,e),a=r.list,i=r.prevList,s=r.added,o=r.removed,l=r.maintained;return Dn(Dn(Dn([],s.map(function(c){return a[c]}),!0),o.map(function(c){return i[c]}),!0),n?l.map(function(c){var u=c[1];return a[u]}):[],!0)}function Su(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(ce(t[r],t[r-1]),e);return e}var xu=Cl(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),wu="selecto-selection ".concat(xu.className),Du=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],yb=Dn(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],Du,!0),bb={className:String,boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},Eb=null,Cb=null,u0=function(t){yu(e,t);function e(r){r===void 0&&(r={});var a=t.call(this)||this;a.selectedTargets=[],a.dragScroll=new gl,a._onDragStart=function(o,l){var c=o.data,u=o.clientX,f=o.clientY,d=o.inputEvent,v=a.options,p=v.selectFromInside,h=v.selectByClick,g=v.rootContainer,m=v.boundContainer,b=v.preventDragFromInside,E=b===void 0?!0:b,C=v.clickBySelectEnd,x=v.dragCondition;if(x&&!x(o)){o.stop();return}c.data={};var S=Ke(a.container);c.innerWidth=S.innerWidth,c.innerHeight=S.innerHeight,a.findSelectableTargets(c),c.startSelectedTargets=a.selectedTargets,c.scaleMatrix=Ti(),c.containerX=0,c.containerY=0;var w=a.container,T={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var D=a.container.getBoundingClientRect();c.containerX=D.left,c.containerY=D.top,c.scaleMatrix=Wv(a.container,g)}if(m){var k=te(m)&&"element"in m?_t({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},P=k.element,M=void 0;if(P){Vt(P)?M=ge(w).querySelector(P):P===!0?M=a.container:M=P;var O=M.getBoundingClientRect();k.left&&(T.left=O.left),k.top&&(T.top=O.top),k.right&&(T.right=O.right),k.bottom&&(T.bottom=O.bottom)}}c.boundArea=T;var A={left:u,top:f,right:u,bottom:f,width:0,height:0},N=[];if(!p||h&&!C){var _=a._findElement(l||d.target,c.selectableTargets);N=_?[_]:[]}var z=N.length>0,B=!p&&z;if(B&&!h)return o.stop(),!1;var I=d.type,L=I==="mousedown"||I==="touchstart",F=!o.isClick&&L?a.emit("dragStart",_t(_t({},o),{data:c.data})):!0;if(!F)return o.stop(),!1;if(a.continueSelect?(N=Cu(a.selectedTargets,N,a.continueSelectWithoutDeselect),c.startPassedTargets=a.selectedTargets):c.startPassedTargets=[],a._select(N,A,o,!0,B&&h&&!C&&E),c.startX=u,c.startY=f,c.selectFlag=!1,c.preventDragFromInside=!1,d.target){var W=Un(c.scaleMatrix,[u-c.containerX,f-c.containerY]);a.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(W[0],"px, ").concat(W[1],"px)")}if(B&&h&&!C)d.preventDefault(),E&&(a._selectEnd(c.startSelectedTargets,c.startPassedTargets,A,o,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=a.options,Y=H.scrollOptions,K=H.innerScrollOptions,V=!1;if(K){for(var Q=o.inputEvent,tt=Q.target,et=null,X=tt;X&&X!==ge(w).body;){var Z=getComputedStyle(X).overflow!=="visible";if(Z){et=X;break}X=X.parentElement}et&&(c.innerScrollOptions=_t({container:et,checkScrollEvent:!0},K===!0?{}:K),a.dragScroll.dragStart(o,c.innerScrollOptions),V=!0)}!V&&Y&&Y.container&&a.dragScroll.dragStart(o,Y),C&&(c.selectFlag=!1,o.preventDrag())}return!0},a._onDrag=function(o){if(o.data.selectFlag){var l=a.scrollOptions,c=o.data.innerScrollOptions,u=c||l?.container;if(u&&!o.isScroll&&a.dragScroll.drag(o,c||l))return}a._checkSelected(o)},a._onDragEnd=function(o){var l=o.data,c=o.inputEvent,u=Eu(o,a.options.ratio),f=l.selectFlag,d=a.container;if(c&&a.emit("dragEnd",_t(_t({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:f},o),{data:l.data,rect:u})),a.target.style.cssText+="display: none;",f)l.selectFlag=!1,a.dragScroll.dragEnd();else if(a.selectByClick&&a.clickBySelectEnd){var v=a._findElement(c?.target||l0(d,o.clientX,o.clientY),l.selectableTargets);a._select(v?[v]:[],u,o)}l.preventDragFromInside||a._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,o)},a._onKeyDown=function(o){var l=a.options,c=!1;if(!a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect);a._keydownContinueSelect=u,c||(c=u)}if(!a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);a._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&a.emit("keydown",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onKeyUp=function(o){var l=a.options,c=!1;if(a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect,!0);a._keydownContinueSelect=!u,c||(c=u)}if(a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);a._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onBlur=function(){(a._keydownContinueSelect||a._keydownContinueSelectWithoutDeselection)&&(a._keydownContinueSelect=!1,a._keydownContinueSelectWithoutDeselection=!1,a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection}))},a._onDocumentSelectStart=function(o){var l=ge(a.container);if(a.gesto.isFlag()){var c=a.dragContainer;c===Ke(a.container)&&(c=l.documentElement);var u=Vs(c)?[c]:[].slice.call(c),f=o.target;u.some(function(d){if(d===f||d.contains(f))return o.preventDefault(),!0})}},a.target=r.portalContainer;var i=r.container;a.options=_t({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:Pa,cspNonce:"",ratio:0},r);var s=a.options.portalContainer;return s&&(i=s.parentElement),a.container=i||document.body,a.initElement(),a.initDragScroll(),a.setKeyController(),a}var n=e.prototype;return n.setSelectedTargets=function(r){var a=this.selectedTargets,i=Mr(a,r),s=i.added,o=i.removed,l=i.prevList,c=i.list;return this.selectedTargets=r,{added:s.map(function(u){return c[u]}),removed:o.map(function(u){return l[u]}),beforeSelected:a,selected:r}},n.setSelectedTargetsByPoints=function(r,a){var i=Math.min(r[0],a[0]),s=Math.min(r[1],a[1]),o=Math.max(r[0],a[0]),l=Math.max(r[1],a[1]),c={left:i,top:s,right:o,bottom:l,width:o-i,height:l-s},u={ignoreClick:!0};this.findSelectableTargets(u);var f=this.hitTest(c,u),d=this.setSelectedTargets(f);return _t(_t({},d),{rect:c})},n.selectTargetsByPoints=function(r,a){var i=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(i);c!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){var r;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Gt(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(r=this.target.parentElement)===null||r===void 0||r.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var a=this.getElementRect||Pa,i=a(r),s=[i.pos1,i.pos2,i.pos4,i.pos3];if(a!==Pa){var o=r.getBoundingClientRect();return ki(s,o)}return s},n.getSelectableElements=function(){var r=this.container,a=[];return this.options.selectableTargets.forEach(function(i){if(Xn(i)){var s=i();s&&a.push.apply(a,[].slice.call(s))}else if(Vs(i))a.push(i);else if(te(i))a.push(i.value||i.current);else{var o=[].slice.call(ge(r).querySelectorAll(i));a.push.apply(a,o)}}),a},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,a=this.gesto.getEventData().innerScrollOptions,i=a||r?.container;i&&this.dragScroll.checkScroll(_t({inputEvent:this.gesto.getCurrentEvent()},a||r))}},n.findSelectableTargets=function(r){var a=this;r===void 0&&(r=this.gesto.getEventData());var i=this.getSelectableElements(),s=i.map(function(f){return a.getElementPoints(f)});r.selectableTargets=i,r.selectablePoints=s,r.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,c=ge(this.container);if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=i.map(function(f,d){for(var v=f.parentElement,p=[],h=[],g=function(){var m=u.get(v);if(!m){var b=getComputedStyle(v).overflow!=="visible";if(b){var E=Pa(v);m={parentElement:v,indexes:[],points:[E.pos1,E.pos2,E.pos4,E.pos3],paths:Dn([],h,!0)},p.push(v),p.forEach(function(C){u.set(C,m)}),p=[]}}m?(v=m.parentElement,u.get(v).indexes.push(d),h.push(v)):p.push(v),v=v.parentElement};v&&v!==c.body;)g();return h})}return o.checkOverflow||(r.selectableInners=i.map(function(){return!0})),this._refreshGroups(r),i},n.clickTarget=function(r,a){var i=o0(r),s=i.clientX,o=i.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,a)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,a=r.keyContainer,i=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(i||s)&&(this.keycon=new n0(a||Ke(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(r){this.options.className=r,this.target.setAttribute("class","".concat(wu," ").concat(r||""))},n.setKeyEvent=function(){var r=this.options,a=r.toggleContinueSelect,i=r.toggleContinueSelectWithoutDeselect;!a&&!i||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var a=this,i=this.options;Bo(i.keyContainer,r,function(){i.keyContainer=r,a.setKeyController()})},n.getContinueSelect=function(){var r=this.options,a=r.continueSelect,i=r.toggleContinueSelect;return!i||!this._keydownContinueSelect?a:!a},n.getContinueSelectWithoutDeselect=function(){var r=this.options,a=r.continueSelectWithoutDeselect,i=r.toggleContinueSelectWithoutDeselect;return!i||!this._keydownContinueSelectWithoutDeselection?a:!a},n.setToggleContinueSelect=function(r){var a=this,i=this.options;Bo(i.toggleContinueSelect,r,function(){i.toggleContinueSelect=r,a.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var a=this,i=this.options;Bo(i.toggleContinueSelectWithoutDeselect,r,function(){i.toggleContinueSelectWithoutDeselect=r,a.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){var r=this.options,a=r.dragContainer,i=r.checkInput,s=r.preventDefault,o=r.preventClickEventOnDragStart,l=r.preventClickEventOnDrag,c=r.preventClickEventByCondition,u=r.preventRightClick,f=u===void 0?!0:u,d=r.className,v=this.container;this.target=bu(c0("div",{className:"".concat(wu," ").concat(d||"")}),this.target,v);var p=this.target;this.dragContainer=typeof a=="string"?[].slice.call(ge(v).querySelectorAll(a)):a||this.target.parentNode,this.gesto=new El(this.dragContainer,{checkWindowBlur:!0,container:Ke(v),checkInput:i,preventDefault:s,preventClickEventOnDragStart:o,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:f}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Kt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=xu.inject(p,{nonce:this.options.cspNonce})},n.hitTest=function(r,a,i){var s=this.options,o=s.hitRate,l=s.selectByClick,c=r.left,u=r.top,f=r.right,d=r.bottom,v=a.innerGroups,p=a.innerWidth,h=a.innerHeight,g=i?.clientX,m=i?.clientY,b=a.ignoreClick,E=[[c,u],[f,u],[f,d],[c,d]],C=function(z,B){var I=nr(typeof o=="function"?"".concat(o(B)):"".concat(o)),L=b?!1:Qn([g,m],z);if(l&&L)return!0;var F=Ai(E,z);if(!F.length)return!1;var W=dn(F),H=0;if(W===0&&dn(z)===0?(H=Su(z),W=Su(F)):H=dn(z),I.unit==="px")return W>=I.value;var Y=Vn(Math.round(W/H*100),0,100);return Y>=Math.min(100,I.value)},x=a.selectableTargets,S=a.selectablePoints,w=a.selectableInners;if(!v)return x.filter(function(z,B){return w[B]?C(S[B],x[B]):!1});for(var T=[],D=Math.floor(c/p),k=Math.floor(f/p),P=Math.floor(u/h),M=Math.floor(d/h),O=D;O<=k;++O){var A=v[O];if(A)for(var N=P;N<=M;++N){var _=A[N];_&&_.forEach(function(z){var B=S[z],I=w[z],L=x[z];I&&C(B,L)&&T.push(L)})}}return s0(T)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(a){var i=a.next;i(r.gesto.getCurrentEvent())}).on("scroll",function(a){var i=a.container,s=a.direction,o=r.gesto.getEventData().innerScrollOptions;o?r.emit("innerScroll",{container:i,direction:s}):r.emit("scroll",{container:i,direction:s})}).on("move",function(a){var i=a.offsetX,s=a.offsetY,o=a.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var c=r.gesto.getEventData(),u=c.boundArea;c.startX-=i,c.startY-=s;var f=r.gesto.getEventData().innerScrollOptions,d=f?.container,v=!1;if(d){var p=c.selectableInnerScrollParentMap,h=p.get(d);h&&(h.paths.forEach(function(g){var m=p.get(g);m.points.forEach(function(b){b[0]-=i,b[1]-=s})}),h.indexes.forEach(function(g){c.selectablePoints[g].forEach(function(m){m[0]-=i,m[1]-=s})}),v=!0)}v||c.selectablePoints.forEach(function(g){g.forEach(function(m){m[0]-=i,m[1]-=s})}),r._refreshGroups(c),u.left-=i,u.right-=i,u.top-=s,u.bottom-=s,r.gesto.scrollBy(i,s,o.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,a,i,s,o){o===void 0&&(o=!1);var l=i.inputEvent,c=i.data,u=this.setSelectedTargets(r),f=Mr(c.startSelectedTargets,r),d=f.added,v=f.removed,p=f.prevList,h=f.list,g={startSelected:p,startAdded:d.map(function(m){return h[m]}),startRemoved:v.map(function(m){return p[m]})};s&&this.emit("selectStart",_t(_t(_t({},u),g),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o})),(u.added.length||u.removed.length)&&this.emit("select",_t(_t(_t({},u),g),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o}))},n._selectEnd=function(r,a,i,s,o){o===void 0&&(o=!1);var l=s.inputEvent,c=s.isDouble,u=s.data,f=l&&l.type,d=f==="mousedown"||f==="touchstart",v=Mr(r,this.selectedTargets),p=v.added,h=v.removed,g=v.prevList,m=v.list,b=Mr(a,this.selectedTargets),E=b.added,C=b.removed,x=b.prevList,S=b.list;this.emit("selectEnd",{startSelected:r,beforeSelected:a,selected:this.selectedTargets,added:p.map(function(w){return m[w]}),removed:h.map(function(w){return g[w]}),afterAdded:E.map(function(w){return S[w]}),afterRemoved:C.map(function(w){return x[w]}),isDragStart:d&&o,isDragStartEnd:d&&o,isClick:!!s.isClick,isDouble:!!c,rect:i,inputEvent:l,data:u.data,isTrusted:s.isTrusted})},n._checkSelected=function(r,a){a===void 0&&(a=Eu(r,this.options.ratio));var i=r.data,s=a.top,o=a.left,l=a.width,c=a.height,u=i.selectFlag,f=i.containerX,d=i.containerY,v=i.scaleMatrix,p=Un(v,[o-f,s-d]),h=Un(v,[l,c]),g=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var m=this.hitTest(a,i,r);g=Cu(i.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var b=this.emit("drag",_t(_t({},r),{data:i.data,isSelect:u,rect:a}));if(b===!1){this.target.style.cssText+="display: none;",r.stop();return}u&&this._select(g,a,r)},n._sameCombiKey=function(r,a,i){if(!a)return!1;var s=hu(r.inputEvent,r.key),o=[].concat(a),l=Mt(o[0])?o:[o];if(i){var c=r.key;return l.some(function(u){return u.some(function(f){return f===c})})}return l.some(function(u){return u.every(function(f){return s.indexOf(f)>-1})})},n._findElement=function(r,a){for(var i=r;i&&!(a.indexOf(i)>-1);)i=i.parentElement;return i},n._refreshGroups=function(r){var a,i=r.innerWidth,s=r.innerHeight,o=r.selectablePoints;if(this.options.checkOverflow){var l=(a=this.gesto.getEventData().innerScrollOptions)===null||a===void 0?void 0:a.container,c=r.selectableInnerScrollParentMap,u=r.selectableInnerScrollPathsList;r.selectableInners=u.map(function(v,p){var h=!1;return v.every(function(g){if(h)return!0;if(g===l)return h=!0,!0;var m=c.get(g);if(m){var b=o[p],E=m.points,C=Ai(b,E);if(!C.length)return!1}return!0})})}if(!i||!s)r.innerGroups=null;else{var f=r.selectablePoints,d={};f.forEach(function(v,p){var h=1/0,g=-1/0,m=1/0,b=-1/0;v.forEach(function(x){var S=Math.floor(x[0]/i),w=Math.floor(x[1]/s);h=Math.min(S,h),g=Math.max(S,g),m=Math.min(w,m),b=Math.max(w,b)});for(var E=h;E<=g;++E)for(var C=m;C<=b;++C)d[E]=d[E]||{},d[E][C]=d[E][C]||[],d[E][C].push(p)}),r.innerGroups=d}},e=i0([ti(Du,function(r,a){var i={enumerable:!0,configurable:!0,get:function(){return this.options[a]}},s=ii("get ".concat(a));r[s]?i.get=function(){return this[s]()}:i.get=function(){return this.options[a]};var o=ii("set ".concat(a));r[o]?i.set=function(c){this[o](c)}:i.set=function(c){this.options[a]=c},Object.defineProperty(r,a,i)})],e),e}(fn),d0=function(t){yu(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(u0);const f0=d0;var Tn=G(25108),Mn=G(25306),_e=G(46213),v0=G(45502);const p0=({scene:t,panel:e,onVisibilityChange:n})=>{const r=e.state.openInlineEdit,[a,i]=(0,y.useState)(!1),[s,o]=(0,y.useState)({x:0,y:0}),l=h0(),c=t.selecto?.getSelectedTargets(),u=e.context?.instanceState?.layer,f=(0,y.useCallback)(h=>{if(!(h instanceof MouseEvent)||h.ctrlKey)return;h.preventDefault(),e.setActivePanel(),h.currentTarget!==t.div&&(h.currentTarget instanceof HTMLElement||h.currentTarget instanceof SVGElement)&&t.select({targets:[h.currentTarget]}),o({x:h.pageX,y:h.pageY}),i(!0),n(!0)},[t,e,n]);(0,y.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(h=>{h.addEventListener("contextmenu",f)})},[f,t.selecto]),(0,y.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",f)},[f,t.div]);const d=()=>{i(!1),n(!1)},v=()=>{const h=!t.isPanelEditing&&y.createElement(_e.s,{label:r?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(r?e.closeInlineEdit():t.inlineEditingCallback()),d()},className:l.menuItem}),g=()=>{if(c?.length===1){const x=()=>{t.editModeEnabled.next(!0),d()},S=t.findElementByTarget(c[0]);return S&&S.item.hasEditMode&&y.createElement(_e.s,{label:"Edit",onClick:x,className:l.menuItem})}return null},m=In(t.shouldShowAdvancedTypes).options,b=()=>{const x=[],S=w=>{let T=s.y,D=s.x;if(t.div){const k=t.scale,P=t.div.getBoundingClientRect();T=(T-P.top)/k,D=(D-P.left)/k}qa(w,u,{...s,y:T,x:D})};return m.map(w=>{x.push(y.createElement(_e.s,{key:w.value,label:w.label??"Canvas item",onClick:()=>S(w)}))}),x},E=!t.isPanelEditing&&y.createElement(_e.s,{label:"Add item",className:l.menuItem,childItems:b(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),C=!t.isPanelEditing&&y.createElement(_e.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(s),d()},className:l.menuItem});return c&&c.length>=1?y.createElement(y.Fragment,null,g(),y.createElement(_e.s,{label:"Delete",onClick:()=>{p(Ht.Delete),d()},className:l.menuItem}),y.createElement(_e.s,{label:"Duplicate",onClick:()=>{p(Ht.Duplicate),d()},className:l.menuItem}),y.createElement(_e.s,{label:"Bring to front",onClick:()=>{p(Ht.MoveTop),d()},className:l.menuItem}),y.createElement(_e.s,{label:"Send to back",onClick:()=>{p(Ht.MoveBottom),d()},className:l.menuItem}),h):y.createElement(y.Fragment,null,h,C,E)},p=h=>{t.selection.pipe((0,lu.P)()).subscribe(g=>{const m=g[0].parent;g.forEach(b=>{m.doAction(h,b)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return a?y.createElement("div",{onContextMenu:h=>{h.preventDefault(),d()}},y.createElement(v0.x,{x:s.x,y:s.y,onClose:d,renderMenuItems:v,focusOnOpen:!1})):y.createElement(y.Fragment,null)},h0=()=>({menuItem:(0,j.css)({maxWidth:"200px"})});var g0=G(16749),m0=G(68420),y0=G(40429),b0=G(23420);const E0=({scene:t})=>{const e=(0,xt.wW)(C0),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,y.createRef)(),{overlayProps:a}=(0,m0.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:i}=(0,g0.R)({},r),s=t.tooltip?.element;if(!s)return y.createElement(y.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&y.createElement("div",null,y.createElement(pe.wc,null,s.data?.links?.map((l,c)=>y.createElement(Yr.Qj,{key:c,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return y.createElement(y.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&y.createElement(Tn.h_,null,y.createElement(y0.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},y.createElement("section",{ref:r,...a,...i},t.tooltip.isOpen&&y.createElement(b0.P,{style:{zIndex:1},onClick:n}),y.createElement("div",{className:e.wrapper},o())))))},C0=t=>({wrapper:(0,j.css)({marginTop:"20px",background:t.colors.background.primary})}),Tu="connectionControl",Mu="connection anchor",zo=8,hr=3,S0=({setRef:t,handleMouseLeave:e})=>{const n=(0,y.useRef)(null),r=(0,xt.wW)(x0),a=2.5,i=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=d=>{d.target instanceof HTMLImageElement&&n.current&&d.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${d.target.style.top} - ${i}px + ${hr}px)`,n.current.style.left=`calc(${d.target.style.left} - ${i}px + ${hr}px)`)},l=()=>{n.current&&(n.current.style.display="none")},c=d=>{e(d)&&l()},u=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],f=(d=u)=>d.map(v=>{const p=`${v.x},${v.y}`,h={top:`calc(${-v.y*50+50}% - ${a}px - ${hr}px)`,left:`calc(${v.x*50+50}% - ${a}px - ${hr}px)`};return y.createElement("img",{id:p,ref:g=>{g&&g.style.setProperty("pointer-events","auto","important")},key:p,alt:Mu,className:r.anchor,style:h,src:s,onMouseEnter:o})});return y.createElement("div",{className:r.root,ref:t},y.createElement("div",{className:r.mouseoutDiv,onMouseOut:c,onBlur:c}),y.createElement("div",{id:Tu,ref:n,className:r.highlightElement,onMouseLeave:l}),f())},x0=t=>({root:(0,j.css)({position:"absolute",display:"none"}),mouseoutDiv:(0,j.css)({position:"absolute",margin:"-30px",width:"calc(100% + 60px)",height:"calc(100% + 60px)"}),anchor:(0,j.css)({padding:`${hr}px`,position:"absolute",cursor:"cursor",width:`calc(5px + 2 * ${hr}px)`,height:`calc(5px + 2 * ${hr}px)`,zIndex:100}),highlightElement:(0,j.css)({backgroundColor:"#00ff00",opacity:.3,position:"absolute",cursor:"cursor",pointerEvents:"auto",width:"16px",height:"16px",borderRadius:t.shape.radius.circle,display:"none",zIndex:110})});let w0=0;const D0=["input","textarea"],T0=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,xt.wW)(M0),a=Date.now()+"_"+w0++,i=(0,y.useMemo)(()=>`connectionLineId-${a}`,[a]),s=(0,y.useMemo)(()=>`editorHead-${a}`,[a]),o=le.config.theme2.colors.text.primary,l=2,[c,u]=(0,y.useState)(void 0),f=(0,y.useRef)(c);(0,y.useEffect)(()=>{f.current=c}),(0,y.useEffect)(()=>{n.panel.context.instanceState?.selectedConnection&&u(n.panel.context.instanceState?.selectedConnection)},[n.panel.context.instanceState?.selectedConnection]);const d=g=>{const m=g.target;if(m instanceof HTMLElement&&!(D0.indexOf(m.nodeName.toLowerCase())>-1)){if(g.keyCode===8||g.keyCode===46)f.current&&f.current.source&&(f.current.source.options.connections=f.current.source.options.connections?.filter(b=>b!==f.current?.info),f.current.source.onChange(f.current.source.options),u(void 0),n.connections.select(void 0),n.connections.updateState(),n.save());else return;document.removeEventListener("keyup",d),n.selecto.rootContainer.removeEventListener("click",v)}},v=g=>{const m=g.target;!(m instanceof SVGLineElement&&m.id===i)&&(u(void 0),n.connections.select(void 0))},p=g=>{n.isEditingEnabled&&(u(g),n.connections.select(g),document.addEventListener("keyup",d),n.selecto.rootContainer.addEventListener("click",v))},h=()=>n.connections.state.map((g,m)=>{const{source:b,target:E,info:C}=g,x=b.div?.getBoundingClientRect(),S=b.div?.parentElement,w=n.scale,T=Ur(n);if(!x||!S||!T)return;const{x1:D,y1:k,x2:P,y2:M}=mf(x,T,C,E,w),{strokeColor:O,strokeWidth:A}=bf(C,n,l),N=c===g&&n.panel.context.instanceState.selectedConnection,_=n.isEditingEnabled?"grab":"",z={stroke:"#44aaff",strokeOpacity:.6,strokeWidth:A+5},B=`connectionHead-${a+Math.random()}`;return y.createElement("svg",{className:r.connection,key:m},y.createElement("g",{onClick:()=>p(g)},y.createElement("defs",null,y.createElement("marker",{id:B,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:O},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:O}))),y.createElement("line",{id:`${i}_transparent`,cursor:_,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,style:N?z:{},x1:D,y1:k,x2:P,y2:M}),y.createElement("line",{id:i,stroke:O,pointerEvents:"auto",strokeWidth:A,markerEnd:`url(#${B})`,x1:D,y1:k,x2:P,y2:M,cursor:_})))});return y.createElement(y.Fragment,null,y.createElement("svg",{ref:t,className:r.editorSVG},y.createElement("defs",null,y.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:o},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:o}))),y.createElement("line",{ref:e,stroke:o,strokeWidth:2,markerEnd:`url(#${s})`})),h())},M0=t=>({editorSVG:(0,j.css)({position:"absolute",pointerEvents:"none",width:"100%",height:"100%",zIndex:1e3,display:"none"}),connection:(0,j.css)({position:"absolute",width:"100%",height:"100%",zIndex:1e3,pointerEvents:"none"})});class k0{constructor(e){this.state=[],this.selection=new su.X(void 0),this.select=n=>{n!==this.selection.value&&this.selection.next(n)},this.updateState=()=>{const n=this.selection.value;if(this.state=xs(this.scene.byName),n){for(let r of this.state)if(r.source===n.source&&r.index===n.index){this.selection.next(r);break}}},this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const a=r.div.getBoundingClientRect(),i=this.scene.scale,s=Ur(this.scene),o=a.top-(s?.top??0),l=a.left-(s?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${o/i}px`,this.connectionAnchorDiv.style.left=`${l/i}px`,this.connectionAnchorDiv.style.height=`${a.height/i}px`,this.connectionAnchorDiv.style.width=`${a.width/i}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===Mu?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.scale,a=Ur(this.scene);if(!a)return;const i=n.pageX-a.x,s=n.pageY-a.y;this.connectionLine.setAttribute("x2",`${i/r}`),this.connectionLine.setAttribute("y2",`${s/r}`);const o=this.connectionLine.x1.baseVal.value,l=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(i-o,s-l)>zo&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const c=this.connectionSource.div.getBoundingClientRect(),u=this.scene.scale,f=Ur(this.scene);if(!f)return;const d=(c.top-f.top+c.height/2)/u,v=(c.left-f.left+c.width/2)/u,p=(o-v)/(c.width/2/u),h=(d-l)/(c.height/2/u);let g,m,b;if(this.connectionTarget&&this.connectionTarget.div){const x=this.connectionTarget.div.getBoundingClientRect(),S=x.top-f.top+x.height/2,w=x.left-f.left+x.width/2;g=(i-w)/(x.width/2),m=(S-s)/(x.height/2),b=this.connectionTarget.options.name}else{const x=f.height/2,S=f.width/2;g=(i-S)/(f.width/2),m=(x-s)/(f.height/2)}const E={source:{x:p,y:h},target:{x:g,y:m},targetName:b,color:{fixed:Je.config.theme2.colors.text.primary},size:{fixed:2,min:1,max:10},path:ls.Straight},{options:C}=this.connectionSource;C.connections||(C.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...C.connections,E],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1,this.updateState(),this.scene.save()}},this.handleConnectionDragStart=(n,r,a)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const i=n.getBoundingClientRect(),s=this.scene.scale,o=Ur(this.scene);if(!o)return;const l=zo*s,c=zo*s,u=(i.x-o.x+l)/s,f=(i.y-o.y+c)/s,d=r-o.x,v=a-o.y;this.connectionLine.setAttribute("x1",`${u}`),this.connectionLine.setAttribute("y1",`${f}`),this.connectionLine.setAttribute("x2",`${d}`),this.connectionLine.setAttribute("y2",`${v}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.onChange=(n,r)=>{const a=n.source.options.connections?.splice(0)??[];a[n.index]=r,n.source.onChange({...n.source.options,connections:a}),this.updateState()},this.connectionsNeedUpdate=n=>hf(n)||Ss(n,this.scene.byName),this.scene=e,this.updateState()}render(){return y.createElement(y.Fragment,null,y.createElement(S0,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),y.createElement(T0,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}var fe=function(t,e){return Number(t.toFixed(e))},P0=function(t,e){return typeof t=="number"?t:e},Tt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},R0=function(t){return-Math.cos(t*Math.PI)/2+.5},O0=function(t){return t},A0=function(t){return t*t},N0=function(t){return t*(2-t)},L0=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},_0=function(t){return t*t*t},B0=function(t){return--t*t*t+1},z0=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},I0=function(t){return t*t*t*t},G0=function(t){return 1- --t*t*t*t},F0=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},K0=function(t){return t*t*t*t*t},W0=function(t){return 1+--t*t*t*t*t},Y0=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},ku={easeOut:R0,linear:O0,easeInQuad:A0,easeOutQuad:N0,easeInOutQuad:L0,easeInCubic:_0,easeOutCubic:B0,easeInOutCubic:z0,easeInQuart:I0,easeOutQuart:G0,easeInOutQuart:F0,easeInQuint:K0,easeOutQuint:W0,easeInOutQuint:Y0},Pu=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Te=function(t){t.mounted&&(Pu(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function Ru(t,e,n,r){if(t.mounted){var a=new Date().getTime(),i=1;Te(t),t.animation=function(){if(!t.mounted)return Pu(t.animation);var s=new Date().getTime()-a,o=s/n,l=ku[e],c=l(o);s>=n?(r(i),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function X0(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function je(t,e,n,r){var a=X0(e);if(!(!t.mounted||!a)){var i=t.setTransformState,s=t.transformState,o=s.scale,l=s.positionX,c=s.positionY,u=e.scale-o,f=e.positionX-l,d=e.positionY-c;n===0?i(e.scale,e.positionX,e.positionY):Ru(t,r,n,function(v){var p=o+u*v,h=l+f*v,g=c+d*v;i(p,h,g)})}}function H0(t,e,n){var r=t.offsetWidth,a=t.offsetHeight,i=e.offsetWidth,s=e.offsetHeight,o=i*n,l=s*n,c=r-o,u=a-l;return{wrapperWidth:r,wrapperHeight:a,newContentWidth:o,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var V0=function(t,e,n,r,a,i,s){var o=t>e?n*(s?1:.5):0,l=r>a?i*(s?1:.5):0,c=t-e-o,u=o,f=r-a-l,d=l;return{minPositionX:c,maxPositionX:u,minPositionY:f,maxPositionY:d}},Io=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,a=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var i=H0(n,r,e),s=i.wrapperWidth,o=i.wrapperHeight,l=i.newContentWidth,c=i.newDiffWidth,u=i.newContentHeight,f=i.newDiffHeight,d=V0(s,l,c,o,u,f,!!a);return d},Go=function(t,e,n,r){return r?t<e?fe(e,2):t>n?fe(n,2):fe(t,2):fe(t,2)},Ir=function(t,e){var n=Io(t,e);return t.bounds=n,n};function Ra(t,e,n,r,a,i,s){var o=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,f=0,d=0;s&&(f=a,d=i);var v=Go(t,o-f,c+f,r),p=Go(e,l-d,u+d,r);return{x:v,y:p}}function Oa(t,e,n,r,a,i){var s=t.transformState,o=s.scale,l=s.positionX,c=s.positionY,u=r-o;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var f=l-e*u,d=c-n*u,v=Ra(f,d,a,i,0,0,null);return v}function kn(t,e,n,r,a){var i=a?r:0,s=e-i;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=s?s:t}var Ou=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,a=t.wrapperComponent,i=e.target,s=a?.contains(i),o=r&&i&&s;if(!o)return!1;var l=Ba(i,n);return!l},Au=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,a=r.panning.disabled,i=e&&n&&!a;return!!i},Z0=function(t,e){var n=t.transformState,r=n.positionX,a=n.positionY;t.isPanning=!0;var i=e.clientX,s=e.clientY;t.startCoords={x:i-r,y:s-a}},$0=function(t,e){var n=e.touches,r=t.transformState,a=r.positionX,i=r.positionY;t.isPanning=!0;var s=n.length===1;if(s){var o=n[0].clientX,l=n[0].clientY;t.startCoords={x:o-a,y:l-i}}};function j0(t){var e=t.transformState,n=e.positionX,r=e.positionY,a=e.scale,i=t.setup,s=i.disabled,o=i.limitToBounds,l=i.centerZoomedOut,c=t.wrapperComponent;if(!(s||!c||!t.bounds)){var u=t.bounds,f=u.maxPositionX,d=u.minPositionX,v=u.maxPositionY,p=u.minPositionY,h=n>f||n<d,g=r>v||r<p,m=n>f?c.offsetWidth:t.setup.minPositionX||0,b=r>v?c.offsetHeight:t.setup.minPositionY||0,E=Oa(t,m,b,a,t.bounds,o||l),C=E.x,x=E.y;return{scale:a,positionX:h?C:n,positionY:g?x:r}}}function U0(t,e,n,r,a){var i=t.setup.limitToBounds,s=t.wrapperComponent,o=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,f=l.positionY;if(!(s===null||o===null||e===u&&n===f)){var d=Ra(e,n,o,i,r,a,s),v=d.x,p=d.y;t.setTransformState(c,v,p)}}var Q0=function(t,e,n){var r=t.startCoords,a=t.transformState,i=t.setup.panning,s=i.lockAxisX,o=i.lockAxisY,l=a.positionX,c=a.positionY;if(!r)return{x:l,y:c};var u=e-r.x,f=n-r.y,d=s?l:u,v=o?c:f;return{x:d,y:v}},Aa=function(t,e){var n=t.setup,r=t.transformState,a=r.scale,i=n.minScale,s=n.disablePadding;return e>0&&a>=i&&!s?e:0},q0=function(t){var e=t.mounted,n=t.setup,r=n.disabled,a=n.velocityAnimation,i=t.transformState.scale,s=a.disabled,o=!s||i>1||!r||e;return!!o},J0=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,a=t.setup,i=a.disabled,s=a.velocityAnimation,o=t.transformState.scale,l=s.disabled,c=!l||o>1||!i||e;return!(!c||!n||!r)};function tm(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,a=n.animationTime,i=n.sensitivity;return r?a*e*i:a}function Nu(t,e,n,r,a,i,s,o,l,c){if(a){if(e>s&&n>s){var u=s+(t-s)*c;return u>l?l:u<s?s:u}if(e<i&&n<i){var u=i+(t-i)*c;return u<o?o:u>i?i:u}}return r?e:Go(t,i,s,a)}function em(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function rm(t,e){var n=q0(t);if(n){var r=t.lastMousePosition,a=t.velocityTime,i=t.setup,s=t.wrapperComponent,o=i.velocityAnimation.equalToMove,l=Date.now();if(r&&a&&s){var c=em(s,o),u=e.x-r.x,f=e.y-r.y,d=u/c,v=f/c,p=l-a,h=u*u+f*f,g=Math.sqrt(h)/p;t.velocity={velocityX:d,velocityY:v,total:g}}t.lastMousePosition=e,t.velocityTime=l}}function nm(t){var e=t.velocity,n=t.bounds,r=t.setup,a=t.wrapperComponent,i=J0(t);if(!(!i||!e||!n||!a)){var s=e.velocityX,o=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,f=n.maxPositionY,d=n.minPositionY,v=r.limitToBounds,p=r.alignmentAnimation,h=r.zoomAnimation,g=r.panning,m=g.lockAxisY,b=g.lockAxisX,E=h.animationType,C=p.sizeX,x=p.sizeY,S=p.velocityAlignmentTime,w=S,T=tm(t,l),D=Math.max(T,w),k=Aa(t,C),P=Aa(t,x),M=k*a.offsetWidth/100,O=P*a.offsetHeight/100,A=c+M,N=u-M,_=f+O,z=d-O,B=t.transformState,I=new Date().getTime();Ru(t,E,D,function(L){var F=t.transformState,W=F.scale,H=F.positionX,Y=F.positionY,K=new Date().getTime()-I,V=K/w,Q=ku[p.animationType],tt=1-Q(Math.min(1,V)),et=1-L,X=H+s*et,Z=Y+o*et,ot=Nu(X,B.positionX,H,b,v,u,c,N,A,tt),at=Nu(Z,B.positionY,Y,m,v,d,f,z,_,tt);(H!==X||Y!==Z)&&t.setTransformState(W,ot,at)})}}function Lu(t,e){var n=t.transformState.scale;Te(t),Ir(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?$0(t,e):Z0(t,e)}function _u(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,a=n.alignmentAnimation,i=a.disabled,s=a.sizeX,o=a.sizeY,l=a.animationTime,c=a.animationType,u=i||e<r||!s&&!o;if(!u){var f=j0(t);f&&je(t,f,l,c)}}function Bu(t,e,n){var r=t.startCoords,a=t.setup,i=a.alignmentAnimation,s=i.sizeX,o=i.sizeY;if(r){var l=Q0(t,e,n),c=l.x,u=l.y,f=Aa(t,s),d=Aa(t,o);rm(t,{x:c,y:u}),U0(t,c,u,f,d)}}function am(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,a=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var i=r?.getBoundingClientRect(),s=a?.getBoundingClientRect(),o=i?.width||0,l=i?.height||0,c=s?.width||0,u=s?.height||0,f=o<c||l<u,d=!e&&n&&n?.total>.1&&f;d?nm(t):_u(t)}}function Fo(t,e,n,r){var a=t.setup,i=a.minScale,s=a.maxScale,o=a.limitToBounds,l=kn(fe(e,2),i,s,0,!1),c=Ir(t,l),u=Oa(t,n,r,l,c,o),f=u.x,d=u.y;return{scale:l,positionX:f,positionY:d}}function zu(t,e,n){var r=t.transformState.scale,a=t.wrapperComponent,i=t.setup,s=i.minScale,o=i.limitToBounds,l=i.zoomAnimation,c=l.disabled,u=l.animationTime,f=l.animationType,d=c||r>=s;if((r>=1||o)&&_u(t),!(d||!a||!t.mounted)){var v=e||a.offsetWidth/2,p=n||a.offsetHeight/2,h=Fo(t,s,v,p);h&&je(t,h,u,f)}}var ve=function(){return ve=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ve.apply(this,arguments)};function im(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Ko(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Na={previousScale:1,scale:1,positionX:0,positionY:0},Pn={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Iu=function(t){var e,n,r,a;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Na.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Na.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:Na.positionX,positionY:(a=t.initialPositionY)!==null&&a!==void 0?a:Na.positionY}},Gu=function(t){var e=ve({},Pn);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",a=typeof Pn[n]<"u";if(a&&r){var i=Object.prototype.toString.call(Pn[n]),s=i==="[object Object]",o=i==="[object Array]";s?e[n]=ve(ve({},Pn[n]),t[n]):o?e[n]=Ko(Ko([],Pn[n],!0),t[n],!0):e[n]=t[n]}}),e},Fu=function(t,e,n){var r=t.transformState.scale,a=t.wrapperComponent,i=t.setup,s=i.maxScale,o=i.minScale,l=i.zoomAnimation,c=i.smooth,u=l.size;if(!a)throw new Error("Wrapper is not mounted");var f=c?r*Math.exp(e*n):r+e*n,d=kn(fe(f,3),o,s,u,!1);return d};function Ku(t,e,n,r,a){var i=t.wrapperComponent,s=t.transformState,o=s.scale,l=s.positionX,c=s.positionY;if(!i)return console.error("No WrapperComponent found");var u=i.offsetWidth,f=i.offsetHeight,d=(u/2-l)/o,v=(f/2-c)/o,p=Fu(t,e,n),h=Fo(t,p,d,v);if(!h)return console.error("Error during zoom event. New transformation state was not calculated.");je(t,h,r,a)}function Wu(t,e,n,r){var a=t.setup,i=t.wrapperComponent,s=a.limitToBounds,o=Iu(t.props),l=t.transformState,c=l.scale,u=l.positionX,f=l.positionY;if(i){var d=Io(t,o.scale),v=Ra(o.positionX,o.positionY,d,s,0,0,i),p={scale:o.scale,positionX:v.x,positionY:v.y};c===o.scale&&u===o.positionX&&f===o.positionY||(r?.(),je(t,p,e,n))}}function om(t,e,n,r){var a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),o=i.x*r.scale,l=i.y*r.scale;return{x:(a.x-s.x+o)/r.scale,y:(a.y-s.y+l)/r.scale}}function sm(t,e,n){var r=t.wrapperComponent,a=t.contentComponent,i=t.transformState,s=t.setup,o=s.limitToBounds,l=s.minScale,c=s.maxScale;if(!r||!a)return i;var u=r.getBoundingClientRect(),f=e.getBoundingClientRect(),d=om(e,r,a,i),v=d.x,p=d.y,h=f.width/i.scale,g=f.height/i.scale,m=r.offsetWidth/h,b=r.offsetHeight/g,E=kn(n||Math.min(m,b),l,c,0,!1),C=(u.width-h*E)/2,x=(u.height-g*E)/2,S=(u.left-v)*E+C,w=(u.top-p)*E+x,T=Io(t,E),D=Ra(S,w,T,o,0,0,r),k=D.x,P=D.y;return{positionX:k,positionY:P,scale:E}}var lm=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Ku(t,1,e,n,r)}},cm=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Ku(t,-1,e,n,r)}},um=function(t){return function(e,n,r,a,i){a===void 0&&(a=300),i===void 0&&(i="easeOut");var s=t.transformState,o=s.positionX,l=s.positionY,c=s.scale,u=t.wrapperComponent,f=t.contentComponent,d=t.setup.disabled;if(!(d||!u||!f)){var v={positionX:Number.isNaN(e)?o:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};je(t,v,a,i)}}},dm=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),Wu(t,e,n)}},fm=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var a=t.transformState,i=t.wrapperComponent,s=t.contentComponent;if(i&&s){var o=Yu(e||a.scale,i,s);je(t,o,n,r)}}},vm=function(t){return function(e,n,r,a){r===void 0&&(r=600),a===void 0&&(a="easeOut"),Te(t);var i=t.wrapperComponent,s=typeof e=="string"?document.getElementById(e):e;if(i&&s&&i.contains(s)){var o=sm(t,s,n);je(t,o,r,a)}}},La=function(t){return{instance:t,zoomIn:lm(t),zoomOut:cm(t),setTransform:um(t),resetTransform:dm(t),centerView:fm(t),zoomToElement:vm(t)}},_a=function(t){return{instance:t,state:t.transformState}},Et=function(t){var e={};return Object.assign(e,_a(t)),Object.assign(e,La(t)),e},Wo=!1;function Yo(){try{var t={get passive(){return Wo=!0,!1}};return t}catch{return Wo=!1,Wo}}var Ba=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(i){return i.toUpperCase()===n});if(r)return!0;var a=e.find(function(i){return t.classList.contains(i)});return!!a},Xo=function(t){t&&clearTimeout(t)},pm=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},Sb=function(t,e,n){var r=n,a=0,i=0,s=n,o=t,l=e;return"matrix3d(".concat(r,", ").concat(a,", 0, 0, ").concat(i,", ").concat(s,", 0, 0, 0, 0, 1, 0, ").concat(o,", ").concat(l,", 0, 1)")},Yu=function(t,e,n){var r=n.offsetWidth*t,a=n.offsetHeight*t,i=(e.offsetWidth-r)/2,s=(e.offsetHeight-a)/2;return{scale:t,positionX:i,positionY:s}};function hm(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var gm=function(t,e){var n=t.setup.wheel,r=n.disabled,a=n.wheelDisabled,i=n.touchPadDisabled,s=n.excluded,o=t.isInitialized,l=t.isPanning,c=e.target,u=o&&!l&&!r&&c;if(!u||a&&!e.ctrlKey||i&&e.ctrlKey)return!1;var f=Ba(c,s);return!f},mm=function(t){return t?t.deltaY<0?1:-1:0};function ym(t,e){var n=mm(t),r=P0(e,n);return r}function Xu(t,e,n){var r=e.getBoundingClientRect(),a=0,i=0;if("clientX"in t)a=(t.clientX-r.left)/n,i=(t.clientY-r.top)/n;else{var s=t.touches[0];a=(s.clientX-r.left)/n,i=(s.clientY-r.top)/n}return(Number.isNaN(a)||Number.isNaN(i))&&console.error("No mouse or touch offset found"),{x:a,y:i}}var bm=function(t,e,n,r,a){var i=t.transformState.scale,s=t.wrapperComponent,o=t.setup,l=o.maxScale,c=o.minScale,u=o.zoomAnimation,f=o.disablePadding,d=u.size,v=u.disabled;if(!s)throw new Error("Wrapper is not mounted");var p=i+e*n;if(a)return p;var h=r?!1:!v,g=kn(fe(p,3),c,l,d,h&&!f);return g},Em=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,a=t.setup,i=a.maxScale,s=a.minScale;return n?r<i||r>s||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Cm=function(t,e){var n=t.setup.pinch,r=n.disabled,a=n.excluded,i=t.isInitialized,s=e.target,o=i&&!r&&s;if(!o)return!1;var l=Ba(s,a);return!l},Sm=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,a=n&&!e&&r;return!!a},xm=function(t,e,n){var r=n.getBoundingClientRect(),a=t.touches,i=fe(a[0].clientX-r.left,5),s=fe(a[0].clientY-r.top,5),o=fe(a[1].clientX-r.left,5),l=fe(a[1].clientY-r.top,5);return{x:(i+o)/2/e,y:(s+l)/2/e}},Hu=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},wm=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,a=t.setup,i=a.maxScale,s=a.minScale,o=a.zoomAnimation,l=a.disablePadding,c=o.size,u=o.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var f=e/r,d=f*n;return kn(fe(d,2),s,i,c,!u&&!l)},Dm=160,Tm=100,Mm=function(t,e){var n=t.props,r=n.onWheelStart,a=n.onZoomStart;t.wheelStopEventTimer||(Te(t),Tt(Et(t),e,r),Tt(Et(t),e,a))},km=function(t,e){var n=t.props,r=n.onWheel,a=n.onZoom,i=t.contentComponent,s=t.setup,o=t.transformState,l=o.scale,c=s.limitToBounds,u=s.centerZoomedOut,f=s.zoomAnimation,d=s.wheel,v=s.disablePadding,p=s.smooth,h=f.size,g=f.disabled,m=d.step,b=d.smoothStep;if(!i)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var E=ym(e,null),C=p?b*Math.abs(e.deltaY):m,x=bm(t,E,C,!e.ctrlKey);if(l!==x){var S=Ir(t,x),w=Xu(e,i,l),T=g||h===0||u||v,D=c&&T,k=Oa(t,w.x,w.y,x,S,D),P=k.x,M=k.y;t.previousWheelEvent=e,t.setTransformState(x,P,M),Tt(Et(t),e,r),Tt(Et(t),e,a)}},Pm=function(t,e){var n=t.props,r=n.onWheelStop,a=n.onZoomStop;Xo(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(zu(t,e.x,e.y),t.wheelAnimationTimer=null)},Tm);var i=Em(t,e);i&&(Xo(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Tt(Et(t),e,r),Tt(Et(t),e,a))},Dm))},Rm=function(t,e){var n=Hu(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Te(t)},Om=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,a=t.transformState.scale,i=t.setup,s=i.limitToBounds,o=i.centerZoomedOut,l=i.zoomAnimation,c=l.disabled,u=l.size;if(!(r===null||!n)){var f=xm(e,a,n);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var d=Hu(e),v=wm(t,d);if(v!==a){var p=Ir(t,v),h=c||u===0||o,g=s&&h,m=Oa(t,f.x,f.y,v,p,g),b=m.x,E=m.y;t.pinchMidpoint=f,t.lastDistance=d,t.setTransformState(v,b,E)}}}},Am=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,zu(t,e?.x,e?.y)},Vu=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;Xo(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Tt(Et(t),e,n)},r)},Nm=function(t,e){var n=t.props,r=n.onZoomStart,a=n.onZoom,i=t.setup.doubleClick,s=i.animationTime,o=i.animationType;Tt(Et(t),e,r),Wu(t,s,o,function(){return Tt(Et(t),e,a)}),Vu(t,e)};function Lm(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,a=t.transformState,i=t.contentComponent,s=a.scale,o=t.props,l=o.onZoomStart,c=o.onZoom,u=n.doubleClick,f=u.disabled,d=u.mode,v=u.step,p=u.animationTime,h=u.animationType;if(!f&&!r){if(d==="reset")return Nm(t,e);if(!i)return console.error("No ContentComponent found");var g=d==="zoomOut"?-1:1,m=Fu(t,g,v);if(s!==m){Tt(Et(t),e,l);var b=Xu(e,i,s),E=Fo(t,m,b.x,b.y);if(!E)return console.error("Error during zoom event. New transformation state was not calculated.");Tt(Et(t),e,c),je(t,E,p,h),Vu(t,e)}}}var _m=function(t,e){var n=t.isInitialized,r=t.setup,a=t.wrapperComponent,i=r.doubleClick,s=i.disabled,o=i.excluded,l=e.target,c=a?.contains(l),u=n&&l&&c&&!s;if(!u)return!1;var f=Ba(l,o);return!f},Bm=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){Ir(n,n.transformState.scale),n.setup=Gu(r)},this.initializeWindowEvents=function(){var r,a=Yo(),i=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=i?.defaultView;s?.addEventListener("mousedown",n.onPanningStart,a),s?.addEventListener("mousemove",n.onPanning,a),s?.addEventListener("mouseup",n.onPanningStop,a),i?.addEventListener("mouseleave",n.clearPanning,a),s?.addEventListener("keyup",n.setKeyUnPressed,a),s?.addEventListener("keydown",n.setKeyPressed,a)},this.cleanupWindowEvents=function(){var r,a,i=Yo(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s?.defaultView;o?.removeEventListener("mousedown",n.onPanningStart,i),o?.removeEventListener("mousemove",n.onPanning,i),o?.removeEventListener("mouseup",n.onPanningStop,i),s?.removeEventListener("mouseleave",n.clearPanning,i),o?.removeEventListener("keyup",n.setKeyUnPressed,i),o?.removeEventListener("keydown",n.setKeyPressed,i),document.removeEventListener("mouseleave",n.clearPanning,i),Te(n),(a=n.observer)===null||a===void 0||a.disconnect()},this.handleInitializeWrapperEvents=function(r){var a=Yo();r.addEventListener("wheel",n.onWheelZoom,a),r.addEventListener("dblclick",n.onDoubleClick,a),r.addEventListener("touchstart",n.onTouchPanningStart,a),r.addEventListener("touchmove",n.onTouchPanning,a),r.addEventListener("touchend",n.onTouchPanningStop,a)},this.handleInitialize=function(r){var a=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(i){return i(Et(n))}),a&&(n.setCenter(),n.observer=new ResizeObserver(function(){var i;n.onInitCallbacks.forEach(function(s){return s(Et(n))}),n.setCenter(),(i=n.observer)===null||i===void 0||i.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var a=n.setup.disabled;if(!a){var i=gm(n,r);if(i){var s=n.isPressingKeys(n.setup.wheel.activationKeys);s&&(Mm(n,r),km(n,r),Pm(n,r))}}},this.onPanningStart=function(r){var a=n.setup.disabled,i=n.props.onPanningStart;if(!a){var s=Ou(n,r);if(s){var o=n.isPressingKeys(n.setup.panning.activationKeys);o&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),Te(n),Lu(n,r),Tt(Et(n),r,i)))}}},this.onPanning=function(r){var a=n.setup.disabled,i=n.props.onPanning;if(!a){var s=Au(n);if(s){var o=n.isPressingKeys(n.setup.panning.activationKeys);o&&(r.preventDefault(),r.stopPropagation(),Bu(n,r.clientX,r.clientY),Tt(Et(n),r,i))}}},this.onPanningStop=function(r){var a=n.props.onPanningStop;n.isPanning&&(am(n),Tt(Et(n),r,a))},this.onPinchStart=function(r){var a=n.setup.disabled,i=n.props,s=i.onPinchingStart,o=i.onZoomStart;if(!a){var l=Cm(n,r);l&&(Rm(n,r),Te(n),Tt(Et(n),r,s),Tt(Et(n),r,o))}},this.onPinch=function(r){var a=n.setup.disabled,i=n.props,s=i.onPinching,o=i.onZoom;if(!a){var l=Sm(n);l&&(r.preventDefault(),r.stopPropagation(),Om(n,r),Tt(Et(n),r,s),Tt(Et(n),r,o))}},this.onPinchStop=function(r){var a=n.props,i=a.onPinchingStop,s=a.onZoomStop;n.pinchStartScale&&(Am(n),Tt(Et(n),r,i),Tt(Et(n),r,s))},this.onTouchPanningStart=function(r){var a=n.setup.disabled,i=n.props.onPanningStart;if(!a){var s=Ou(n,r);if(s){var o=n.lastTouch&&+new Date-n.lastTouch<200;if(o&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,Te(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(Te(n),Lu(n,r),Tt(Et(n),r,i)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var a=n.setup.disabled,i=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(a)return;var s=Au(n);if(!s)return;r.preventDefault(),r.stopPropagation();var o=r.touches[0];Bu(n,o.clientX,o.clientY),Tt(Et(n),r,i)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var a=n.setup.disabled;if(!a){var i=_m(n,r);i&&Lm(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(a){return n.pressedKeys[a]}):!0},this.setTransformState=function(r,a,i){var s=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(a)&&!Number.isNaN(i)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=a,n.transformState.positionY=i,n.applyTransformation();var o=Et(n);n.onChangeCallbacks.forEach(function(l){return l(o)}),Tt(o,{scale:r,positionX:a,positionY:i},s)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=Yu(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,a,i){return n.props.customTransform?n.props.customTransform(r,a,i):pm(r,a,i)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,a=r.scale,i=r.positionX,s=r.positionY,o=n.handleTransformStyles(i,s,a);n.contentComponent.style.transform=o}},this.getContext=function(){return Et(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,a){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=a,Ir(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(a),n.initializeWindowEvents(),n.isInitialized=!0;var i=Et(n);Tt(i,void 0,n.props.onInit)},this.props=e,this.setup=Gu(this.props),this.transformState=Iu(this.props)}return t}(),za=y.createContext(null),zm=function(t,e){return typeof t=="function"?t(e):t},Im=y.forwardRef(function(t,e){var n=(0,y.useRef)(new Bm(t)).current,r=zm(t.children,La(n));return(0,y.useImperativeHandle)(e,function(){return La(n)},[n]),(0,y.useEffect)(function(){n.update(t)},[n,t]),y.createElement(za.Provider,{value:n},r)}),xb=y.forwardRef(function(t,e){var n=(0,y.useRef)(null),r=(0,y.useContext)(za);return(0,y.useEffect)(function(){return r.onChange(function(a){if(n.current){var i=0,s=0;n.current.style.transform=r.handleTransformStyles(i,s,1/a.instance.transformState.scale)}})},[r]),y.createElement("div",ve({},t,{ref:hm([n,e])}))}),Gm={width:0,height:0,y:0,x:0,top:0,bottom:0,left:0,right:0},Fm=function(t,e,n){var r=useRef(),a=useRef(Gm),i=useRef(!1);useLayoutEffect(function(){var s;return i.current=!1,t&&(r.current=new ResizeObserver(function(o){var l=t.getBoundingClientRect();!Array.isArray(o)||!o.length||i.current||l.width===a.current.width&&l.height===a.current.height||(e(l,t),a.current=l)}),(s=r.current)===null||s===void 0||s.observe(t)),function(){var o;i.current=!0,t&&((o=r.current)===null||o===void 0||o.unobserve(t))}},Ko([e,t],n,!0))},Km={position:"absolute",zIndex:2,top:"0px",left:"0px",boxSizing:"border-box",border:"3px solid red",transformOrigin:"0% 0%",boxShadow:"rgba(0,0,0,0.2) 0 0 0 10000000px"},wb=function(t){var e=t.width,n=e===void 0?200:e,r=t.height,a=r===void 0?200:r,i=t.borderColor,s=i===void 0?"red":i,o=t.children,l=im(t,["width","height","borderColor","children"]),c=useState(!1),u=c[0],f=c[1],d=Ia(),v=useRef(null),p=useRef(null),h=useRef(null),g=useRef(null),m=useCallback(function(){if(d.contentComponent){var T=d.contentComponent.getBoundingClientRect();return{width:T.width/d.transformState.scale,height:T.height/d.transformState.scale}}return{width:0,height:0}},[d.contentComponent,d.transformState.scale]),b=useCallback(function(){var T=m(),D=n/T.width,k=a/T.height,P=k>D?D:k;return P},[m,a,n]),E=function(){var T=m(),D=n/T.width,k=a/T.height;return k>D?{width:n,height:T.height*D}:{width:T.width*k,height:a}},C=function(){var T=b(),D={transform:"scale(".concat(T||1,")"),transformOrigin:"0% 0%",position:"absolute",boxSizing:"border-box",zIndex:1,overflow:"hidden"};Object.keys(D).forEach(function(k){h.current&&(h.current.style[k]=D[k])})},x=function(){C();var T=E(),D=m();if(h.current&&(h.current.style.width="".concat(D.width,"px"),h.current.style.height="".concat(D.height,"px")),p.current&&(p.current.style.width="".concat(T.width,"px"),p.current.style.height="".concat(T.height,"px")),g.current){var k=m(),P=b(),M=P*(1/d.transformState.scale),O=d.handleTransformStyles(-d.transformState.positionX*M,-d.transformState.positionY*M,1);g.current.style.transform=O,g.current.style.width="".concat(k.width*M,"px"),g.current.style.height="".concat(k.height*M,"px")}},S=function(){x()};Vm(function(){x()}),Hm(function(){S(),f(!0)}),Fm(d.contentComponent,S,[u]),useEffect(function(){return d.onChange(function(T){var D=b();v.current&&(v.current.instance.transformState.scale=T.instance.transformState.scale,v.current.instance.transformState.positionX=T.instance.transformState.positionX*D,v.current.instance.transformState.positionY=T.instance.transformState.positionY*D)})},[b,d,v]);var w=useMemo(function(){return{position:"relative",zIndex:2,overflow:"hidden"}},[]);return React.createElement("div",ve({},l,{ref:p,style:w,className:"rzpp-mini-map ".concat(l.className||"")}),React.createElement("div",ve({},l,{ref:h,className:"rzpp-wrapper"}),o),React.createElement("div",{className:"rzpp-preview",ref:g,style:ve(ve({},Km),{borderColor:s})}))};function Wm(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}var Ym=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Zu={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Wm(Ym);var Xm=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,a=t.contentClass,i=a===void 0?"":a,s=t.wrapperStyle,o=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,f=u===void 0?{}:u,d=(0,y.useContext)(za),v=d.init,p=d.cleanupWindowEvents,h=(0,y.useRef)(null),g=(0,y.useRef)(null);return(0,y.useEffect)(function(){var m=h.current,b=g.current;return m!==null&&b!==null&&v&&v?.(m,b),function(){p?.()}},[]),y.createElement("div",ve({},c,{ref:h,className:"react-transform-wrapper ".concat(Zu.wrapper," ").concat(r),style:s}),y.createElement("div",ve({},f,{ref:g,className:"react-transform-component ".concat(Zu.content," ").concat(i),style:o}),e))},Ia=function(){var t=useContext(za);if(!t)throw new Error("Transform context must be placed inside TransformWrapper");return t},Db=function(){var t=Ia();return La(t)},Hm=function(t){var e=Ia();useEffect(function(){var n,r;return e.contentComponent&&e.wrapperComponent?n=t(_a(e)):r=e.onInit(function(a){n=t(_a(a.instance))}),function(){r?.(),n?.()}},[])},Vm=function(t){var e=Ia();useEffect(function(){var n,r=e.onChange(function(a){n=t(_a(a.instance))});return function(){r(),n?.()}},[t,e])};const Zm=({scene:t,children:e})=>{const n=r=>{const a=r.state.scale;t.moveable&&a>0&&(t.moveable.zoom=1/a),t.scale=a};return y.createElement(Im,{doubleClick:{mode:"reset"},ref:t.transformComponentRef,onZoom:n,onTransformed:(r,a)=>{t.scale=a.scale},limitToBounds:!0,disabled:!Je.config.featureToggles.canvasPanelPanZoom||!t.shouldPanZoom,panning:{allowLeftClickPan:!1}},y.createElement(Xm,null,e))},$m=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=(o,l)=>{const c=e.getContainer(),u=new PointerEvent("contextmenu",{clientX:o,clientY:l});c.dispatchEvent(u)},a=o=>{r(o.clientX,o.clientY)},i=o=>{if(o.key==="Enter"){const l=o.currentTarget.getBoundingClientRect();r(l.x,l.y)}},s=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${s.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:a,onKeyDown:i,role:"button",tabIndex:0},"","\u2699\uFE0F","")}}),jm={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},Um=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),a=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let i=null,s=null;const o=a?.tempConstraint??a?.options.constraint??{},l="1px dashed #4af",c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),f=n.createElement("div",{},[c,u]),d=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),v=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),p=n.createElement("div",{},[d,v]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[h,f]);switch(o.vertical){case ut.Top:i=d;break;case ut.Bottom:i=v;break;case ut.TopBottom:i=p;break;case ut.Center:i=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),b=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),E=n.createElement("div",{},[m,b]),C=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),x=n.createElement("div",{},[C,f]);switch(o.horizontal){case st.Left:s=m;break;case st.Right:s=b;break;case st.LeftRight:s=E;break;case st.Center:s=x;break}return n.createElement("div",{},[i,s])}});class Qm extends Jt{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=a=>{this.div=a},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(a=>a.getSaveModel())}}render(){return y.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class qm{constructor(e,n,r,a,i,s){this.onSave=i,this.styles=Jm(le.config.theme2),this.selection=new Rs.t(1),this.moved=new ou.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.scale=1,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.contextMenuOnVisibilityChange=o=>{this.contextMenuVisible=o;const l=Ef(this);l&&(o?l.setup.disabled=!0:l.setup.disabled=!1)},this.isPanelEditing=Os.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new su.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(o=!1)=>{const l=o?"Frame":"Element";let c=this.byName.size+1;const u=c+100;for(;c<u;){const f=`${l} ${c++}`;if(!this.byName.has(f))return f}return`${l} ${Date.now()}`},this.canRename=o=>!this.byName.has(o),this.context={getColor:o=>(0,Mn.FP)(this.data,o),getScale:o=>(0,Mn.pb)(this.data,o),getScalar:o=>(0,Mn.z2)(this.data,o),getText:o=>(0,Mn.WO)(this.data,o),getResource:o=>(0,Mn.Qz)(this.data,o),getPanelData:()=>this.data},this.generateFrameContainer=o=>{let l=1/0,c=1/0,u=0,f=0;return o.forEach(d=>{const v=d.div?.getBoundingClientRect();v&&(l>v.top&&(l=v.top),c>v.left&&(c=v.left),u<v.right&&(u=v.right),f<v.bottom&&(f=v.bottom))}),{top:l,left:c,width:u-c,height:f-l}},this.save=(o=!1)=>{this.onSave(this.root.getSaveModel()),o&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=o=>{const l=[...this.root.elements];for(;l.length>0;){const c=l.shift();if(c&&c.div&&c.div===o)return c;const u=c instanceof Jt?c.elements:[];for(const f of u)l.unshift(f)}},this.setNonTargetPointerEvents=(o,l)=>{const c=[...this.root.elements];for(;c.length>0;){const u=c.shift();u&&u.div&&u.div!==o&&u.applyLayoutStylesToDiv(l);const f=u instanceof Jt?u.elements:[];for(const d of f)c.unshift(d)}},this.setRef=o=>{this.div=o},this.select=o=>{this.selecto&&(this.selecto.setSelectedTargets(o.targets),this.updateSelection(o),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=o=>{if(this.moveable.target=o.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(o.frame)this.selection.next([o.frame]);else{const l=o.targets.map(c=>this.findElementByTarget(c));this.selection.next(l)}},this.generateTargetElements=o=>{let l=[];const c=[...o];for(;c.length>0;){const u=c.shift();u&&u.div&&l.push(u.div);const f=u instanceof Jt?u.elements:[];for(const d of f)c.unshift(d)}return l},this.initMoveable=(o=!1,l=!0)=>{const c=this.generateTargetElements(this.root.elements);o&&this.selecto&&this.selecto.destroy(),this.selecto=new f0({container:this.div,rootContainer:Cf(this),selectableTargets:c,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new Vg(this.div,{draggable:l&&!this.editModeEnabled.getValue(),resizable:l,ables:[jm,Um(this),$m(this)],props:{dimensionViewable:l,constraintViewable:l,settingsViewable:l},origin:!1,className:this.styles.selected}).on("click",f=>{const d=this.findElementByTarget(f.target);let v=!1;d&&(v=d.item.hasEditMode??!1),f.isDouble&&l&&!this.editModeEnabled.getValue()&&v&&this.editModeEnabled.next(!0)}).on("clickGroup",f=>{this.selecto.clickTarget(f.inputEvent,f.inputTarget)}).on("dragStart",f=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(f.target,!0)}).on("dragGroupStart",f=>{this.ignoreDataUpdate=!0}).on("drag",f=>{const d=this.findElementByTarget(f.target);d&&(d.applyDrag(f),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",f=>{let d=!1;for(let v of f.events){const p=this.findElementByTarget(v.target);p&&(p.applyDrag(v),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",f=>{f.events.forEach(d=>{const v=this.findElementByTarget(d.target);v&&v&&v.setPlacementFromConstraint(void 0,void 0,this.scale)}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",f=>{const d=this.findElementByTarget(f.target);d&&d.setPlacementFromConstraint(void 0,void 0,this.scale),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(f.target,!1)}).on("resizeStart",f=>{const d=this.findElementByTarget(f.target);d&&(d.tempConstraint={...d.options.constraint},d.options.constraint={vertical:ut.Top,horizontal:st.Left},d.setPlacementFromConstraint(void 0,void 0,this.scale))}).on("resize",f=>{const d=this.findElementByTarget(f.target);d&&(d.applyResize(f,this.scale),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",f=>{let d=!1;for(let v of f.events){const p=this.findElementByTarget(v.target);p&&(p.applyResize(v),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",f=>{const d=this.findElementByTarget(f.target);d&&(d.tempConstraint&&(d.options.constraint=d.tempConstraint,d.tempConstraint=void 0),d.setPlacementFromConstraint(void 0,void 0,this.scale))});let u=[];this.selecto.on("dragStart",f=>{const d=f.inputEvent.target;if(d.id===Tu){this.connections.handleConnectionDragStart(d,f.inputEvent.clientX,f.inputEvent.clientY),f.stop();return}const v=this.moveable.isMoveableElement(d)||u.some(h=>h===d||h.contains(d)),p=this.selecto?.getSelectedTargets().includes(d.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&v&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(v||p||!this.isEditingEnabled)&&f.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",f=>{u=f.selected,this.updateSelection({targets:u}),f.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),f.inputEvent.preventDefault(),f.data.timer=setTimeout(()=>{this.moveable.dragStart(f.inputEvent)}))}).on("dragEnd",f=>{clearTimeout(f.data.timer)})},this.reorderElements=(o,l,c,u)=>{switch(c){case!0:switch(u){case-1:o.parent instanceof Jt?l.parent&&(this.updateElements(o,l.parent,l.parent.elements.length),o.updateData(l.parent.scene.context)):l.parent?.reorderTree(o,l,!0);break;default:l.parent&&(this.updateElements(o,l.parent,l.parent.elements.indexOf(l)),o.updateData(l.parent.scene.context));break}break;case!1:l instanceof Jt?o.parent===l?o.parent?.reorderTree(o,l,!0):(this.updateElements(o,l),o.updateData(l.scene.context)):o.parent===l.parent?o.parent?.reorderTree(o,l):l.parent&&(this.updateElements(o,l.parent),o.updateData(l.parent.scene.context));break}},this.updateElements=(o,l,c=null)=>{o.parent?.doAction(Ht.Delete,o),o.parent=l;const u=o.div?.getBoundingClientRect();o.setPlacementFromConstraint(u,l.div?.getBoundingClientRect());const f=c??l.elements.length-1;l.elements.splice(f,0,o),l.scene.save(),l.reinitializeMoveable()},this.addToSelection=()=>{try{let o={targets:[]};o.targets=[...this.targetsToSelect],this.select(o)}catch{ys.Z.emit(Zr.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r,a),this.subscription=this.editModeEnabled.subscribe(o=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!o)}),this.panel=s,this.connections=new k0(this),this.transformComponentRef=(0,y.createRef)()}load(e,n,r,a){return this.root=new Qm(e??{type:"frame",elements:[Ja]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,this.shouldPanZoom=a,setTimeout(()=>{if(this.div){const i=n;this.initMoveable(i,n),this.currentLayer=this.root,this.selection.next([]),this.connections.select(void 0),this.connections.updateState()}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,lu.P)()).subscribe(e=>{const n=e[0].parent,r=new Jt({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),a=this.generateFrameContainer(e);r.options.placement=a,e.forEach(i=>{const s=i.div?.getBoundingClientRect();i.setPlacementFromConstraint(s,a),n.doAction(Ht.Delete,i),r.doAction(Ht.Duplicate,i,!1,!1)}),r.setPlacementFromConstraint(a,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=(this.tooltip?.element?.data?.links?.length??0)>0,r=!this.isEditingEnabled&&n,a=y.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef,onMouseDown:i=>{(!this.shouldPanZoom||this.contextMenuVisible)&&(i.button===1||i.button===2&&i.ctrlKey)&&(i.preventDefault(),i.stopPropagation()),!this.contextMenuVisible&&i.button===2&&!i.ctrlKey&&(i.preventDefault(),i.stopPropagation())}},this.connections.render(),this.root.render(),e&&y.createElement(Tn.h_,null,y.createElement(p0,{scene:this,panel:this.panel,onVisibilityChange:this.contextMenuOnVisibilityChange})),r&&y.createElement(Tn.h_,null,y.createElement(E0,{scene:this})));return le.config.featureToggles.canvasPanelPanZoom?y.createElement(Zm,{scene:this},a):a}}const Jm=(0,Ts.B)(t=>({wrap:(0,j.css)`
    overflow: hidden;
    position: relative;
  `,selected:(0,j.css)`
    z-index: 999 !important;
  `}));var $u=G(74642),t1=G(42936);function e1({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[a,i]=(0,y.useState)(r),s=(0,xt.l4)(),o=r1(s,n),l=c=>{c&&(i(c),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Wr.Q8.Fixed,fixed:c}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return y.createElement(Tn.h_,{className:o.portalWrapper},y.createElement(t1.Y,{onChange:l,value:a,mediaType:Ua.MediaType.Image,folderName:Ua.ResourceFolderName.IOT}))}const r1=(t,e)=>({portalWrapper:(0,j.css)({width:"315px",height:"445px",transform:`translate(${e.x}px, ${e.y-200}px)`})});var n1=G(43031),a1=G.n(n1),i1=G(99122),ju=G(39357),Uu=G(9419),o1=G(18072),Ho=G(99940),s1=G(63801),Ga=G(60971);const l1=[{value:ne.Original,label:"Original"},{value:ne.Contain,label:"Contain"},{value:ne.Cover,label:"Cover"},{value:ne.Fill,label:"Fill"},{value:ne.Tile,label:"Tile"}],c1=({value:t,onChange:e})=>{const n=t??ne.Cover,r=(0,y.useCallback)(a=>{e(a)},[e]);return y.createElement(Sr.Z,null,y.createElement(xr._,{grow:!0},y.createElement(us.S,{value:n,options:l1,onChange:r,fullWidth:!0})))},Qu=(t,e)=>e!=="frame"&&e!==void 0?[t+` (${e})`]:[t],Gr={addBackground:(t,e)=>{const n=Qu("Background",e.options?.type);t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:"Color",editor:zt.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:"Image",editor:zt.Lv,settings:{resourceType:"image"}}).addCustomEditor({category:n,id:"background.size",path:"background.size",name:"Image size",editor:c1,settings:{resourceType:"image"}})},addBorder:(t,e)=>{const n=Qu("Border",e.options?.type);t.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),e.options?.border?.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:zt.Lm,settings:{},defaultValue:{fixed:""}})},addColor:(t,e)=>{const n=["Color"];t.addCustomEditor({category:n,id:"color",path:"color",name:"Color",editor:zt.Lm,settings:{},defaultValue:{fixed:""}})},addSize:(t,e)=>{const n=["Size"];t.addCustomEditor({category:n,id:"size",path:"size",name:"Size",editor:zt.cL,settings:{min:1,max:10},defaultValue:{fixed:2,min:1,max:10}})}};var Fa=G(49311),u1=G(13742);const d1=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,xt.wW)(f1(n)),a=()=>{t(ut.Top)},i=()=>{t(ut.Bottom)},s=()=>{t(ut.Center)},o=()=>{e(st.Left)},l=()=>{e(st.Right)},c=()=>{e(st.Center)};return y.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},y.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},y.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),y.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),y.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),y.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),y.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),y.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),y.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),y.createElement("rect",{className:r.constraintHover,onClick:c,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},f1=t=>e=>{const n="#daebf7",r="0.6",a="#0d99ff",i=e.isDark?"#ffffff":"#000000";return{constraintHover:(0,j.css)({"&:hover":{fill:n,fillOpacity:r}}),topConstraint:(0,j.css)({...t.vertical===ut.Top||t.vertical===ut.TopBottom?{width:"92pt",x:"1085",fill:a}:{fill:i}}),bottomConstraint:(0,j.css)({...t.vertical===ut.Bottom||t.vertical===ut.TopBottom?{width:"92pt",x:"1085",fill:a}:{fill:i}}),leftConstraint:(0,j.css)({...t.horizontal===st.Left||t.horizontal===st.LeftRight?{height:"92pt",y:"1014",fill:a}:{fill:i}}),rightConstraint:(0,j.css)({...t.horizontal===st.Right||t.horizontal===st.LeftRight?{height:"92pt",y:"1014",fill:a}:{fill:i}}),horizontalCenterConstraint:(0,j.css)({...t.horizontal===st.Center?{height:"92pt",y:"1014",fill:a}:{fill:i}}),verticalCenterConstraint:(0,j.css)({...t.vertical===ut.Center?{width:"92pt",x:"1085",fill:a}:{fill:i}}),box:(0,j.css)({fill:i})}},v1=({onPositionChange:t,element:e,settings:n})=>{const r=(0,xt.wW)(p1),a=o=>{const l={vertical:ut.Top,horizontal:st.Left},c={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case ie.Top:t(0,"top");break;case ie.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case ie.VerticalCenter:t(i(e.options.placement?.height??0,"v"),"top");break;case ie.Left:t(0,"left");break;case ie.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case ie.HorizontalCenter:t(i(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=c,e.setPlacementFromConstraint()},i=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return y.createElement("div",{className:r.buttonGroup},y.createElement(he.h,{name:"horizontal-align-left",onClick:()=>a(ie.Left),className:r.button,size:"lg",tooltip:"Align left"}),y.createElement(he.h,{name:"horizontal-align-center",onClick:()=>a(ie.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),y.createElement(he.h,{name:"horizontal-align-right",onClick:()=>a(ie.Right),className:r.button,size:"lg",tooltip:"Align right"}),y.createElement(he.h,{name:"vertical-align-top",onClick:()=>a(ie.Top),size:"lg",tooltip:"Align top"}),y.createElement(he.h,{name:"vertical-align-center",onClick:()=>a(ie.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),y.createElement(he.h,{name:"vertical-align-bottom",onClick:()=>a(ie.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},p1=t=>({buttonGroup:(0,j.css)({display:"flex",flexWrap:"wrap",padding:"12px 0 12px 0"}),button:(0,j.css)({marginLeft:"5px",marginRight:"5px"})}),h1=["top","left","bottom","right","width","height"],g1=[{label:"Left",value:st.Left},{label:"Right",value:st.Right},{label:"Left & right",value:st.LeftRight},{label:"Center",value:st.Center},{label:"Scale",value:st.Scale}],m1=[{label:"Top",value:ut.Top},{label:"Bottom",value:ut.Bottom},{label:"Top & bottom",value:ut.TopBottom},{label:"Center",value:ut.Center},{label:"Scale",value:ut.Scale}];function qu({item:t}){const e=t.settings;if((0,Bn.Z)(e?.scene?e.scene.moved:new ou.x),!e)return y.createElement("div",null,"Loading...");const n=e.element;if(!n)return y.createElement("div",null,"???");const{options:r}=n,{placement:a,constraint:i}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=v=>{l(v.value)},l=v=>{n.options.constraint.horizontal=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},c=v=>{u(v.value)},u=v=>{n.options.constraint.vertical=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},f=(v,p)=>{n.options.placement[p]=v??n.options.placement[p],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},d=n.tempConstraint??i??{};return y.createElement("div",null,y.createElement(v1,{onPositionChange:f,settings:e,element:n}),y.createElement("br",null),y.createElement(Hr.g,{label:"Constraints"},y.createElement(pe.Lh,null,y.createElement(d1,{onVerticalConstraintChange:u,onHorizontalConstraintChange:l,currentConstraints:d}),y.createElement(pe.wc,null,y.createElement(pe.Lh,null,y.createElement(Fa.J,{name:"arrows-h"}),y.createElement(Ln.Ph,{options:g1,onChange:o,value:d.horizontal})),y.createElement(pe.Lh,null,y.createElement(Fa.J,{name:"arrows-v"}),y.createElement(Ln.Ph,{options:m1,onChange:c,value:d.vertical}))))),y.createElement("br",null),y.createElement(Hr.g,{label:"Position"},y.createElement(y.Fragment,null,h1.map(v=>{const p=a[v];return p==null?null:y.createElement(Sr.Z,{key:v},y.createElement(xr._,{label:v,labelWidth:8,grow:!0},y.createElement(u1.Y,{value:p,onChange:h=>f(h,v)})))}))))}function Ju(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,Ce.get)(t.element.options,n),onChange:(n,r)=>{let a=t.element.options;if(n==="type"&&r){const i=qr.getIfExists(r);if(!i){console.warn("layer does not exist",r);return}a={...a,...i.getNewOptions(a),type:i.id}}else a=(0,Ga.hs)(a,n,r);t.element.onChange(a),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,a=r?.type?r.type:Ja.type,i=In(t.scene.shouldShowAdvancedTypes,a).options,s=!t.scene.shouldShowAdvancedTypes&&!Fn.filter(v=>v.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:i},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=qr.getIfExists(r?.type??Ja.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const c={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,c),(t.element.item.standardEditorConfig?.layout??!0)&&e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:qu,settings:t}),(t.element.item.standardEditorConfig?.background??!0)&&Gr.addBackground(e,c),(t.element.item.standardEditorConfig?.border??!0)&&Gr.addBorder(e,c)}}}var td=G(29422),Me=G(69454),Rt=G(412),Vo=G(17401),Yt=G(40320),gr=G(74066),ed=G(87970),rd=G(23440),Ue=G(64135),nd=G(42081),ad=G(27221),y1=G(52083),ke=G.n(y1),Fr=G(97058),id=G(10832),Qe=G(24488),Zo=y.createContext(null);function b1(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:a.top=0,a.left=-n*r;break;case 1:a.bottom=0,a.left=-n*r;break;case 0:a.bottom=0,a.left=r;break}return y.createElement("div",{style:a})}function od(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var mr=G(20359),Ka=G(57926),sd=G(63877),E1=G(35023),C1=G(4408),S1=function(e){for(var n=e.prefixCls,r=e.level,a=e.isStart,i=e.isEnd,s="".concat(n,"-indent-unit"),o=[],l=0;l<r;l+=1){var c;o.push(y.createElement("span",{key:l,className:ke()(s,(c={},(0,Rt.Z)(c,"".concat(s,"-start"),a[l]),(0,Rt.Z)(c,"".concat(s,"-end"),i[l]),c))}))}return y.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},o)};const x1=y.memo(S1);function se(t,e){return t[e]}var w1=G(90979),D1=G(62112),T1=["children"];function ld(t,e){return"".concat(t,"-").concat(e)}function M1(t){return t&&t.type&&t.type.isTreeNode}function Rn(t,e){return t??e}function Wa(t){var e=t||{},n=e.title,r=e._title,a=e.key,i=e.children,s=n||"title";return{title:s,_title:r||[s],key:a||"key",children:i||"children"}}function Tb(t,e){var n=new Map;function r(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(a||[]).forEach(function(s){var o=s[e.key],l=s[e.children];warning(o!=null,"Tree node must have a certain key: [".concat(i).concat(o,"]"));var c=String(o);warning(!n.has(c)||o===null||o===void 0,"Same 'key' exist in the Tree: ".concat(c)),n.set(c,!0),r(l,"".concat(i).concat(c," > "))})}r(t)}function k1(t){function e(n){var r=(0,w1.Z)(n);return r.map(function(a){if(!M1(a))return(0,Qe.ZP)(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var i=a.key,s=a.props,o=s.children,l=(0,Ka.Z)(s,T1),c=(0,Yt.Z)({key:i},l),u=e(o);return u.length&&(c.children=u),c}).filter(function(a){return a})}return e(t)}function $o(t,e,n){var r=Wa(n),a=r._title,i=r.key,s=r.children,o=new Set(e===!0?[]:e),l=[];function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(d,v){for(var p=ld(f?f.pos:"0",v),h=Rn(d[i],p),g,m=0;m<a.length;m+=1){var b=a[m];if(d[b]!==void 0){g=d[b];break}}var E=(0,Yt.Z)((0,Yt.Z)({},(0,D1.Z)(d,[].concat((0,gr.Z)(a),[i,s]))),{},{title:g,key:h,parent:f,pos:p,children:null,data:d,isStart:[].concat((0,gr.Z)(f?f.isStart:[]),[v===0]),isEnd:[].concat((0,gr.Z)(f?f.isEnd:[]),[v===u.length-1])});return l.push(E),e===!0||o.has(h)?E.children=c(d[s]||[],E):E.children=[],E})}return c(t),l}function P1(t,e,n){var r={};(0,Vo.Z)(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var a=r,i=a.childrenPropName,s=a.externalGetKey,o=a.fieldNames,l=Wa(o),c=l.key,u=l.children,f=i||u,d;s?typeof s=="string"?d=function(h){return h[s]}:typeof s=="function"&&(d=function(h){return s(h)}):d=function(h,g){return Rn(h[c],g)};function v(p,h,g,m){var b=p?p[f]:t,E=p?ld(g.pos,h):"0",C=p?[].concat((0,gr.Z)(m),[p]):[];if(p){var x=d(p,E),S={node:p,index:h,pos:E,key:x,parentPos:g.node?g.pos:null,level:g.level+1,nodes:C};e(S)}b&&b.forEach(function(w,T){v(w,T,{node:p,pos:E,level:g?g.level+1:-1},C)})}v(null)}function R1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.initWrapper,r=e.processEntity,a=e.onProcessFinished,i=e.externalGetKey,s=e.childrenPropName,o=e.fieldNames,l=arguments.length>2?arguments[2]:void 0,c=i||l,u={},f={},d={posEntities:u,keyEntities:f};return n&&(d=n(d)||d),P1(t,function(v){var p=v.node,h=v.index,g=v.pos,m=v.key,b=v.parentPos,E=v.level,C=v.nodes,x={node:p,nodes:C,index:h,key:m,pos:g,level:E},S=Rn(m,g);u[g]=x,f[S]=x,x.parent=u[b],x.parent&&(x.parent.children=x.parent.children||[],x.parent.children.push(x)),r&&r(x,d)},{externalGetKey:c,childrenPropName:s,fieldNames:o}),a&&a(d),d}function On(t,e){var n=e.expandedKeys,r=e.selectedKeys,a=e.loadedKeys,i=e.loadingKeys,s=e.checkedKeys,o=e.halfCheckedKeys,l=e.dragOverNodeKey,c=e.dropPosition,u=e.keyEntities,f=se(u,t),d={eventKey:t,expanded:n.indexOf(t)!==-1,selected:r.indexOf(t)!==-1,loaded:a.indexOf(t)!==-1,loading:i.indexOf(t)!==-1,checked:s.indexOf(t)!==-1,halfChecked:o.indexOf(t)!==-1,pos:String(f?f.pos:""),dragOver:l===t&&c===0,dragOverGapTop:l===t&&c===-1,dragOverGapBottom:l===t&&c===1};return d}function Bt(t){var e=t.data,n=t.expanded,r=t.selected,a=t.checked,i=t.loaded,s=t.loading,o=t.halfChecked,l=t.dragOver,c=t.dragOverGapTop,u=t.dragOverGapBottom,f=t.pos,d=t.active,v=t.eventKey,p=(0,Yt.Z)((0,Yt.Z)({},e),{},{expanded:n,selected:r,checked:a,loaded:i,loading:s,halfChecked:o,dragOver:l,dragOverGapTop:c,dragOverGapBottom:u,pos:f,active:d,key:v});return"props"in p||Object.defineProperty(p,"props",{get:function(){return(0,Qe.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),p}var O1=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],cd="open",ud="close",A1="---",N1=function(t){(0,nd.Z)(n,t);var e=(0,ad.Z)(n);function n(){var r;(0,ed.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.state={dragNodeHighlight:!1},r.selectHandle=void 0,r.cacheIndent=void 0,r.onSelectorClick=function(o){var l=r.props.context.onNodeClick;l(o,Bt(r.props)),r.isSelectable()?r.onSelect(o):r.onCheck(o)},r.onSelectorDoubleClick=function(o){var l=r.props.context.onNodeDoubleClick;l(o,Bt(r.props))},r.onSelect=function(o){if(!r.isDisabled()){var l=r.props.context.onNodeSelect;l(o,Bt(r.props))}},r.onCheck=function(o){if(!r.isDisabled()){var l=r.props,c=l.disableCheckbox,u=l.checked,f=r.props.context.onNodeCheck;if(!(!r.isCheckable()||c)){var d=!u;f(o,Bt(r.props),d)}}},r.onMouseEnter=function(o){var l=r.props.context.onNodeMouseEnter;l(o,Bt(r.props))},r.onMouseLeave=function(o){var l=r.props.context.onNodeMouseLeave;l(o,Bt(r.props))},r.onContextMenu=function(o){var l=r.props.context.onNodeContextMenu;l(o,Bt(r.props))},r.onDragStart=function(o){var l=r.props.context.onNodeDragStart;o.stopPropagation(),r.setState({dragNodeHighlight:!0}),l(o,(0,Ue.Z)(r));try{o.dataTransfer.setData("text/plain","")}catch{}},r.onDragEnter=function(o){var l=r.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),l(o,(0,Ue.Z)(r))},r.onDragOver=function(o){var l=r.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),l(o,(0,Ue.Z)(r))},r.onDragLeave=function(o){var l=r.props.context.onNodeDragLeave;o.stopPropagation(),l(o,(0,Ue.Z)(r))},r.onDragEnd=function(o){var l=r.props.context.onNodeDragEnd;o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Ue.Z)(r))},r.onDrop=function(o){var l=r.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Ue.Z)(r))},r.onExpand=function(o){var l=r.props,c=l.loading,u=l.context.onNodeExpand;c||u(o,Bt(r.props))},r.setSelectHandle=function(o){r.selectHandle=o},r.getNodeState=function(){var o=r.props.expanded;return r.isLeaf()?null:o?cd:ud},r.hasChildren=function(){var o=r.props.eventKey,l=r.props.context.keyEntities,c=se(l,o)||{},u=c.children;return!!(u||[]).length},r.isLeaf=function(){var o=r.props,l=o.isLeaf,c=o.loaded,u=r.props.context.loadData,f=r.hasChildren();return l===!1?!1:l||!u&&!f||u&&c&&!f},r.isDisabled=function(){var o=r.props.disabled,l=r.props.context.disabled;return!!(l||o)},r.isCheckable=function(){var o=r.props.checkable,l=r.props.context.checkable;return!l||o===!1?!1:l},r.syncLoadData=function(o){var l=o.expanded,c=o.loading,u=o.loaded,f=r.props.context,d=f.loadData,v=f.onNodeLoad;c||d&&l&&!r.isLeaf()&&!r.hasChildren()&&!u&&v(Bt(r.props))},r.isDraggable=function(){var o=r.props,l=o.data,c=o.context.draggable;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(l)))},r.renderDragHandler=function(){var o=r.props.context,l=o.draggable,c=o.prefixCls;return l?.icon?y.createElement("span",{className:"".concat(c,"-draggable-icon")},l.icon):null},r.renderSwitcherIconDom=function(o){var l=r.props.switcherIcon,c=r.props.context.switcherIcon,u=l||c;return typeof u=="function"?u((0,Yt.Z)((0,Yt.Z)({},r.props),{},{isLeaf:o})):u},r.renderSwitcher=function(){var o=r.props.expanded,l=r.props.context.prefixCls;if(r.isLeaf()){var c=r.renderSwitcherIconDom(!0);return c!==!1?y.createElement("span",{className:ke()("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},c):null}var u=ke()("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(o?cd:ud)),f=r.renderSwitcherIconDom(!1);return f!==!1?y.createElement("span",{onClick:r.onExpand,className:u},f):null},r.renderCheckbox=function(){var o=r.props,l=o.checked,c=o.halfChecked,u=o.disableCheckbox,f=r.props.context.prefixCls,d=r.isDisabled(),v=r.isCheckable();if(!v)return null;var p=typeof v!="boolean"?v:null;return y.createElement("span",{className:ke()("".concat(f,"-checkbox"),l&&"".concat(f,"-checkbox-checked"),!l&&c&&"".concat(f,"-checkbox-indeterminate"),(d||u)&&"".concat(f,"-checkbox-disabled")),onClick:r.onCheck},p)},r.renderIcon=function(){var o=r.props.loading,l=r.props.context.prefixCls;return y.createElement("span",{className:ke()("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(r.getNodeState()||"docu"),o&&"".concat(l,"-icon_loading"))})},r.renderSelector=function(){var o=r.state.dragNodeHighlight,l=r.props,c=l.title,u=c===void 0?A1:c,f=l.selected,d=l.icon,v=l.loading,p=l.data,h=r.props.context,g=h.prefixCls,m=h.showIcon,b=h.icon,E=h.loadData,C=h.titleRender,x=r.isDisabled(),S="".concat(g,"-node-content-wrapper"),w;if(m){var T=d||b;w=T?y.createElement("span",{className:ke()("".concat(g,"-iconEle"),"".concat(g,"-icon__customize"))},typeof T=="function"?T(r.props):T):r.renderIcon()}else E&&v&&(w=r.renderIcon());var D;typeof u=="function"?D=u(p):C?D=C(p):D=u;var k=y.createElement("span",{className:"".concat(g,"-title")},D);return y.createElement("span",{ref:r.setSelectHandle,title:typeof u=="string"?u:"",className:ke()("".concat(S),"".concat(S,"-").concat(r.getNodeState()||"normal"),!x&&(f||o)&&"".concat(g,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},w,k,r.renderDropIndicator())},r.renderDropIndicator=function(){var o=r.props,l=o.disabled,c=o.eventKey,u=r.props.context,f=u.draggable,d=u.dropLevelOffset,v=u.dropPosition,p=u.prefixCls,h=u.indent,g=u.dropIndicatorRender,m=u.dragOverNodeKey,b=u.direction,E=!!f,C=!l&&E&&m===c,x=h??r.cacheIndent;return r.cacheIndent=h,C?g({dropPosition:v,dropLevelOffset:d,indent:x,prefixCls:p,direction:b}):null},r}return(0,rd.Z)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var a=this.props.selectable,i=this.props.context.selectable;return typeof a=="boolean"?a:i}},{key:"render",value:function(){var a,i=this.props,s=i.eventKey,o=i.className,l=i.style,c=i.dragOver,u=i.dragOverGapTop,f=i.dragOverGapBottom,d=i.isLeaf,v=i.isStart,p=i.isEnd,h=i.expanded,g=i.selected,m=i.checked,b=i.halfChecked,E=i.loading,C=i.domRef,x=i.active,S=i.data,w=i.onMouseMove,T=i.selectable,D=(0,Ka.Z)(i,O1),k=this.props.context,P=k.prefixCls,M=k.filterTreeNode,O=k.keyEntities,A=k.dropContainerKey,N=k.dropTargetKey,_=k.draggingNodeKey,z=this.isDisabled(),B=(0,id.Z)(D,{aria:!0,data:!0}),I=se(O,s)||{},L=I.level,F=p[p.length-1],W=this.isDraggable(),H=!z&&W,Y=_===s,K=T!==void 0?{"aria-selected":!!T}:void 0;return y.createElement("div",(0,Me.Z)({ref:C,className:ke()(o,"".concat(P,"-treenode"),(a={},(0,Rt.Z)(a,"".concat(P,"-treenode-disabled"),z),(0,Rt.Z)(a,"".concat(P,"-treenode-switcher-").concat(h?"open":"close"),!d),(0,Rt.Z)(a,"".concat(P,"-treenode-checkbox-checked"),m),(0,Rt.Z)(a,"".concat(P,"-treenode-checkbox-indeterminate"),b),(0,Rt.Z)(a,"".concat(P,"-treenode-selected"),g),(0,Rt.Z)(a,"".concat(P,"-treenode-loading"),E),(0,Rt.Z)(a,"".concat(P,"-treenode-active"),x),(0,Rt.Z)(a,"".concat(P,"-treenode-leaf-last"),F),(0,Rt.Z)(a,"".concat(P,"-treenode-draggable"),W),(0,Rt.Z)(a,"dragging",Y),(0,Rt.Z)(a,"drop-target",N===s),(0,Rt.Z)(a,"drop-container",A===s),(0,Rt.Z)(a,"drag-over",!z&&c),(0,Rt.Z)(a,"drag-over-gap-top",!z&&u),(0,Rt.Z)(a,"drag-over-gap-bottom",!z&&f),(0,Rt.Z)(a,"filter-node",M&&M(Bt(this.props))),a)),style:l,draggable:H,"aria-grabbed":Y,onDragStart:H?this.onDragStart:void 0,onDragEnter:W?this.onDragEnter:void 0,onDragOver:W?this.onDragOver:void 0,onDragLeave:W?this.onDragLeave:void 0,onDrop:W?this.onDrop:void 0,onDragEnd:W?this.onDragEnd:void 0,onMouseMove:w},K,B),y.createElement(x1,{prefixCls:P,level:L,isStart:v,isEnd:p}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(y.Component),jo=function(e){return y.createElement(Zo.Consumer,null,function(n){return y.createElement(N1,(0,Me.Z)({},e,{context:n}))})};jo.displayName="TreeNode",jo.isTreeNode=1;const Uo=jo;function L1(t,e){var n=y.useState(!1),r=(0,mr.Z)(n,2),a=r[0],i=r[1];y.useLayoutEffect(function(){if(a)return t(),function(){e()}},[a]),y.useLayoutEffect(function(){return i(!0),function(){i(!1)}},[])}var _1=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],dd=function(e,n){var r=e.className,a=e.style,i=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,c=e.onMotionEnd,u=e.active,f=e.treeNodeRequiredProps,d=(0,Ka.Z)(e,_1),v=y.useState(!0),p=(0,mr.Z)(v,2),h=p[0],g=p[1],m=y.useContext(Zo),b=m.prefixCls,E=s&&o!=="hide";(0,sd.Z)(function(){s&&E!==h&&g(E)},[s]);var C=function(){s&&l()},x=y.useRef(!1),S=function(){s&&!x.current&&(x.current=!0,c())};L1(C,S);var w=function(D){E===D&&S()};return s?y.createElement(C1.Z,(0,Me.Z)({ref:n,visible:h},i,{motionAppear:o==="show",onVisibleChanged:w}),function(T,D){var k=T.className,P=T.style;return y.createElement("div",{ref:D,className:ke()("".concat(b,"-treenode-motion"),k),style:P},s.map(function(M){var O=(0,Me.Z)({},(od(M.data),M.data)),A=M.title,N=M.key,_=M.isStart,z=M.isEnd;delete O.children;var B=On(N,f);return y.createElement(Uo,(0,Me.Z)({},O,B,{title:A,active:u,data:M.data,key:N,isStart:_,isEnd:z}))}))}):y.createElement(Uo,(0,Me.Z)({domRef:n,className:r,style:a},d,{active:u}))};dd.displayName="MotionTreeNode";var B1=y.forwardRef(dd);const z1=B1;function I1(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function a(i,s){var o=new Map;i.forEach(function(c){o.set(c,!0)});var l=s.filter(function(c){return!o.has(c)});return l.length===1?l[0]:null}return n<r?{add:!0,key:a(t,e)}:{add:!1,key:a(e,t)}}function fd(t,e,n){var r=t.findIndex(function(o){return o.key===n}),a=t[r+1],i=e.findIndex(function(o){return o.key===n});if(a){var s=e.findIndex(function(o){return o.key===a.key});return e.slice(i+1,s)}return e.slice(i+1)}var G1=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],vd={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},F1=function(){},yr="RC_TREE_MOTION_".concat(Math.random()),Qo={key:yr},pd={key:yr,level:0,index:0,pos:"0",node:Qo,nodes:[Qo]},hd={parent:null,children:[],pos:pd.pos,data:Qo,title:null,key:yr,isStart:[],isEnd:[]};function gd(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function md(t){var e=t.key,n=t.pos;return Rn(e,n)}function K1(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var yd=y.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,a=t.selectable,i=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,c=t.loadedKeys,u=t.loadingKeys,f=t.halfCheckedKeys,d=t.keyEntities,v=t.disabled,p=t.dragging,h=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,b=t.height,E=t.itemHeight,C=t.virtual,x=t.focusable,S=t.activeItem,w=t.focused,T=t.tabIndex,D=t.onKeyDown,k=t.onFocus,P=t.onBlur,M=t.onActiveChange,O=t.onListChangeStart,A=t.onListChangeEnd,N=(0,Ka.Z)(t,G1),_=y.useRef(null),z=y.useRef(null);y.useImperativeHandle(e,function(){return{scrollTo:function(yt){_.current.scrollTo(yt)},getIndentWidth:function(){return z.current.offsetWidth}}});var B=y.useState(s),I=(0,mr.Z)(B,2),L=I[0],F=I[1],W=y.useState(r),H=(0,mr.Z)(W,2),Y=H[0],K=H[1],V=y.useState(r),Q=(0,mr.Z)(V,2),tt=Q[0],et=Q[1],X=y.useState([]),Z=(0,mr.Z)(X,2),ot=Z[0],at=Z[1],At=y.useState(null),vt=(0,mr.Z)(At,2),dt=vt[0],gt=vt[1],it=y.useRef(r);it.current=r;function lt(){var ht=it.current;K(ht),et(ht),at([]),gt(null),A()}(0,sd.Z)(function(){F(s);var ht=I1(L,s);if(ht.key!==null)if(ht.add){var yt=Y.findIndex(function(Cr){var Re=Cr.key;return Re===ht.key}),wt=gd(fd(Y,r,ht.key),C,b,E),Qt=Y.slice();Qt.splice(yt+1,0,hd),et(Qt),at(wt),gt("show")}else{var re=r.findIndex(function(Cr){var Re=Cr.key;return Re===ht.key}),Pe=gd(fd(r,Y,ht.key),C,b,E),Er=r.slice();Er.splice(re+1,0,hd),et(Er),at(Pe),gt("hide")}else Y!==r&&(K(r),et(r))},[s,r]),y.useEffect(function(){p||lt()},[p]);var ft=m?tt:r,Xt={expandedKeys:s,selectedKeys:o,loadedKeys:c,loadingKeys:u,checkedKeys:l,halfCheckedKeys:f,dragOverNodeKey:h,dropPosition:g,keyEntities:d};return y.createElement(y.Fragment,null,w&&S&&y.createElement("span",{style:vd,"aria-live":"assertive"},K1(S)),y.createElement("div",null,y.createElement("input",{style:vd,disabled:x===!1||v,tabIndex:x!==!1?T:null,onKeyDown:D,onFocus:k,onBlur:P,value:"",onChange:F1,"aria-label":"for screen reader"})),y.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},y.createElement("div",{className:"".concat(n,"-indent")},y.createElement("div",{ref:z,className:"".concat(n,"-indent-unit")}))),y.createElement(E1.Z,(0,Me.Z)({},N,{data:ft,itemKey:md,height:b,fullHeight:!1,virtual:C,itemHeight:E,prefixCls:"".concat(n,"-list"),ref:_,onVisibleChange:function(yt,wt){var Qt=new Set(yt),re=wt.filter(function(Pe){return!Qt.has(Pe)});re.some(function(Pe){return md(Pe)===yr})&&lt()}}),function(ht){var yt=ht.pos,wt=(0,Me.Z)({},(od(ht.data),ht.data)),Qt=ht.title,re=ht.key,Pe=ht.isStart,Er=ht.isEnd,Cr=Rn(re,yt);delete wt.key,delete wt.children;var Re=On(Cr,Xt);return y.createElement(z1,(0,Me.Z)({},wt,Re,{title:Qt,active:!!S&&re===S.key,pos:yt,data:ht.data,isStart:Pe,isEnd:Er,motion:m,motionNodes:re===yr?ot:null,motionType:dt,onMotionStart:O,onMotionEnd:lt,treeNodeRequiredProps:Xt,onMouseMove:function(){M(null)}}))}))});yd.displayName="NodeList";const W1=yd;var Y1=null;function Be(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function qe(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function qo(t){return t.split("-")}function X1(t,e){var n=[],r=se(e,t);function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(s){var o=s.key,l=s.children;n.push(o),a(l)})}return a(r.children),n}function H1(t){if(t.parent){var e=qo(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function V1(t){var e=qo(t.pos);return Number(e[e.length-1])===0}function bd(t,e,n,r,a,i,s,o,l,c){var u,f=t.clientX,d=t.clientY,v=t.target.getBoundingClientRect(),p=v.top,h=v.height,g=(c==="rtl"?-1:1)*((a?.x||0)-f),m=(g-12)/r,b=se(o,n.props.eventKey);if(d<p+h/2){var E=s.findIndex(function(N){return N.key===b.key}),C=E<=0?0:E-1,x=s[C].key;b=se(o,x)}var S=b.key,w=b,T=b.key,D=0,k=0;if(!l.includes(S))for(var P=0;P<m&&H1(b);P+=1)b=b.parent,k+=1;var M=e.props.data,O=b.node,A=!0;return V1(b)&&b.level===0&&d<p+h/2&&i({dragNode:M,dropNode:O,dropPosition:-1})&&b.key===n.props.eventKey?D=-1:(w.children||[]).length&&l.includes(T)?i({dragNode:M,dropNode:O,dropPosition:0})?D=0:A=!1:k===0?m>-1.5?i({dragNode:M,dropNode:O,dropPosition:1})?D=1:A=!1:i({dragNode:M,dropNode:O,dropPosition:0})?D=0:i({dragNode:M,dropNode:O,dropPosition:1})?D=1:A=!1:i({dragNode:M,dropNode:O,dropPosition:1})?D=1:A=!1,{dropPosition:D,dropLevelOffset:k,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:T,dropContainerKey:D===0?null:((u=b.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:A}}function Ed(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var Z1=function(e){return e};function $1(t,e){if(!t)return[];var n=e||{},r=n.processProps,a=r===void 0?Z1:r,i=Array.isArray(t)?t:[t];return i.map(function(s){var o=s.children,l=_objectWithoutProperties(s,Y1),c=$1(o,e);return React.createElement(TreeNode,_extends({key:l.key},a(l)),c)})}function Jo(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,Vo.Z)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,Qe.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return e}function Cd(t,e){var n=new Set;function r(a){if(!n.has(a)){var i=se(e,a);if(i){n.add(a);var s=i.parent,o=i.node;o.disabled||s&&r(s.key)}}}return(t||[]).forEach(function(a){r(a)}),(0,gr.Z)(n)}function Sd(t,e){var n=new Set;return t.forEach(function(r){e.has(r)||n.add(r)}),n}function j1(t){var e=t||{},n=e.disabled,r=e.disableCheckbox,a=e.checkable;return!!(n||r)||a===!1}function U1(t,e,n,r){for(var a=new Set(t),i=new Set,s=0;s<=n;s+=1){var o=e.get(s)||new Set;o.forEach(function(f){var d=f.key,v=f.node,p=f.children,h=p===void 0?[]:p;a.has(d)&&!r(v)&&h.filter(function(g){return!r(g.node)}).forEach(function(g){a.add(g.key)})})}for(var l=new Set,c=n;c>=0;c-=1){var u=e.get(c)||new Set;u.forEach(function(f){var d=f.parent,v=f.node;if(!(r(v)||!f.parent||l.has(f.parent.key))){if(r(f.parent.node)){l.add(d.key);return}var p=!0,h=!1;(d.children||[]).filter(function(g){return!r(g.node)}).forEach(function(g){var m=g.key,b=a.has(m);p&&!b&&(p=!1),!h&&(b||i.has(m))&&(h=!0)}),p&&a.add(d.key),h&&i.add(d.key),l.add(d.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Sd(i,a))}}function Q1(t,e,n,r,a){for(var i=new Set(t),s=new Set(e),o=0;o<=r;o+=1){var l=n.get(o)||new Set;l.forEach(function(d){var v=d.key,p=d.node,h=d.children,g=h===void 0?[]:h;!i.has(v)&&!s.has(v)&&!a(p)&&g.filter(function(m){return!a(m.node)}).forEach(function(m){i.delete(m.key)})})}s=new Set;for(var c=new Set,u=r;u>=0;u-=1){var f=n.get(u)||new Set;f.forEach(function(d){var v=d.parent,p=d.node;if(!(a(p)||!d.parent||c.has(d.parent.key))){if(a(d.parent.node)){c.add(v.key);return}var h=!0,g=!1;(v.children||[]).filter(function(m){return!a(m.node)}).forEach(function(m){var b=m.key,E=i.has(b);h&&!E&&(h=!1),!g&&(E||s.has(b))&&(g=!0)}),h||i.delete(v.key),g&&s.add(v.key),c.add(v.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(Sd(s,i))}}function ts(t,e,n,r){var a=[],i;r?i=r:i=j1;var s=new Set(t.filter(function(u){var f=!!se(n,u);return f||a.push(u),f})),o=new Map,l=0;Object.keys(n).forEach(function(u){var f=n[u],d=f.level,v=o.get(d);v||(v=new Set,o.set(d,v)),v.add(f),l=Math.max(l,d)}),(0,Qe.ZP)(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var c;return e===!0?c=U1(s,o,l,i):c=Q1(s,e.halfCheckedKeys,o,l,i),c}var q1=10,es=function(t){(0,nd.Z)(n,t);var e=(0,ad.Z)(n);function n(){var r;(0,ed.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Wa()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=y.createRef(),r.onNodeDragStart=function(o,l){var c=r.state,u=c.expandedKeys,f=c.keyEntities,d=r.props.onDragStart,v=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var p=Be(u,v);r.setState({draggingNodeKey:v,dragChildrenKeys:X1(v,f),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(p),window.addEventListener("dragend",r.onWindowDragEnd),d?.({event:o,node:Bt(l.props)})},r.onNodeDragEnter=function(o,l){var c=r.state,u=c.expandedKeys,f=c.keyEntities,d=c.dragChildrenKeys,v=c.flattenNodes,p=c.indent,h=r.props,g=h.onDragEnter,m=h.onExpand,b=h.allowDrop,E=h.direction,C=l.props,x=C.pos,S=C.eventKey,w=(0,Ue.Z)(r),T=w.dragNode;if(r.currentMouseOverDroppableNodeKey!==S&&(r.currentMouseOverDroppableNodeKey=S),!T){r.resetDragState();return}var D=bd(o,T,l,p,r.dragStartMousePosition,b,v,f,u,E),k=D.dropPosition,P=D.dropLevelOffset,M=D.dropTargetKey,O=D.dropContainerKey,A=D.dropTargetPos,N=D.dropAllowed,_=D.dragOverNodeKey;if(d.indexOf(M)!==-1||!N){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(z){clearTimeout(r.delayedDragEnterLogic[z])}),T.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[x]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var z=(0,gr.Z)(u),B=se(f,l.props.eventKey);B&&(B.children||[]).length&&(z=qe(u,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(z),m?.(z,{node:Bt(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),T.props.eventKey===M&&P===0){r.resetDragState();return}r.setState({dragOverNodeKey:_,dropPosition:k,dropLevelOffset:P,dropTargetKey:M,dropContainerKey:O,dropTargetPos:A,dropAllowed:N}),g?.({event:o,node:Bt(l.props),expandedKeys:u})},r.onNodeDragOver=function(o,l){var c=r.state,u=c.dragChildrenKeys,f=c.flattenNodes,d=c.keyEntities,v=c.expandedKeys,p=c.indent,h=r.props,g=h.onDragOver,m=h.allowDrop,b=h.direction,E=(0,Ue.Z)(r),C=E.dragNode;if(C){var x=bd(o,C,l,p,r.dragStartMousePosition,m,f,d,v,b),S=x.dropPosition,w=x.dropLevelOffset,T=x.dropTargetKey,D=x.dropContainerKey,k=x.dropAllowed,P=x.dropTargetPos,M=x.dragOverNodeKey;u.indexOf(T)!==-1||!k||(C.props.eventKey===T&&w===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():S===r.state.dropPosition&&w===r.state.dropLevelOffset&&T===r.state.dropTargetKey&&D===r.state.dropContainerKey&&P===r.state.dropTargetPos&&k===r.state.dropAllowed&&M===r.state.dragOverNodeKey||r.setState({dropPosition:S,dropLevelOffset:w,dropTargetKey:T,dropContainerKey:D,dropTargetPos:P,dropAllowed:k,dragOverNodeKey:M}),g?.({event:o,node:Bt(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var c=r.props.onDragLeave;c?.({event:o,node:Bt(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var c=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),c?.({event:o,node:Bt(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=r.state,d=f.dragChildrenKeys,v=f.dropPosition,p=f.dropTargetKey,h=f.dropTargetPos,g=f.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),p!==null){var b=(0,Yt.Z)((0,Yt.Z)({},On(p,r.getTreeNodeRequiredProps())),{},{active:((c=r.getActiveItem())===null||c===void 0?void 0:c.key)===p,data:se(r.state.keyEntities,p).node}),E=d.indexOf(p)!==-1;(0,Qe.ZP)(!E,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=qo(h),x={event:o,node:Bt(b),dragNode:r.dragNode?Bt(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(d),dropToGap:v!==0,dropPosition:v+Number(C[C.length-1])};u||m?.(x),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var c=r.state,u=c.expandedKeys,f=c.flattenNodes,d=l.expanded,v=l.key,p=l.isLeaf;if(!(p||o.shiftKey||o.metaKey||o.ctrlKey)){var h=f.filter(function(m){return m.key===v})[0],g=Bt((0,Yt.Z)((0,Yt.Z)({},On(v,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(d?Be(u,v):qe(u,v)),r.onNodeExpand(o,g)}},r.onNodeClick=function(o,l){var c=r.props,u=c.onClick,f=c.expandAction;f==="click"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeDoubleClick=function(o,l){var c=r.props,u=c.onDoubleClick,f=c.expandAction;f==="doubleClick"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeSelect=function(o,l){var c=r.state.selectedKeys,u=r.state,f=u.keyEntities,d=u.fieldNames,v=r.props,p=v.onSelect,h=v.multiple,g=l.selected,m=l[d.key],b=!g;b?h?c=qe(c,m):c=[m]:c=Be(c,m);var E=c.map(function(C){var x=se(f,C);return x?x.node:null}).filter(function(C){return C});r.setUncontrolledState({selectedKeys:c}),p?.(c,{event:"select",selected:b,node:l,selectedNodes:E,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,c){var u=r.state,f=u.keyEntities,d=u.checkedKeys,v=u.halfCheckedKeys,p=r.props,h=p.checkStrictly,g=p.onCheck,m=l.key,b,E={event:"check",node:l,checked:c,nativeEvent:o.nativeEvent};if(h){var C=c?qe(d,m):Be(d,m),x=Be(v,m);b={checked:C,halfChecked:x},E.checkedNodes=C.map(function(P){return se(f,P)}).filter(function(P){return P}).map(function(P){return P.node}),r.setUncontrolledState({checkedKeys:C})}else{var S=ts([].concat((0,gr.Z)(d),[m]),!0,f),w=S.checkedKeys,T=S.halfCheckedKeys;if(!c){var D=new Set(w);D.delete(m);var k=ts(Array.from(D),{checked:!1,halfCheckedKeys:T},f);w=k.checkedKeys,T=k.halfCheckedKeys}b=w,E.checkedNodes=[],E.checkedNodesPositions=[],E.halfCheckedKeys=T,w.forEach(function(P){var M=se(f,P);if(M){var O=M.node,A=M.pos;E.checkedNodes.push(O),E.checkedNodesPositions.push({node:O,pos:A})}}),r.setUncontrolledState({checkedKeys:w},!1,{halfCheckedKeys:T})}g?.(b,E)},r.onNodeLoad=function(o){var l=o.key,c=new Promise(function(u,f){r.setState(function(d){var v=d.loadedKeys,p=v===void 0?[]:v,h=d.loadingKeys,g=h===void 0?[]:h,m=r.props,b=m.loadData,E=m.onLoad;if(!b||p.indexOf(l)!==-1||g.indexOf(l)!==-1)return null;var C=b(o);return C.then(function(){var x=r.state.loadedKeys,S=qe(x,l);E?.(S,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:S}),r.setState(function(w){return{loadingKeys:Be(w.loadingKeys,l)}}),u()}).catch(function(x){if(r.setState(function(w){return{loadingKeys:Be(w.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=q1){var S=r.state.loadedKeys;(0,Qe.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:qe(S,l)}),u()}f(x)}),{loadingKeys:qe(g,l)}})});return c.catch(function(){}),c},r.onNodeMouseEnter=function(o,l){var c=r.props.onMouseEnter;c?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var c=r.props.onMouseLeave;c?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var c=r.props.onRightClick;c&&(o.preventDefault(),c({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,c=o.selectedKeys,u=o.loadedKeys,f=o.loadingKeys,d=o.checkedKeys,v=o.halfCheckedKeys,p=o.dragOverNodeKey,h=o.dropPosition,g=o.keyEntities;return{expandedKeys:l||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:f||[],checkedKeys:d||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:h,keyEntities:g}},r.setExpandedKeys=function(o){var l=r.state,c=l.treeData,u=l.fieldNames,f=$o(c,o,u);r.setUncontrolledState({expandedKeys:o,flattenNodes:f},!0)},r.onNodeExpand=function(o,l){var c=r.state.expandedKeys,u=r.state,f=u.listChanging,d=u.fieldNames,v=r.props,p=v.onExpand,h=v.loadData,g=l.expanded,m=l[d.key];if(!f){var b=c.indexOf(m),E=!g;if((0,Qe.ZP)(g&&b!==-1||!g&&b===-1,"Expand state not sync with index check"),E?c=qe(c,m):c=Be(c,m),r.setExpandedKeys(c),p?.(c,{node:l,expanded:E,nativeEvent:o.nativeEvent}),E&&h){var C=r.onNodeLoad(l);C&&C.then(function(){var x=$o(r.state.treeData,c,d);r.setUncontrolledState({flattenNodes:x})}).catch(function(){var x=r.state.expandedKeys,S=Be(x,m);r.setExpandedKeys(S)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,c=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),c?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,c=o.flattenNodes;return l===null?null:c.find(function(u){var f=u.key;return f===l})||null},r.offsetActiveKey=function(o){var l=r.state,c=l.flattenNodes,u=l.activeKey,f=c.findIndex(function(p){var h=p.key;return h===u});f===-1&&o<0&&(f=c.length),f=(f+o+c.length)%c.length;var d=c[f];if(d){var v=d.key;r.onActiveChange(v)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,c=l.activeKey,u=l.expandedKeys,f=l.checkedKeys,d=l.fieldNames,v=r.props,p=v.onKeyDown,h=v.checkable,g=v.selectable;switch(o.which){case Fr.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case Fr.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var b=r.getTreeNodeRequiredProps(),E=m.data.isLeaf===!1||!!(m.data[d.children]||[]).length,C=Bt((0,Yt.Z)((0,Yt.Z)({},On(c,b)),{},{data:m.data,active:!0}));switch(o.which){case Fr.Z.LEFT:{E&&u.includes(c)?r.onNodeExpand({},C):m.parent&&r.onActiveChange(m.parent.key),o.preventDefault();break}case Fr.Z.RIGHT:{E&&!u.includes(c)?r.onNodeExpand({},C):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),o.preventDefault();break}case Fr.Z.ENTER:case Fr.Z.SPACE:{h&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?r.onNodeCheck({},C,!f.includes(c)):!h&&g&&!C.disabled&&C.selectable!==!1&&r.onNodeSelect({},C);break}}}p?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var u=!1,f=!0,d={};Object.keys(o).forEach(function(v){if(v in r.props){f=!1;return}u=!0,d[v]=o[v]}),u&&(!l||f)&&r.setState((0,Yt.Z)((0,Yt.Z)({},d),c))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,rd.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props,i=a.activeKey,s=a.itemScrollOffset,o=s===void 0?0:s;i!==void 0&&i!==this.state.activeKey&&(this.setState({activeKey:i}),i!==null&&this.scrollTo({key:i,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a,i=this.state,s=i.focused,o=i.flattenNodes,l=i.keyEntities,c=i.draggingNodeKey,u=i.activeKey,f=i.dropLevelOffset,d=i.dropContainerKey,v=i.dropTargetKey,p=i.dropPosition,h=i.dragOverNodeKey,g=i.indent,m=this.props,b=m.prefixCls,E=m.className,C=m.style,x=m.showLine,S=m.focusable,w=m.tabIndex,T=w===void 0?0:w,D=m.selectable,k=m.showIcon,P=m.icon,M=m.switcherIcon,O=m.draggable,A=m.checkable,N=m.checkStrictly,_=m.disabled,z=m.motion,B=m.loadData,I=m.filterTreeNode,L=m.height,F=m.itemHeight,W=m.virtual,H=m.titleRender,Y=m.dropIndicatorRender,K=m.onContextMenu,V=m.onScroll,Q=m.direction,tt=m.rootClassName,et=m.rootStyle,X=(0,id.Z)(this.props,{aria:!0,data:!0}),Z;return O&&((0,Vo.Z)(O)==="object"?Z=O:typeof O=="function"?Z={nodeDraggable:O}:Z={}),y.createElement(Zo.Provider,{value:{prefixCls:b,selectable:D,showIcon:k,icon:P,switcherIcon:M,draggable:Z,draggingNodeKey:c,checkable:A,checkStrictly:N,disabled:_,keyEntities:l,dropLevelOffset:f,dropContainerKey:d,dropTargetKey:v,dropPosition:p,dragOverNodeKey:h,indent:g,direction:Q,dropIndicatorRender:Y,loadData:B,filterTreeNode:I,titleRender:H,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},y.createElement("div",{role:"tree",className:ke()(b,E,tt,(a={},(0,Rt.Z)(a,"".concat(b,"-show-line"),x),(0,Rt.Z)(a,"".concat(b,"-focused"),s),(0,Rt.Z)(a,"".concat(b,"-active-focused"),u!==null),a)),style:et},y.createElement(W1,(0,Me.Z)({ref:this.listRef,prefixCls:b,style:C,data:o,disabled:_,selectable:D,checkable:!!A,motion:z,dragging:c!==null,height:L,itemHeight:F,virtual:W,focusable:S,focused:s,tabIndex:T,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:K,onScroll:V},this.getTreeNodeRequiredProps(),X))))}}],[{key:"getDerivedStateFromProps",value:function(a,i){var s=i.prevProps,o={prevProps:a};function l(S){return!s&&S in a||s&&s[S]!==a[S]}var c,u=i.fieldNames;if(l("fieldNames")&&(u=Wa(a.fieldNames),o.fieldNames=u),l("treeData")?c=a.treeData:l("children")&&((0,Qe.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=k1(a.children)),c){o.treeData=c;var f=R1(c,{fieldNames:u});o.keyEntities=(0,Yt.Z)((0,Rt.Z)({},yr,pd),f.keyEntities)}var d=o.keyEntities||i.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!s&&a.defaultExpandParent?Cd(a.expandedKeys,d):a.expandedKeys;else if(!s&&a.defaultExpandAll){var v=(0,Yt.Z)({},d);delete v[yr],o.expandedKeys=Object.keys(v).map(function(S){return v[S].key})}else!s&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?Cd(a.defaultExpandedKeys,d):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,c||o.expandedKeys){var p=$o(c||i.treeData,o.expandedKeys||i.expandedKeys,u);o.flattenNodes=p}if(a.selectable&&(l("selectedKeys")?o.selectedKeys=Ed(a.selectedKeys,a):!s&&a.defaultSelectedKeys&&(o.selectedKeys=Ed(a.defaultSelectedKeys,a))),a.checkable){var h;if(l("checkedKeys")?h=Jo(a.checkedKeys)||{}:!s&&a.defaultCheckedKeys?h=Jo(a.defaultCheckedKeys)||{}:c&&(h=Jo(a.checkedKeys)||{checkedKeys:i.checkedKeys,halfCheckedKeys:i.halfCheckedKeys}),h){var g=h,m=g.checkedKeys,b=m===void 0?[]:m,E=g.halfCheckedKeys,C=E===void 0?[]:E;if(!a.checkStrictly){var x=ts(b,!0,d);b=x.checkedKeys,C=x.halfCheckedKeys}o.checkedKeys=b,o.halfCheckedKeys=C}}return l("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),n}(y.Component);es.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:b1,allowDrop:function(){return!0},expandAction:!1},es.TreeNode=Uo;const J1=es;function ty(t){return(0,td.css)`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.radius.default};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}var ey=G(958);const ry=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,a=e.dataRef.getName(),i=(0,xt.wW)(ny),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=v=>{(v.parent??s).doAction(Ht.Delete,v),n(!1)},c=v=>{(v.parent??s).doAction(Ht.Duplicate,v),n(!1)},u=(v,p)=>{v.onChange({...v.options,name:p})},f=v=>!!o()?.canRename(v),d=v=>v.options.type;return y.createElement(y.Fragment,null,y.createElement(ey.X,{name:a,onChange:v=>u(r,v),verifyLayerNameUniqueness:f??void 0}),y.createElement("div",{className:i.textWrapper},"\xA0 ",d(r)),!e.children&&y.createElement("div",{className:i.actionButtonsWrapper},y.createElement(he.h,{name:"copy",title:"Duplicate",className:i.actionIcon,onClick:()=>c(r),tooltip:"Duplicate"}),y.createElement(he.h,{name:"trash-alt",title:"remove",className:i.actionIcon,onClick:()=>l(r),tooltip:"Remove"})))},ny=t=>({actionButtonsWrapper:(0,j.css)({display:"flex",alignItems:"flex-end"}),actionIcon:(0,j.css)({color:t.colors.text.secondary,cursor:"pointer","&:hover":{color:t.colors.text.primary}}),textWrapper:(0,j.css)({display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginRight:t.spacing(1)}),layerName:(0,j.css)({fontWeight:t.typography.fontWeightMedium,color:t.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:t.spacing(.5)})});function rs(t,e,n){let r=[];if(t)for(let a=t.elements.length;a--;a>=0){const i=t.elements[a],s={key:i.UID,title:i.getName(),selectable:!0,dataRef:i};i instanceof Jt&&(s.children=rs(i,e,n)),r.push(s)}return r}function ay(t,e){const n=t.node.key,r=t.dragNode.key,a=t.node.pos.split("-"),i=t.dropPosition-Number(a[a.length-1]),s=(c,u,f)=>{c.forEach((d,v,p)=>{if(d.key===u){f(d,v,p);return}d.children&&s(d.children,u,f)})},o=[...e];let l;if(s(o,r,(c,u,f)=>{f.splice(u,1),l=c}),i===0)s(o,n,c=>{c.children=c.children||[],c.children.unshift(l)});else{let c=[],u=0;s(o,n,(f,d,v)=>{c=v,u=d}),i===-1?c.splice(u,0,l):c.splice(u+1,0,l)}return o}let xd=!0;const iy=({item:t})=>{const[e,n]=(0,y.useState)(rs(t?.settings?.scene.root)),[r,a]=(0,y.useState)(!0),[i,s]=(0,y.useState)([]),[o,l]=(0,y.useState)([]),c=(0,xt.l4)(),u=ty(c),f=(0,xt.wW)(oy),d=c.colors.primary.border,{settings:v}=t,p=(0,y.useMemo)(()=>v?.selected?v.selected.map(P=>P?.getName()):[],[v?.selected]),h=(0,y.useMemo)(()=>v?.selected?v.selected.map(P=>P?.UID):[],[v?.selected]);if((0,y.useEffect)(()=>{n(rs(t?.settings?.scene.root,p,d)),l(h),S()},[t?.settings?.scene.root,d,p,h]),!v)return y.createElement("div",null,"No settings");const g=v.layer;if(!g)return y.createElement("div",null,"Missing layer?");const m=(P,M)=>{xd&&t.settings?.scene&&bs(t.settings.scene,M.node.dataRef)},b=()=>!0,E=P=>{const M=P.node.pos.split("-"),O=P.dropPosition-Number(M[M.length-1]),A=P.dragNode.dataRef,N=P.node.dataRef,_=ay(P,e);n(_),N.parent?.scene.reorderElements(A,N,P.dropToGap,O)},C=P=>{s(P),a(!1)},x=P=>P.isLeaf?y.createElement(y.Fragment,null):y.createElement(Fa.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${P.expanded?90:0}deg)`,fill:c.colors.text.primary}}),S=(P=!0)=>{xd=P},w=()=>{g.scene.clearCurrentSelection()},T=P=>y.createElement(ry,{nodeData:P,setAllowSelection:S,settings:v}),D=()=>{g.scene?g.scene.frameSelection():console.warn("no scene!")},k=In(v.scene.shouldShowAdvancedTypes).options;return y.createElement(y.Fragment,null,y.createElement(td.Global,{styles:u}),y.createElement(J1,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:b,onDrop:E,expandedKeys:i,onExpand:C,treeData:e,titleRender:T,switcherIcon:x,selectedKeys:o,multiple:!0}),y.createElement(pe.Lh,{justify:"space-between"},y.createElement("div",{className:f.addLayerButton},y.createElement(Uu.f,{onChange:P=>qa(P,g),options:k,label:"Add item"})),p.length>0&&y.createElement(Yr.zx,{size:"sm",variant:"secondary",onClick:w},"Clear selection"),p.length>1&&Je.config.featureToggles.canvasPanelNesting&&y.createElement(Yr.zx,{size:"sm",variant:"secondary",onClick:D},"Frame selection")))},oy=t=>({addLayerButton:(0,j.css)({marginLeft:"18px",minWidth:"150px"})});function wd(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const a of e){if(a instanceof Jt){n.currentLayer=a;break}if(a&&a.parent){n.currentLayer=a.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:a=>({getValue:i=>(0,Ce.get)(r,i),onChange:(i,s)=>{if(i==="type"&&s){console.warn("unable to change layer type");return}const o=(0,Ga.hs)(r,i,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(a,i)=>{const s=n.currentLayer;s&&s.isRoot(),a.addCustomEditor({id:"content",path:"root",name:"Elements",editor:iy,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...i,options:r};Gr.addBackground(a,o),Gr.addBorder(a,o),s&&!s.isRoot()&&a.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:qu,settings:{scene:t.scene,element:s}})}}}var sy=G(88062),ly=G(4981);const cy=({onTabChange:t})=>{const[e,n]=(0,y.useState)(ze.SelectedElement),r=[{label:"Selected Element",value:ze.SelectedElement},{label:"Element Management",value:ze.ElementManagement}],a=i=>{t(i),n(i)};return y.createElement(y.Fragment,null,y.createElement(sy.J,null,r.map((i,s)=>y.createElement(ly.O,{key:`${i.value}-${s}`,label:i.label,active:i.value===e,onChangeTab:()=>a(i.value)}))))};function uy(){const t=(0,Bn.Z)(Kr),e=t?.panel.context?.instanceState,n=(0,xt.wW)(fy),[r,a]=(0,y.useState)(ze.SelectedElement),i=(0,y.useMemo)(()=>{const f=t?.panel,d=e;if(!d||!f)return new Ho.j({id:"root",title:"root"});const v=p=>{r===ze.ElementManagement&&p.addNestedOptions(wd(e));const h=d.selected;if(h?.length===1&&r===ze.SelectedElement){const g=h[0];g&&!(g instanceof Jt)&&p.addNestedOptions(Ju({category:[`Selected element (${g.options.name})`],element:g,scene:d.scene}))}as(p)};return dy({options:f.props.options,onChange:f.props.onOptionsChange,data:f.props.data?.series},v)},[e,t,r]),s={marginLeft:15,marginTop:10},o=f=>{a(f)},l=In(e?.scene.shouldShowAdvancedTypes).options,c=e?.layer,u=e&&r===ze.SelectedElement&&e.selected.length===0;return y.createElement(y.Fragment,null,y.createElement("div",{style:s},i.items.map(f=>f.render())),y.createElement("div",{style:s},y.createElement(Uu.f,{onChange:f=>qa(f,c),options:l,label:"Add item"})),y.createElement("div",{style:s},y.createElement(cy,{onTabChange:o}),i.categories.map(f=>Dd(f)),u&&y.createElement("div",{className:n.selectElement},"Please select an element")))}function Dd(t){return y.createElement(o1.u,{...t.props,key:t.props.id},y.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>Dd(e)))}function dy(t,e){const n={data:t.data??[],options:t.options},r=new Ho.j({id:"root",title:"root"}),a=s=>{if(s?.length){const o=s[0];let l=r.categories.find(c=>c.props.id===o);return l||(l=new Ho.j({id:o,title:o}),r.categories.push(l)),l}return r},i={getValue:s=>(0,Ce.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,Ga.hs)(t.options,s,o))}};return(0,s1.HZ)(e,i,a,n),r}const fy=t=>({selectElement:(0,j.css)({color:t.colors.text.secondary,padding:t.spacing(2)})}),ns=10,Td=32;function vy({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),a=window.innerHeight,i=window.innerWidth,s=(0,y.useRef)(null),o=(0,xt.wW)(py),l="inlineEditPanel"+e.toString(),c={width:400,height:400},u=r?.width??c.width+ns*2,f=r?.x??0+u-c.width-ns,d=r?.y??0+Td,v=ju.Z.getObject(l,{x:f,y:d,w:c.width,h:c.height}),[p,h]=(0,y.useState)({width:v.w,height:v.h}),[g,m]=(0,y.useState)({x:v.x,y:v.y});(0,y.useEffect)(()=>{const x=i-p.width-ns,S=a-p.height-Td;x<g.x&&x>0&&m({...g,x}),S<g.y&&S>0&&m({...g,y:S})},[a,i,g,p]);const b=(x,S)=>{let w=S.x<0?0:S.x,T=S.y<0?0:S.y;m({x:w,y:T}),C(w,T,p.width,p.height)},E=(x,S)=>{const{size:w}=S;h({width:w.width,height:w.height}),C(g.x,g.y,w.width,w.height)},C=(x,S,w,T)=>{ju.Z.setObject(l,{x,y:S,w,h:T})};return y.createElement(Tn.h_,null,y.createElement("div",{className:o.draggableWrapper},y.createElement(a1(),{handle:"strong",onStop:b,position:{x:g.x,y:g.y}},y.createElement(i1.Resizable,{height:p.height,width:p.width,onResize:E},y.createElement("div",{className:o.inlineEditorContainer,style:{height:`${p.height}px`,width:`${p.width}px`},ref:s},y.createElement("strong",{className:o.inlineEditorHeader},y.createElement("div",{className:o.placeholder}),y.createElement("div",null,"Canvas Inline Editor"),y.createElement(he.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t,tooltip:"Close inline editor"})),y.createElement("div",{className:o.inlineEditorContentWrapper},y.createElement("div",{className:o.inlineEditorContent},y.createElement(uy,null))))))))}const py=t=>({inlineEditorContainer:(0,j.css)({display:"flex",flexDirection:"column",background:t.components.panel.background,border:`1px solid ${t.colors.border.weak}`,boxShadow:t.shadows.z3,zIndex:1e3,opacity:1,minWidth:"400px"}),draggableWrapper:(0,j.css)({width:0,height:0}),inlineEditorHeader:(0,j.css)({display:"flex",alignItems:"center",justifyContent:"center",background:t.colors.background.canvas,borderBottom:`1px solid ${t.colors.border.weak}`,height:"40px",cursor:"move"}),inlineEditorContent:(0,j.css)({whiteSpace:"pre-wrap",padding:"10px"}),inlineEditorClose:(0,j.css)({marginLeft:"auto"}),placeholder:(0,j.css)({width:"24px",height:"24px",visibility:"hidden",marginRight:"auto"}),inlineEditorContentWrapper:(0,j.css)({overflow:"scroll"})});let An=[],br,Ya=!1,Xa=!1;const Kr=new Rs.t(1);class Md extends y.Component{constructor(e){super(e),this.subs=new Ff.w0,this.needsReload=!1,this.isEditing=Os.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:a}=this.props;r({...a,root:n}),this.setState({refresh:this.state.refresh+1}),Kr.next({panel:this})},this.openInlineEdit=()=>{if(Ya){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),Ya=!0},this.openSetBackground=n=>{if(Xa){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),Xa=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),Ya=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),Xa=!1},this.setActivePanel=()=>{br=this,Kr.next({panel:this})},this.renderInlineEdit=()=>y.createElement(vy,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>y.createElement(e1,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new qm(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.props.options.panZoom,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe($u.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe($u.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection())}))}componentDidMount(){br=this,Kr.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{e.length&&(br=this,Kr.next({panel:this})),An.forEach(n=>{n!==br&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),this.panelContext?.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root})}})),this.subs.add(this.scene.connections.selection.subscribe({next:e=>{this.context.instanceState&&(this.panelContext?.onInstanceStateChange({scene:this.scene,selected:this.context.instanceState.selected,selectedConnection:e,layer:this.scene.root}),e&&(br=this,Kr.next({panel:this})),An.forEach(n=>{n!==br&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),setTimeout(()=>{this.forceUpdate()}))}}))),An.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),Ya=!1,Xa=!1,An=An.filter(e=>e.props.id!==br?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:a,data:i,options:s}=this.props;let o=!1;(r!==e.width||a!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),i!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,c=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes,u=this.props.options.panZoom!==e.options.panZoom;return(this.needsReload||l||c||u)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes,e.options.panZoom),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return y.createElement(y.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}Md.contextType=jr.bb;function hy(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,Ce.get)(t.connection.info,n),onChange:(n,r)=>{let a=t.connection.info;a=(0,Ga.hs)(a,n,r),t.scene.connections.onChange(t.connection,a)}}),build:(e,n)=>{const r={...n,options:t.connection.info};Gr.addColor(e,r),Gr.addSize(e,r)}}}var gy=G(25111);const my="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/canvas/",yy=({})=>{const t=(0,xt.wW)(by);return y.createElement(y.Fragment,null,y.createElement(pe.Lh,{className:t.hGroup},y.createElement(gy.b,{title:"Pan and zoom controls",severity:"info",buttonContent:y.createElement(Fa.J,{name:"question-circle",size:"xl"}),className:t.alert,onRemove:()=>{const e=window.open(my,"_blank","noopener,noreferrer");e&&(e.opener=null)}},y.createElement(pe.wc,null,y.createElement("ul",null,y.createElement("li",null,"Pan:",y.createElement("ul",null,y.createElement("li",null,"Middle mouse"),y.createElement("li",null,"CTRL + right mouse"))),y.createElement("li",null,"Zoom: Scroll wheel"),y.createElement("li",null,"Reset: Double click"))))))},by=t=>({alert:(0,j.css)({"& div":{padding:"4px",alignItems:"start"},marginBottom:"0px",marginTop:"5px",padding:"2px","ul > li":{marginLeft:"10px"}}),hGroup:(0,j.css)({"& div":{width:"100%"}})}),Ey=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},as=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Experimental element types",description:"Enable selection of experimental element types",defaultValue:!0}),t.addBooleanSwitch({path:"panZoom",name:"Pan and zoom",description:"Enable pan and zoom",defaultValue:!1,showIf:e=>Je.config.featureToggles.canvasPanelPanZoom}),t.addCustomEditor({id:"panZoomHelp",path:"panZoomHelp",name:"",editor:yy,showIf:e=>Je.config.featureToggles.canvasPanelPanZoom&&e.panZoom})},Cy=new Va.c(Md).setNoPadding().useFieldConfig({standardOptions:{[Za.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(Ey).setPanelOptions((t,e)=>{const n=e.instanceState;if(as(t),n){t.addNestedOptions(wd(n));const r=n.selected,a=n.selectedConnection;if(r?.length===1){const i=r[0];i instanceof Jt||t.addNestedOptions(Ju({category:[`Selected element (${i.options.name})`],element:i,scene:n.scene}))}a&&t.addNestedOptions(hy({category:["Selected connection"],connection:a,scene:n.scene}))}})}}]);

//# sourceMappingURL=canvasPanel.986ed2a53d616d2b1d29.js.map