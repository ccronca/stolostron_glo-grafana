"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6987],{34930:(nt,Le,y)=>{y.d(Le,{q:()=>Re});var d=y(76932),ne=y(31733),we=y(76067);const ye=10,Re=({colorPalette:ae,min:se,max:xe,display:T,hoverValue:ce,useStopsPercentage:ge})=>{const[Se,oe]=(0,ne.useState)([]),[pe,ue]=(0,ne.useState)({isShown:!1,value:0}),[ve,ke]=(0,ne.useState)(null),Oe=(0,we.l4)(),de=be(Oe,Se);(0,ne.useEffect)(()=>{oe(fe({colorArray:ae,stops:ye,useStopsPercentage:ge}))},[ae,ge]);const Ee=He=>{const ze=He.nativeEvent.offsetX,Te=He.currentTarget.offsetWidth,me=Math.floor(ze*100/Te+1),he=Math.floor((xe-se)*me/100+se);ue({isShown:!0,value:he}),ke(me)},Ae=()=>{ue({isShown:!1,value:0})};return(0,ne.useEffect)(()=>{ke(ce==null?null:o((ce-se)/(xe-se)))},[ce,se,xe]),ne.createElement("div",{className:de.scaleWrapper,onMouseMove:Ee,onMouseLeave:Ae},ne.createElement("div",{className:de.scaleGradient},T&&(pe.isShown||ce!==void 0)&&ne.createElement("div",{className:de.followerContainer},ne.createElement("div",{className:de.follower,style:{left:`${ve}%`}}))),T&&ne.createElement("div",{className:de.followerContainer},ne.createElement("div",{className:de.legendValues},ne.createElement("span",{className:de.disabled},T(se)),ne.createElement("span",{className:de.disabled},T(xe))),ve!=null&&(pe.isShown||ce!==void 0)&&ne.createElement("span",{className:de.hoverValue,style:{left:`${ve}%`}},T(ce??pe.value))))},fe=({colorArray:ae,stops:se,useStopsPercentage:xe=!0})=>{const T=ae.length;if(xe&&T<=20){const oe=1/T*100;let pe=0;const ue=[];for(const ve of ae)pe>0?ue.push(`${ve} ${pe}%`):ue.push(ve),pe+=oe,ue.push(`${ve} ${pe}%`);return ue}const ce=ae[T-1],ge=Math.ceil(T/se),Se=new Set;for(let oe=0;oe<T;oe+=ge)Se.add(ae[oe]);return Se.add(ce),[...Se]};function o(ae){return ae>1?100:ae<0?0:ae*100}const be=(ae,se)=>({scaleWrapper:(0,d.css)({width:"100%",fontSize:"11px",opacity:1}),scaleGradient:(0,d.css)({background:`linear-gradient(90deg, ${se.join()})`,height:"9px",pointerEvents:"none",borderRadius:ae.shape.radius.default}),legendValues:(0,d.css)({display:"flex",justifyContent:"space-between",pointerEvents:"none"}),hoverValue:(0,d.css)({position:"absolute",marginTop:"-14px",padding:"3px 15px",transform:"translateX(-50%)"}),followerContainer:(0,d.css)({position:"relative",pointerEvents:"none",whiteSpace:"nowrap"}),follower:(0,d.css)({position:"absolute",height:"13px",width:"13px",borderRadius:ae.shape.radius.default,transform:"translateX(-50%) translateY(-50%)",border:`2px solid ${ae.colors.text.primary}`,top:"5px"}),disabled:(0,d.css)({color:ae.colors.text.disabled})})},80203:(nt,Le,y)=>{y.r(Le),y.d(Le,{plugin:()=>Dt});var d=y(31733),ne=y(42439),we=y(68235),ye=y(85666),Re=y(15476),fe=y(85498),o=y(71199),be=y(39076),ae=y(93443),se=y(34930),xe=y(66872),T=y(42882),ce=y(76932),ge=y(19596),Se=y(42692),oe=y(86347),pe=y(46915),ue=y(76067),ve=y(43348),ke=y(66246),Oe=y(64125),de=y(9172),Ee=y(73763),Ae=y(25108),He=y(40429),ze=y(80193),Te=y(74322),me=y(35560),he=y(86850),$e=y(27957),ot=y(54565),it=y(32684),st=y(45597),Ne=y(41614),Ze=y(60490),Ge=y(55820);function Ke(e,a,t,s,l,n,u){let c=e.current?.getContext("2d");if(c!=null){let f=n;for(;s[f--]===s[n];);f++;let r=f+u,i=0,B=f;for(;B<r;){let _=l[B];i=Math.max(i,_),B++}let v=new Path2D,z=new Path2D;B=f;let K=0;for(;B<r;){let _=l[B];if(_>0){let R=_/i,N=K/(u+1);(B===n?v:z).rect(Math.round(a*N),Math.round(t*(1-R)),Math.round(a/u),Math.round(t*R))}B++,K++}c.clearRect(0,0,a,t),c.fillStyle="#2E3036",c.fill(z),c.fillStyle="#5794F2",c.fill(v)}}const je=(e,a)=>{const t=e.heatmapColors?.palette,s=e.heatmapColors?.values[a];let l;return s!=null&&(l=t[s]),{cellColor:l,colorPalette:t}},Ye={year:1e3*60*60*24*365,month:1e3*60*60*24*30,week:1e3*60*60*24*7,day:1e3*60*60*24,h:1e3*60*60,m:1e3*60,s:1e3,ms:1},rt=new Set(["ms","s","m","h"]),ct=e=>{let a=1,t="ms";for(t in Ye)if(e>=Ye[t]){a=Math.floor(e/Ye[t]);break}const l=a!==1&&!rt.has(t)?t+"s":t;return`${a} ${l}`},We=(e,a,t)=>{let s;switch(a){case"x":s=t?e?.fields.find(({name:l})=>l==="x"||l==="xMin"||l==="xMax"):e?.fields[0];break;case"y":s=t?e?.fields.find(({name:l})=>l==="y"||l==="yMin"||l==="yMax"):e?.fields[1];break;case"count":s=t?e?.fields.find(({name:l})=>l==="count"):e?.fields[2];break}return s},Je=(e,a)=>{let t=e.heatmap.fields,s=t.find(c=>c.name==="xMax"),l=t.find(c=>c.name==="yMin"),n=t.find(c=>c.name==="yMax"),u=s.config.interval;return{xBucketMin:s.values[a]-u,xBucketMax:s.values[a],yBucketMin:l.values[a],yBucketMax:n.values[a]}},ut=e=>e.seriesIdx===2?d.createElement(Ge.H,{data:e.dataRef.current.exemplars,rowIndex:e.dataIdxs[2],header:"Exemplar",padding:8}):d.createElement(dt,{...e}),dt=({dataIdxs:e,dataRef:a,showHistogram:t,isPinned:s,canAnnotate:l,showColorScale:n=!1,scopedVars:u,replaceVars:c,mode:f})=>{const r=e[1],i=a.current,[B]=(0,d.useState)(()=>i.heatmap?.meta?.type===oe.P.HeatmapCells&&!(0,T.qJ)(i.heatmap)),v=We(i.heatmap,"x",B),z=We(i.heatmap,"y",B),K=We(i.heatmap,"count",B),_=x=>{if(v?.display)return(0,he.zc)(v.display(x));if(v?.type===ye.fS.time){const W="YYYY-MM-DD HH:mm:ss";return(0,Ze.h4)().getCurrent()?.formatDate(x,W)}return`${x}`},R=v.values,N=z.values,b=K.values,E=(0,T.d8)(i.heatmap),C=z?.display?x=>(0,he.zc)(z.display(x)):x=>`${x}`;let J=v?.config.interval,g,H,V,ee,O,Y=[];const Q=x=>x%i.yBucketCount;let j=Q(r);const $=(x=r)=>{if(E.yOrdinalDisplay){const W=i.yLayout===o.kv.le?j-1:j,Z=i.yLayout===o.kv.le?j:j+1;g=W<0?E.yMinDisplay:`${E.yOrdinalDisplay[W]}`,H=`${E.yOrdinalDisplay[Z]}`,(!E.yOrdinalLabel||Number.isNaN(+E.yOrdinalLabel[0]))&&(O=i.yLayout===o.kv.le?H:g)}else{const W=N?.[j];if(i.yLayout===o.kv.le)if(H=`${W}`,i.yLog){let U=(i.yLog===2?Math.log2:Math.log10)(W)-1/i.yLogSplit;g=`${i.yLog**U}`}else g=`${W-i.yBucketSize}`;else if(g=`${W}`,i.yLog){let U=(i.yLog===2?Math.log2:Math.log10)(W)+1/i.yLogSplit;H=`${i.yLog**U}`}else H=`${W+i.yBucketSize}`}i.xLayout===o.kv.le?(ee=R[x],V=ee-i.xBucketSize):(V=R[x],ee=V+i.xBucketSize)};B?{xBucketMin:V,xBucketMax:ee,yBucketMin:g,yBucketMax:H}=Je(i,r):$();const{cellColor:te,colorPalette:S}=je(i,r),X=(x,W)=>{let Z=[];for(let U=x;U<=W;U++){if(!b?.[U])continue;const re=je(i,U).cellColor;D=F(U),B?{xBucketMin:V,xBucketMax:ee,yBucketMin:g,yBucketMax:H}=Je(i,U):(j=Q(U),$(U));const{label:Ie,value:Pt}=w()[0];Z.push({label:Ie,value:Pt,color:re??"#FFF",isActive:r===U})}return Z},w=()=>{const x=f===o.f3.Multi&&!s;if(O)return x?[{label:`Name ${O}`,value:i.display(D)}]:[{label:"Name",value:O}];switch(i.yLayout){case o.kv.unknown:return x?[{label:C(g),value:i.display(D)}]:[{label:"",value:C(g)}]}return x?[{label:`Bucket ${C(g)}-${C(H)}`,value:i.display(D)}]:[{label:"Bucket",value:`${C(g)}-${C(H)}`}]},F=x=>b?.[x];let D=F(r);if(f===o.f3.Single||s){const x=J?[{label:"Duration",value:ct(J)}]:[];Y=[{label:(0,$e.CZ)(K,i.heatmap),value:i.display(D),color:te??"#FFF",colorPlacement:Ne.Z2.trailing,colorIndicator:Ne.F_.value},...w(),...x]}if(f===o.f3.Multi&&!s){let x=v.values[r],W=r,Z=r;for(;v.values[W-1]===x;)W--;for(;v.values[Z+1]===x;)Z++;X(W,Z).forEach(re=>{Y.push({label:re.label,value:re.value,color:re.color??"#FFF",colorIndicator:Ne.F_.value,colorPlacement:Ne.Z2.trailing,isActive:re.isActive})})}const G=i.heatmap?.fields.filter(x=>!x.config.custom?.hideFrom?.tooltip),P=[],le=new Set;for(const x of G??[]){if(x.config.links&&x.config.links.length>0&&i.heatmap){const Z=u.find(U=>U&&U.__dataContext&&U.__dataContext.value.field.name===O);x.getLinks=(0,ge.oB)(i.heatmap,x,Z||{},c)}if(x.getLinks){const Z=x.values[r],U=x.display?x.display(Z):{text:`${Z}`,numeric:+Z};x.getLinks({calculatedValue:U,valueRowIndex:r}).forEach(re=>{const Ie=`${re.title}/${re.href}`;le.has(Ie)||(P.push(re),le.add(Ie))})}}let ie=(0,d.useRef)(null),m=264,p=64,h=Math.round(m*me.Z.pxRatio),L=Math.round(p*me.Z.pxRatio);(0,d.useEffect)(()=>{t&&R!=null&&b!=null&&f===o.f3.Single&&Ke(ie,h,L,R,b,r,i.yBucketCount)},[r]);const M=()=>({label:"",value:_(ee)}),q=()=>Y,I=()=>{let x=[];return f!==o.f3.Single||(t&&x.push(d.createElement("canvas",{width:h,height:L,ref:ie,style:{width:m+"px",height:p+"px"}})),S&&n&&x.push(d.createElement(se.q,{colorPalette:S,min:i.heatmapColors?.minValue,max:i.heatmapColors?.maxValue,display:i.display,hoverValue:D}))),x};l=!1;const A=(0,ue.wW)(mt);return d.createElement("div",{className:A.wrapper},d.createElement(st.r,{headerLabel:M(),isPinned:s}),d.createElement(ot.X,{contentLabelValue:q(),customContent:I(),isPinned:s}),s&&d.createElement(it.c,{dataLinks:P,canAnnotate:l}))},mt=e=>({wrapper:(0,ce.css)({display:"flex",flexDirection:"column",width:"280px"})});var ft=y(79106),pt=y(51343);const ht=e=>e.hover.seriesIdx===2?d.createElement(Ge.H,{data:e.data.exemplars,rowIndex:e.hover.dataIdx,header:"Exemplar"}):d.createElement(yt,{...e}),yt=({data:e,hover:a,showHistogram:t=!1,scopedVars:s,replaceVars:l})=>{const n=a.dataIdx,[u]=(0,d.useState)(()=>e.heatmap?.meta?.type===oe.P.HeatmapCells&&!(0,T.qJ)(e.heatmap)),c=e.heatmap?.fields[0],f=e.heatmap?.fields[1],r=e.heatmap?.fields[2],i=S=>{if(c?.display)return(0,he.zc)(c.display(S));if(c?.type===ye.fS.time){const X="YYYY-MM-DD HH:mm:ss";return(0,Ze.h4)().getCurrent()?.formatDate(S,X)}return`${S}`},B=c?.values,v=f?.values,z=r?.values,K=(0,T.d8)(e.heatmap),_=f?.display?S=>(0,he.zc)(f.display(S)):S=>`${S}`,R=n%e.yBucketCount;let N,b,E;if(K.yOrdinalDisplay){const S=e.yLayout===o.kv.le?R-1:R,X=e.yLayout===o.kv.le?R:R+1;N=S<0?K.yMinDisplay:`${K.yOrdinalDisplay[S]}`,b=`${K.yOrdinalDisplay[X]}`,(!K.yOrdinalLabel||Number.isNaN(+K.yOrdinalLabel[0]))&&(E=e.yLayout===o.kv.le?b:N)}else{const S=v?.[R];if(e.yLayout===o.kv.le)if(b=`${S}`,e.yLog){let w=(e.yLog===2?Math.log2:Math.log10)(S)-1/e.yLogSplit;N=`${e.yLog**w}`}else N=`${S-e.yBucketSize}`;else if(N=`${S}`,e.yLog){let w=(e.yLog===2?Math.log2:Math.log10)(S)+1/e.yLogSplit;b=`${e.yLog**w}`}else b=`${S+e.yBucketSize}`}let C,J;e.xLayout===o.kv.le?(J=B?.[n],C=J-e.xBucketSize):(C=B?.[n],J=C+e.xBucketSize);const g=z?.[n],H=e.heatmap?.fields.filter(S=>!S.config.custom?.hideFrom?.tooltip),V=[],ee=new Set;for(const S of H??[]){if(S.config.links&&S.config.links.length>0&&e.heatmap){const w=s.find(F=>F&&F.__dataContext&&F.__dataContext.value.field.name===E);S.getLinks=(0,ge.oB)(e.heatmap,S,w||{},l)}if(S.getLinks){const w=S.values[n],F=S.display?S.display(w):{text:`${w}`,numeric:+w};S.getLinks({calculatedValue:F,valueRowIndex:n}).forEach(D=>{const G=`${D.title}/${D.href}`;ee.has(G)||(V.push(D),ee.add(G))})}}let O=(0,d.useRef)(null),Y=264,Q=64,j=Math.round(Y*me.Z.pxRatio),$=Math.round(Q*me.Z.pxRatio);if((0,d.useEffect)(()=>{t&&B!=null&&z!=null&&Ke(O,j,$,B,z,n,e.yBucketCount)},[n]),u)return d.createElement("div",null,d.createElement(Ge.H,{data:e.heatmap,rowIndex:n}));const te=()=>{if(E)return d.createElement("div",null,"Name: ",E);switch(e.yLayout){case o.kv.unknown:return d.createElement("div",null,_(N))}return d.createElement("div",null,"Bucket: ",_(N)," - ",_(b))};return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("div",null,i(C)),e.xLayout!==o.kv.unknown&&d.createElement("div",null,i(J))),t&&d.createElement("canvas",{width:j,height:$,ref:O,style:{width:Y+"px",height:Q+"px"}}),d.createElement("div",null,te(),d.createElement("div",null,(0,$e.CZ)(r,e.heatmap),": ",e.display(g))),V.length>0&&d.createElement(ft.wc,null,V.map((S,X)=>d.createElement(pt.Qj,{key:X,icon:"external-link-alt",target:S.target,href:S.href,onClick:S.onClick,fill:"text",style:{width:"100%"}},S.title))))};var vt=y(96609),xt=y(28073),Me=y(60174),Qe=y(93670),Ce=y(48493),gt=y(50282),Xe=y(17473);function St(e){const{dataRef:a,theme:t,eventBus:s,onhover:l,onclick:n,isToolTipOpen:u,timeZone:c,getTimeRange:f,cellGap:r,hideLE:i,hideGE:B,yAxisConfig:v,ySizeDivisor:z,sync:K,eventsScope:_="__global_"}=e,R="x";let N="time",b=!0;a.current?.heatmap?.fields[0].type!==ye.fS.time&&(N=a.current?.heatmap?.fields[0].config?.unit??"x",b=!1);const E=devicePixelRatio;let C=a.current?.heatmap?.meta?.type;const J=t.visualization.getColorByName(e.exemplarColor);let g,H,V=new gt.U(c),ee;V.addHook("init",m=>{m.root.querySelectorAll(".u-cursor-pt").forEach(p=>{Object.assign(p.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})}),n&&m.over.addEventListener("mouseup",p=>{m.cursor.drag._x||m.cursor.drag._y||n(p)},!0)}),b&&V.addHook("setData",m=>{let{min:p,max:h}=m.scales.x,L=f().from.valueOf(),M=f().to.valueOf();(p!==L||h!==M)&&queueMicrotask(()=>{m.setScale(R,{min:L,max:M})})}),V.addHook("syncRect",(m,p)=>{ee=p});const O={point:{[N]:null},data:a.current?.heatmap},Y=new Qe.es(O);let Q;l&&V.addHook("setLegend",m=>{if(m.cursor.idxs!=null)for(let p=0;p<m.cursor.idxs.length;p++){const h=m.cursor.idxs[p];if(h!=null){const{left:L,top:M}=m.cursor;O.rowIndex=h,O.point[N]=m.posToVal(L,R),s.publish(Y),u?.current||(Q&&(clearTimeout(Q),Q=0),l({seriesIdx:p,dataIdx:h,pageX:ee.left+L,pageY:ee.top+M}));return}}u?.current||Q||(Q=setTimeout(()=>{l(null),O.rowIndex=void 0,O.point[N]=null,s.publish(Y)},100))}),V.addHook("drawClear",m=>{g=g||new Xe.lW(0,0,m.bbox.width,m.bbox.height),g.clear(),m.series.forEach((p,h)=>{h>0&&(p._paths=null)})}),V.setMode(2),V.addScale({scaleKey:R,isTime:b,orientation:o.wN.Horizontal,direction:o.bQ.Right,range:(m,p,h)=>{if(b)return[f().from.valueOf(),f().to.valueOf()];if(a.current?.xLayout===o.kv.le)return[p-a.current?.xBucketSize,h];if(a.current?.xLayout===o.kv.ge)return[p,h+a.current?.xBucketSize];{let L=a.current?.xBucketSize/2;return[p-L,h+L]}}});let j;if(!b){j=[];for(let m=0;m<10;m++)j.push(m*a.current?.xBucketSize)}V.addAxis({scaleKey:R,placement:o.LB.Bottom,incrs:j,isTime:b,theme:t,timeZone:c});const $=a.current?.heatmap?.fields[1];if(!$)return V;const S=$.config?.custom?.scaleDistribution??{type:o.wf.Linear},X=!!v.reverse,w=C===oe.P.HeatmapCells&&!(0,T.qJ)(a.current?.heatmap),F=S.type!==o.wf.Linear||w,D=(0,T.d8)(a.current?.heatmap).yOrdinalDisplay!=null,G="y_"+(Math.random()+1).toString(36).substring(7);V.addScale({scaleKey:G,isTime:!1,orientation:o.wN.Vertical,direction:X?o.bQ.Down:o.bQ.Up,distribution:F?o.wf.Log:o.wf.Linear,log:S.log??2,range:w?(m,p,h)=>{let L=m.data[1][2][0]/m.data[1][1][0];h*=L;let M,q;if([M,q]=F?me.Z.rangeLog(p,h,S.log??2,!0):[p,h],F&&!D){let I=m.scales[G].log,A=I===2?Math.log2:Math.log10,{min:x,max:W}=v;if(x!=null&&x>0){let Z=A(x);M=I**(0,Ce.mB)(Z,1)}if(W!=null&&W>0){let Z=A(W);q=I**(0,Ce.UO)(Z,1)}}return[M,q]}:(m,p,h)=>{let L=p,M=h,{min:q,max:I}=v;if(F){let A=m.scales[G].log,x=!1,W=!1,Z=A===2?Math.log2:Math.log10;if(z!==1){let U=Z(p),re=Z(h);Number.isInteger(U)||(L=A**(0,Ce.mB)(U,1),x=!0),Number.isInteger(re)||(M=A**(0,Ce.UO)(re,1),W=!0)}if(a.current?.yLayout===o.kv.le?x||(L/=A):a.current?.yLayout===o.kv.ge?W||(M*=A):(L/=A/2,M*=A/2),!D){if(q!=null&&q>0){let U=Z(q);L=A**(0,Ce.mB)(U,1)}if(I!=null&&I>0){let U=Z(I);M=A**(0,Ce.UO)(U,1)}}}else{let A=a.current?.yBucketSize;A===0&&(A=1),A&&(a.current?.yLayout===o.kv.le?L-=A:a.current?.yLayout===o.kv.ge?M+=A:(L-=A/2,M+=A/2)),D||(L=q??L,M=I??M)}return[L,M]}});const P=$.display??(0,he.Cf)("short");V.addAxis({scaleKey:G,show:v.axisPlacement!==o.LB.Hidden,placement:v.axisPlacement||o.LB.Left,size:v.axisWidth||null,label:v.axisLabel,theme:t,formatValue:(m,p)=>(0,he.zc)(P(m,p)),splits:D?m=>{const p=(0,T.d8)(a.current?.heatmap);if(!p.yOrdinalDisplay)return[0,1];let h=p.yOrdinalDisplay.map((L,M)=>M);switch(a.current?.yLayout){case o.kv.le:h.unshift(-1);break;case o.kv.ge:h.push(h.length);break}if(m.height<60)h=[h[0],h[h.length-1]];else for(;h.length>3&&(m.height-15)/h.length<10;)h=h.filter((L,M)=>M%2===0);return h}:void 0,values:D?(m,p)=>{const h=(0,T.d8)(a.current?.heatmap);return h.yOrdinalDisplay?p.map(L=>L<0?h.yMinDisplay??"":h.yOrdinalDisplay[L]??""):p}:void 0});const le=w?Mt:Ct;V.addSeries({facets:[{scale:R,auto:!0,sorted:1},{scale:G,auto:!0}],pathBuilder:le({each:(m,p,h,L,M,q,I)=>{g.add({x:L-m.bbox.left,y:M-m.bbox.top,w:q,h:I,sidx:p,didx:h})},gap:r,hideLE:i,hideGE:B,xAlign:a.current?.xLayout===o.kv.le?-1:a.current?.xLayout===o.kv.ge?1:0,yAlign:(a.current?.yLayout===o.kv.le?-1:a.current?.yLayout===o.kv.ge?1:0)*(X?-1:1),ySizeDivisor:z,disp:{fill:{values:(m,p)=>a.current?.heatmapColors?.values,index:a.current?.heatmapColors?.palette}}}),theme:t,scaleKey:""}),V.addSeries({facets:[{scale:R,auto:!0,sorted:1},{scale:G,auto:!0}],pathBuilder:kt({each:(m,p,h,L,M,q,I)=>{g.add({x:L-m.bbox.left,y:M-m.bbox.top,w:q,h:I,sidx:p,didx:h})}},J),theme:t,scaleKey:""});const ie={drag:{x:!0,y:!1,setScale:!1},dataIdx:(m,p)=>{if(p===1){H=null;let h=m.cursor.left*E,L=m.cursor.top*E;g.get(h,L,1,1,M=>{(0,Xe.Pn)(h,L,M.x,M.y,M.x+M.w,M.y+M.h)&&(H=M)})}return H&&p===H.sidx?H.didx:null},points:{fill:"rgba(255,255,255, 0.3)",bbox:(m,p)=>{let h=H&&p===H.sidx;return{left:h?H.x/E:-10,top:h?H.y/E:-10,width:h?H.w/E:0,height:h?H.h/E:0}}}};return K&&K()!==Se.m.Off&&(ie.sync={key:_,scales:[R,G],filters:{pub:(m,p,h,L,M,q,I)=>(h<0?(O.point[N]=null,s.publish(new Qe.xH)):(O.point[N]=p.posToVal(h,R),s.publish(Y)),!0)}},V.setSync()),V.setCursor(ie),V}const qe=4;function Ct(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0,xAlign:u=1,yAlign:c=1,ySizeDivisor:f=1}=e,r=devicePixelRatio,i=s>=qe?Math.round:v=>v,B=Math.round(s*r);return(v,z)=>(me.Z.orient(v,z,(K,_,R,N,b,E,C,J,g,H,V,ee,O,Y,Q)=>{let j=v.data[z];const $=j[0],te=j[1],S=j[2],X=$.length;let w=a.fill.values(v,z),F=a.fill.index??[...new Set(w)],D=F.map(I=>new Path2D),G=X-te.lastIndexOf(te[0]),P=X/G,le=te[1]-te[0]||b.max-b.min,ie=$[G]-$[0],m,p;N.distr===3?m=Math.abs(E($[0]*N.log,N,H,J)-E($[0],N,H,J)):m=Math.abs(E(ie,N,H,J)-E(0,N,H,J)),b.distr===3?p=Math.abs(C(te[0]*b.log,b,V,g)-C(te[0],b,V,g))/f:p=Math.abs(C(le,b,V,g)-C(0,b,V,g))/f,m=Math.max(1,i(m-B)),p=Math.max(1,i(p-B));let h=u===-1?-m:u===0?-m/2:0,L=c===1?-p:c===0?-p/2:0,M=te.slice(0,G).map(I=>i(C(I,b,V,g)+L)),q=Array.from({length:P},(I,A)=>i(E($[A*G],N,H,J)+h));for(let I=0;I<X;I++)if(S[I]>l&&S[I]<n){let A=q[~~(I/G)],x=M[I%G],W=D[w[I]];Y(W,A,x,m,p),t(v,1,I,A,x,m,p)}return v.ctx.save(),v.ctx.rect(v.bbox.left,v.bbox.top,v.bbox.width,v.bbox.height),v.ctx.clip(),D.forEach((I,A)=>{v.ctx.fillStyle=F[A],v.ctx.fill(I)}),v.ctx.restore(),null}),null)}function kt(e,a){return(t,s)=>(me.Z.orient(t,s,(l,n,u,c,f,r,i,B,v,z,K,_,R,N,b)=>{let E=new Path2D,C=[E],J=[a??"rgba(255,0,255,0.7)"];for(let g=0;g<n.length;g++){let H=u[g];if(!(f.distr===3&&f.log===2)){H-=.5;let j=Math.round(Math.random())*2-1;H+=j*.5*Math.random()}let ee=r(n[g],c,z,B),O=i(H,f,K,v),Y=8,Q=8;N(E,ee-Y/2,O-Q/2,Y,Q),e.each(t,s,g,ee-Y/2,O-Q/2,Y,Q)}t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),C.forEach((g,H)=>{t.ctx.fillStyle=J[H],t.ctx.fill(g)}),t.ctx.restore()}),null)}function Mt(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0}=e,u=devicePixelRatio,c=s>=qe?Math.round:r=>r,f=Math.round(s*u);return(r,i)=>(me.Z.orient(r,i,(B,v,z,K,_,R,N,b,E,C,J,g,H,V,ee)=>{let O=r.data[i];const Y=O[0],Q=O[1],j=O[2],$=O[3],te=Y.length;let S=a.fill.values(r,i),X=a.fill.index??[...new Set(S)],w=X.map(P=>new Path2D),F=new Map,D=new Map;for(let P=0;P<Y.length;P++){let le=Y[P],ie=Q[P],m=j[P];F.has(le)||F.set(le,c(R(le,K,C,b))),D.has(ie)||D.set(ie,c(N(ie,_,J,E))),D.has(m)||D.set(m,c(N(m,_,J,E)))}let G=F.get(Y.find(P=>P!==Y[0]))-F.get(Y[0]);for(let P=0;P<te;P++){if($[P]<=l||$[P]>=n)continue;let le=Y[P],ie=Q[P],m=j[P],p=F.get(le),h=D.get(ie),L=D.get(m),M=G,q=h-L;M=Math.max(1,M-f),q=Math.max(1,q-f);let I=p-f/2-M,A=L+f/2,x=w[S[P]];V(x,I,A,M,q),t(r,1,P,I,A,M,q)}r.ctx.save(),r.ctx.rect(r.bbox.left,r.bbox.top,r.bbox.width,r.bbox.height),r.ctx.clip(),w.forEach((P,le)=>{r.ctx.fillStyle=X[le],r.ctx.fill(P)}),r.ctx.restore()}),null)}const _e=(e,a,t,s=-1/0,l=1/0)=>{if(a==null){a=1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(a=Math.min(a,e[n]))}if(t==null){t=-1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(t=Math.max(t,e[n]))}return[a,t]},et=(e,a,t,s)=>{let l=s-t||1,n=a.length,u=Array(e.length);for(let c=0;c<e.length;c++)u[c]=e[c]<t?0:e[c]>s?n-1:Math.min(n-1,Math.floor(n*(e[c]-t)/l));return u};function Ue(e,a,t,s,l,n,u){if(!e?.length)return{};(0,$e.UY)(e);const c=a?.find(r=>r.name==="exemplar");if(n&&c?.fields.forEach((r,i)=>{c.fields[i].getLinks=n(c,r)}),t.calculate){if(fe.config.featureToggles.transformationsVariableSupport){const r={...t,calculation:{xBuckets:{...t.calculation?.xBuckets},yBuckets:{...t.calculation?.yBuckets}}};return r.calculation?.xBuckets?.value&&u!==void 0&&(r.calculation.xBuckets.value=u(r.calculation.xBuckets.value)),r.calculation?.yBuckets?.value&&u!==void 0&&(r.calculation.yBuckets.value=u(r.calculation.yBuckets.value)),Ve((0,T.xf)(e,r.calculation??{}),c,r,s,l)}return Ve((0,T.xf)(e,t.calculation??{}),c,t,s,l)}let f;for(const r of e)switch(r.meta?.type){case oe.P.HeatmapCells:return(0,T.qJ)(r)?Ve(r,c,t,s,l):Bt(r,c,t,s,l);case oe.P.HeatmapRows:f=r}if(!f)if(e.length>1)e.every(i=>!Number.isNaN((0,Me.Ky)(i.fields[1].state?.displayName)))&&e.sort(Me.nf),f=[(0,vt._9)({frames:e})][0];else{let r=e[0],i=r.fields.filter(v=>v.type===ye.fS.number);i.every(v=>!Number.isNaN((0,Me.Ky)(v.state?.displayName)))?(i.sort((v,z)=>(0,Me.Ky)(v.state?.displayName)-(0,Me.Ky)(z.state?.displayName)),f={...r,fields:[r.fields.find(v=>v.type===ye.fS.time),...i]}):f=r}return Ve((0,T.Cj)({unit:t.yAxis?.unit,decimals:t.yAxis?.decimals,...t.rowsFrame,frame:f}),c,t,s,l)}const Bt=(e,a,t,s,l)=>{if(e.meta?.type!==oe.P.HeatmapCells||(0,T.qJ)(e))return{warning:"Expected sparse heatmap format",heatmap:e};Fe(e.fields[1],t.yAxis,l);const n=e.fields[3],u=Fe(n,t.cellValues,l);let[c,f]=_e(n.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge);return{heatmap:e,heatmapColors:{palette:s,values:et(n.values,s,c,f),minValue:c,maxValue:f},exemplars:a,display:r=>(0,he.zc)(u(r))}},Ve=(e,a,t,s,l)=>{if(e.meta?.type!==oe.P.HeatmapCells)return{warning:"Expected heatmap scanlines format",heatmap:e};if(e.fields.length<2||e.length<2)return{heatmap:e};const n=(0,T.d8)(e);let u,c,f;for(const g of e.fields)switch(g.name){case"y":c=g.name;case"yMin":case"yMax":{c||(c=g.name),n.yOrdinalDisplay==null&&Fe(g,t.yAxis,l);break}case"x":case"xMin":case"xMax":u=g.name;break;default:g.type===ye.fS.number&&!f&&(f=g)}if(!c)return{warning:"Missing Y field",heatmap:e};if(!c)return{warning:"Missing X field",heatmap:e};if(!f)return{warning:"Missing value field",heatmap:e};const r=Fe(f,t.cellValues,l),i=e.fields[0].values,B=e.fields[1].values,v=i.length;let z=v-B.lastIndexOf(B[0]),K=v/z,_=B[1]-B[0],R=i[z]-i[0],[N,b]=_e(f.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge),E=t.calculation?.xBuckets,C=t.calculation?.yBuckets;return{heatmap:e,heatmapColors:{palette:s,values:et(f.values,s,N,b),minValue:N,maxValue:b},exemplars:a?.length?a:void 0,xBucketSize:R,yBucketSize:_,xBucketCount:K,yBucketCount:z,yLog:C?.scale?.log??0,xLog:E?.scale?.log??0,xLogSplit:E?.scale?.log?+(E?.value??"1"):1,yLogSplit:C?.scale?.log?+(C?.value??"1"):1,xLayout:u==="xMax"?o.kv.le:u==="xMin"?o.kv.ge:o.kv.unknown,yLayout:c==="yMax"?o.kv.le:c==="yMin"?o.kv.ge:o.kv.unknown,display:g=>(0,he.zc)(r(g))}};function Fe(e,a,t){if(a?.unit?.length||a?.decimals!=null){const{unit:s,decimals:l}=a;e.display=void 0,e.config={...e.config},s?.length&&(e.config.unit=s),l!=null&&(e.config.decimals=l)}return e.display||(e.display=(0,xt.U)({field:e,theme:t})),e.display}var tt=y(6509),Lt=y(65040),lt=y(37479),k=y(49417);const Be=[{name:"BrBG",invert:"always"},{name:"PiYG",invert:"always"},{name:"PRGn",invert:"always"},{name:"PuOr",invert:"always"},{name:"RdBu",invert:"always"},{name:"RdGy",invert:"always"},{name:"RdYlBu",invert:"always"},{name:"RdYlGn",invert:"always"},{name:"Spectral",invert:"always"},{name:"Blues",invert:"dark"},{name:"Greens",invert:"dark"},{name:"Greys",invert:"dark"},{name:"Oranges",invert:"dark"},{name:"Purples",invert:"dark"},{name:"Reds",invert:"dark"},{name:"Turbo",invert:"light"},{name:"Cividis",invert:"light"},{name:"Viridis",invert:"light"},{name:"Magma",invert:"light"},{name:"Inferno",invert:"light"},{name:"Plasma",invert:"light"},{name:"Warm",invert:"light"},{name:"Cool",invert:"light"},{name:"Cubehelix",invert:"light",name2:"CubehelixDefault"},{name:"BuGn",invert:"dark"},{name:"BuPu",invert:"dark"},{name:"GnBu",invert:"dark"},{name:"OrRd",invert:"dark"},{name:"PuBuGn",invert:"dark"},{name:"PuBu",invert:"dark"},{name:"PuRd",invert:"dark"},{name:"RdPu",invert:"dark"},{name:"YlGnBu",invert:"dark"},{name:"YlGn",invert:"dark"},{name:"YlOrBr",invert:"dark"},{name:"YlOrRd",invert:"dark"},{name:"Rainbow",invert:"always"},{name:"Sinebow",invert:"always"}],wt=Be.find(e=>e.name==="Spectral");function De(e,a){const t={...k.vC.color,...e},s=[],l=(t.steps??128)-1;if(e.mode===k.S_.Opacity){const n=(0,lt.Z)(a.visualization.getColorByName(e.fill)).toPercentageRgb(),u=t.scale===k.YG.Exponential?tt.scalePow().exponent(t.exponent).domain([0,1]).range([0,1]):tt.scaleLinear().domain([0,1]).range([0,1]);for(let c=0;c<=l;c++)n.a=u(c/l),s.push((0,lt.Z)(n).toString("hex8"))}else{const n=Be.find(f=>f.name===t.scheme)??wt;let u="interpolate"+(n.name2??n.name);const c=Lt[u];for(let f=0;f<=l;f++){let r=c(f/l),i=r.indexOf("rgb")===0?"#"+[...r.matchAll(/\d+/g)].map(B=>(+B[0]).toString(16).padStart(2,"0")).join(""):r;s.push(i)}(n.invert==="always"||n.invert==="dark"&&a.isDark||n.invert==="light"&&a.isLight)&&s.reverse(),e.reverse&&s.reverse()}return s}const bt=({data:e,id:a,timeRange:t,timeZone:s,width:l,height:n,options:u,fieldConfig:c,eventBus:f,onChangeTimeRange:r,replaceVariables:i})=>{const B=(0,ue.l4)(),v=(0,ue.wW)(Et),{sync:z,canAddAnnotations:K}=(0,ve.R9)(),_=!!(K&&K());let R=[];for(const w of e.series)for(const F of w.fields)F.state?.scopedVars&&R.push(F.state.scopedVars);let N=(0,d.useRef)(t);N.current=t;const b=(0,d.useCallback)((w,F)=>(0,ge.oB)(w,F,F.state?.scopedVars??{},i),[i]),E=(0,d.useMemo)(()=>De(u.color,B),[u.color,B]),C=(0,d.useMemo)(()=>{try{return Ue(e.series,e.annotations,u,E,B,b,i)}catch(w){return{warning:`${w}`}}},[e.series,e.annotations,u,E,B,b,i]),J=(0,d.useMemo)(()=>{let w=[],F=[];const D=(0,T.d8)(C.heatmap);return C.exemplars?.length&&(w=C.exemplars?.fields[0].values,D.yMatchWithLabel&&D.yOrdinalDisplay!=null?F=(C.exemplars?.fields.find(le=>le.name===D.yMatchWithLabel).values).map(le=>D.yOrdinalLabel?.indexOf(le)):F=C.exemplars?.fields[1].values),[null,C.heatmap?.fields.map(G=>G.values),[w,F]]},[C.heatmap,C.exemplars]),[g,H]=(0,d.useState)(void 0),[V,ee]=(0,d.useState)(!1),O=(0,d.useRef)(!1),Y=()=>{O.current=!1,ee(!1),j(null)},Q=()=>{O.current=!O.current,ee(O.current)},j=(0,d.useCallback)(w=>{H(w??void 0)},[u,e.structureRev]),$=(0,d.useRef)(C);$.current=C;const te=fe.config.featureToggles.newVizTooltips&&z&&z()===Se.m.Off,S=(0,d.useMemo)(()=>{const w=$.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;return St({dataRef:$,theme:B,eventBus:f,onhover:te?null:j,onclick:!te&&u.tooltip.mode!==o.f3.None?Q:null,isToolTipOpen:O,timeZone:s,getTimeRange:()=>N.current,sync:z,cellGap:u.cellGap,hideLE:u.filterValues?.le,hideGE:u.filterValues?.ge,exemplarColor:u.exemplars?.color??"rgba(255,0,255,0.7)",yAxisConfig:u.yAxis,ySizeDivisor:w?.type===o.wf.Log?+(u.calculation?.yBuckets?.value||1):1})},[u,s,e.structureRev]),X=()=>{if(!C.heatmap||!u.legend.show)return null;let D=$.current?.heatmap?.meta?.type===oe.P.HeatmapCells&&!(0,T.qJ)($.current?.heatmap)?3:2;const G=C.heatmap.fields[D];let P;return g&&C.heatmap.fields&&g.seriesIdx===1&&(P=G.values[g.dataIdx]),d.createElement(ke.AY.Legend,{placement:"bottom",maxHeight:"20%"},d.createElement("div",{className:v.colorScaleWrapper},d.createElement(se.q,{hoverValue:P,colorPalette:E,min:$.current.heatmapColors?.minValue,max:$.current.heatmapColors?.maxValue,display:C.display})))};return C.warning||!C.heatmap?d.createElement(pe.Z,{panelId:a,fieldConfig:c,data:e,needsNumberField:!0,message:C.warning}):d.createElement(d.Fragment,null,d.createElement(ke.AY,{width:l,height:n,legend:X()},(w,F)=>d.createElement(Oe.N,{config:S,data:J,width:w,height:F},!te&&d.createElement(de.R,{config:S,onZoom:r}),te&&u.tooltip.mode!==o.f3.None&&d.createElement(Ee.x2,{config:S,hoverMode:Ee.cm.xyOne,queryZoom:r,render:(D,G,P,le,ie)=>d.createElement(ut,{mode:u.tooltip.mode,dataIdxs:G,seriesIdx:P,dataRef:$,isPinned:le,dismiss:ie,showHistogram:u.tooltip.yHistogram,showColorScale:u.tooltip.showColorScale,canAnnotate:_,panelData:e,replaceVars:i,scopedVars:R})}),e.annotations&&d.createElement(ze._,{annotations:e.annotations,config:S,timeZone:s,disableCanvasRendering:!0}))),!te&&d.createElement(Ae.h_,null,g&&u.tooltip.mode!==o.f3.None&&d.createElement(He.S,{position:{x:g.pageX,y:g.pageY},offset:{x:10,y:10},allowPointerEvents:O.current},V&&d.createElement(Te.o,{onClick:Y}),d.createElement(ht,{timeRange:t,data:C,hover:g,showHistogram:u.tooltip.yHistogram,replaceVars:i,scopedVars:R}))))},Et=e=>({colorScaleWrapper:(0,ce.css)({marginLeft:"25px",padding:"10px 0",maxWidth:"300px"})}),Ht=e=>{if(Object.keys(e.options??{}).length===0)return at(e,"heatmap",{angular:e},e.fieldConfig);let a=e.options?.tooltip?.show;return a!==void 0&&(a===!0?e.options.tooltip.mode=o.f3.Single:a===!1&&(e.options.tooltip.mode=o.f3.None),delete e.options.tooltip?.show),e.options},at=(e,a,t,s)=>{if(a==="heatmap"&&t.angular){const{fieldConfig:l,options:n}=Nt({...t.angular,fieldConfig:s});return e.fieldConfig=l,n}if(a==="heatmap-new"){const{bucketFrame:l,...n}=e.options;return l?{...n,rowsFrame:l}:e.options}return{}};function Nt(e){const a={defaults:{},overrides:[]},t=e.dataFormat!=="tsbuckets",s={...k.vC.calculation},l={logBase:1,...e.yAxis};t&&(e.xBucketSize?s.xBuckets={mode:o.kW.Size,value:`${e.xBucketSize}`}:e.xBucketNumber&&(s.xBuckets={mode:o.kW.Count,value:`${e.xBucketNumber}`}),e.yBucketSize?s.yBuckets={mode:o.kW.Size,value:`${e.yBucketSize}`}:e.xBucketNumber&&(s.yBuckets={mode:o.kW.Count,value:`${e.yBucketNumber}`}),l.logBase>1&&(s.yBuckets={mode:o.kW.Count,value:+l.splitFactor>0?`${l.splitFactor}`:void 0,scale:{type:o.wf.Log,log:l.logBase}}));const n=Pe(e.cards?.cardPadding,2),u={calculate:t,calculation:s,color:{...k.vC.color,steps:128},cellGap:n||1,cellRadius:Pe(e.cards?.cardRound),yAxis:{axisPlacement:l.show===!1?o.LB.Hidden:o.LB.Left,reverse:!!e.reverseYBuckets,axisWidth:Pe(l.width),min:l.min,max:l.max,unit:l.format,decimals:l.decimals},cellValues:{decimals:Pe(e.tooltipDecimals)},rowsFrame:{layout:Vt(e.yBucketBound)},legend:{show:!!e.legend?.show},showValue:o.Jp.Never,tooltip:{mode:e.tooltip?.show?o.f3.Single:o.f3.None,yHistogram:!!e.tooltip?.showHistogram},exemplars:{...k.vC.exemplars}};e.hideZeroBuckets&&(u.filterValues={...k.vC.filterValues});const c=e.color??{};switch(c?.mode){case"spectrum":{u.color.mode=k.S_.Scheme;const f=c.colorScheme;let r=Be.find(i=>i.name===f);r||(r=Be.find(i=>f.indexOf(i.name)>=0)),u.color.scheme=r?r.name:k.vC.color.scheme;break}case"opacity":{u.color.mode=k.S_.Opacity,u.color.scale=c.scale;break}}return u.color.fill=c.cardColor,u.color.min=c.min,u.color.max=c.max,typeof c.min=="number"&&typeof c.max=="number"&&c.min>c.max&&(u.color.min=c.max,u.color.max=c.min,u.color.reverse=!0),{fieldConfig:a,options:u}}function Vt(e){switch(e){case"upper":return o.kv.ge;case"lower":return o.kv.le;case"middle":return o.kv.unknown}return o.kv.auto}function Pe(e,a){if(e==null||e==="")return a;const t=+e;return isNaN(t)?a:t}class Ft{getSuggestionsForData(a){const{dataSummary:t}=a;if(!a.data?.series||!t.hasData||t.timeFieldCount<1||t.numberFieldCount<2||t.numberFieldCount>10)return;const s=De(k.vC.color,fe.config.theme2),l=Ue(a.data.series,void 0,k.vC,s,fe.config.theme2);!l||l.warning||a.getListAppender({name:"",pluginId:"heatmap",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}})}}const Dt=new ne.c(bt).useFieldConfig({disableStandardOptions:Object.values(we.qb).filter(e=>e!==we.qb.Links),useCustomConfig:e=>{e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Y axis scale",category:["Heatmap"],editor:be.Y,override:be.Y,defaultValue:{type:o.wf.Linear},shouldApply:a=>a.type===ye.fS.number,process:Re.kG,hideFromDefaults:!0}),(0,ae.B)(e)}}).setPanelChangeHandler(at).setMigrationHandler(Ht).setPanelOptions((e,a)=>{const t=a.options??k.vC;let s=!1;if(a.data.length>0)try{const n=De(t.color,fe.config.theme2),u=Ue(a.data,void 0,t,n,fe.config.theme2,void 0,a.replaceVariables);s=(0,T.d8)(u.heatmap).yOrdinalDisplay!=null}catch{}let l=["Heatmap"];e.addRadio({path:"calculate",name:"Calculate from data",defaultValue:k.vC.calculate,category:l,settings:{options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}),t.calculate&&(0,xe.J)("calculation.",e,t.calculation,l),l=["Y Axis"],e.addRadio({path:"yAxis.axisPlacement",name:"Placement",defaultValue:k.vC.yAxis.axisPlacement??o.LB.Left,category:l,settings:{options:[{label:"Left",value:o.LB.Left},{label:"Right",value:o.LB.Right},{label:"Hidden",value:o.LB.Hidden}]}}).addUnitPicker({category:l,path:"yAxis.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"yAxis.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),s||e.addNumberInput({path:"yAxis.min",name:"Min value",settings:{placeholder:"Auto"},category:l}).addTextInput({path:"yAxis.max",name:"Max value",settings:{placeholder:"Auto"},category:l}),e.addNumberInput({path:"yAxis.axisWidth",name:"Axis width",defaultValue:k.vC.yAxis.axisWidth,settings:{placeholder:"Auto",min:5},category:l}).addTextInput({path:"yAxis.axisLabel",name:"Axis label",defaultValue:k.vC.yAxis.axisLabel,settings:{placeholder:"Auto"},category:l}),t.calculate||e.addRadio({path:"rowsFrame.layout",name:"Tick alignment",defaultValue:k.vC.rowsFrame?.layout??o.kv.auto,category:l,settings:{options:[{label:"Auto",value:o.kv.auto},{label:"Top (LE)",value:o.kv.le},{label:"Middle",value:o.kv.unknown},{label:"Bottom (GE)",value:o.kv.ge}]}}),e.addBooleanSwitch({path:"yAxis.reverse",name:"Reverse",defaultValue:k.vC.yAxis.reverse===!0,category:l}),l=["Colors"],e.addRadio({path:"color.mode",name:"Mode",defaultValue:k.vC.color.mode,category:l,settings:{options:[{label:"Scheme",value:k.S_.Scheme},{label:"Opacity",value:k.S_.Opacity}]}}),e.addColorPicker({path:"color.fill",name:"Color",defaultValue:k.vC.color.fill,category:l,showIf:n=>n.color.mode===k.S_.Opacity}),e.addRadio({path:"color.scale",name:"Scale",defaultValue:k.vC.color.scale,category:l,settings:{options:[{label:"Exponential",value:k.YG.Exponential},{label:"Linear",value:k.YG.Linear}]},showIf:n=>n.color.mode===k.S_.Opacity}),e.addSliderInput({path:"color.exponent",name:"Exponent",defaultValue:k.vC.color.exponent,category:l,settings:{min:.1,max:2,step:.1},showIf:n=>n.color.mode===k.S_.Opacity&&n.color.scale===k.YG.Exponential}),e.addSelect({path:"color.scheme",name:"Scheme",description:"",defaultValue:k.vC.color.scheme,category:l,settings:{options:Be.map(n=>({value:n.name,label:n.name}))},showIf:n=>n.color.mode!==k.S_.Opacity}),e.addSliderInput({path:"color.steps",name:"Steps",defaultValue:k.vC.color.steps,category:l,settings:{min:2,max:128,step:1}}).addBooleanSwitch({path:"color.reverse",name:"Reverse",defaultValue:k.vC.color.reverse,category:l}).addCustomEditor({id:"__scale__",path:"__scale__",name:"",category:l,editor:()=>{const n=De(t.color,fe.config.theme2);return d.createElement("div",null,d.createElement(se.q,{colorPalette:n,min:1,max:100}))}}),e.addNumberInput({path:"color.min",name:"Start color scale from value",defaultValue:k.vC.color.min,settings:{placeholder:"Auto (min)"},category:l}).addNumberInput({path:"color.max",name:"End color scale at value",defaultValue:k.vC.color.max,settings:{placeholder:"Auto (max)"},category:l}),l=["Cell display"],t.calculate||e.addTextInput({path:"rowsFrame.value",name:"Value name",defaultValue:k.vC.rowsFrame?.value,settings:{placeholder:"Value"},category:l}),e.addUnitPicker({category:l,path:"cellValues.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"cellValues.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),e.addSliderInput({name:"Cell gap",path:"cellGap",defaultValue:k.vC.cellGap,category:l,settings:{min:0,max:25}}).addNumberInput({path:"filterValues.le",name:"Hide cells with values <=",defaultValue:k.vC.filterValues?.le,settings:{placeholder:"None"},category:l}).addNumberInput({path:"filterValues.ge",name:"Hide cells with values >=",defaultValue:k.vC.filterValues?.ge,settings:{placeholder:"None"},category:l}),l=["Tooltip"],e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:l,defaultValue:o.f3.Single,settings:{options:[{value:o.f3.Single,label:"Single"},{value:o.f3.Multi,label:"All"},{value:o.f3.None,label:"Hidden"}]}}),e.addBooleanSwitch({path:"tooltip.yHistogram",name:"Show histogram (Y axis)",defaultValue:k.vC.tooltip.yHistogram,category:l,showIf:n=>n.tooltip.mode!==o.f3.None}),e.addBooleanSwitch({path:"tooltip.showColorScale",name:"Show color scale",defaultValue:k.vC.tooltip.showColorScale,category:l,showIf:n=>n.tooltip.mode!==o.f3.None&&fe.config.featureToggles.newVizTooltips}),l=["Legend"],e.addBooleanSwitch({path:"legend.show",name:"Show legend",defaultValue:k.vC.legend.show,category:l}),l=["Exemplars"],e.addColorPicker({path:"exemplars.color",name:"Color",defaultValue:k.vC.exemplars.color,category:l})}).setSuggestionsSupplier(new Ft).setDataSupport({annotations:!0})}}]);

//# sourceMappingURL=heatmapPanel.d0d81645401f8f58576a.js.map