"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1085,3889],{76244:(v,s,e)=>{e.d(s,{x:()=>c});var t=e(31733),o=e(42342),i=e(92089);function c(a){const m=(0,o.useDispatch)(),f=(0,t.useRef)(a);f.current=a,(0,t.useEffect)(()=>()=>{m((0,i.e)({cleanupAction:f.current}))},[m])}},71085:(v,s,e)=>{e.r(s),e.d(s,{default:()=>I});var t=e(31733),o=e(25111),i=e(3889),c=e(1203),a=e(54126),m=e(79106),f=e(51343),h=e(76244),p=e(42342),M=e(68144),O=e(84415),P=e(23999),D=e(67451),E=e(66172),R=e(71103),S=e(39138),x=e(34420);const C={smtp_require_tls:!0},L=({config:l,alertManagerSourceName:r})=>{const d=(0,p.useDispatch)();(0,h.x)(n=>n.unifiedAlerting.saveAMConfig=S.oq);const{loading:g,error:u}=(0,M._)(n=>n.saveAMConfig),A=(0,D.RY)(r),y=(0,a.cI)({defaultValues:JSON.parse(JSON.stringify({...C,...l.alertmanager_config.global??{}}))}),{handleSubmit:T,formState:{errors:U}}=y,W=n=>{d((0,O.mM)({newConfig:{...l,alertmanager_config:{...l.alertmanager_config,global:(0,R.oP)(n)}},oldConfig:l,alertManagerSourceName:r,successMessage:"Global config updated.",redirectPath:(0,E.eQ)("/alerting/notifications",r)}))};return t.createElement(a.RV,{...y},t.createElement("form",{onSubmit:T(W)},u&&t.createElement(o.b,{severity:"error",title:"Error saving receiver"},u.message||String(u)),P.g.map(n=>t.createElement(x.t,{readOnly:A,defaultValue:C[n.propertyName],key:n.propertyName,option:n,error:U[n.propertyName],pathPrefix:""})),t.createElement("div",null,t.createElement(m.Lh,null,!A&&t.createElement(t.Fragment,null,g&&t.createElement(f.zx,{disabled:!0,icon:"spinner",variant:"primary"},"Saving..."),!g&&t.createElement(f.zx,{type:"submit"},"Save global config")),t.createElement(f.Qj,{disabled:g,fill:"outline",variant:"secondary",href:(0,E.eQ)("alerting/notifications",r)},"Cancel")))))},I=()=>{const{selectedAlertmanager:l}=(0,c.ZA)(),{data:r,isLoading:d,error:g}=(0,i.W)(l);return d&&!r?"loading...":g?t.createElement(o.b,{severity:"error",title:"Failed to fetch notification template"},String(g)):r?t.createElement(L,{config:r,alertManagerSourceName:l}):null}},3889:(v,s,e)=>{e.d(s,{W:()=>o});var t=e(42460);function o(i,c){const a=t.alertmanagerApi.endpoints.getAlertmanagerConfiguration.useQuery(i??"",{...c,skip:!i});return{...a,error:a.error}}}}]);

//# sourceMappingURL=1085.8f3d7aab93983a14a0a5.js.map