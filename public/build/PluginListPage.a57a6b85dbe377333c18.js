"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[94],{22790:(ne,A,s)=>{s.d(A,{Nq:()=>m,Do:()=>h,SX:()=>r,IF:()=>G,oZ:()=>B,xh:()=>Z});var l=s(31733),e=s(59889),v=s(50248);function r({error:c}){const S=x(c);return l.createElement(v.C,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:S})}function x(c){switch(c){case e.w2.modifiedSignature:return"Plugin disabled due to modified content";case e.w2.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.w2.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${c?`: ${c}`:""}`}}var d=s(76067),D=s(76932);const E=c=>(0,D.css)`
  background: ${c.colors.background.primary};
  border-color: ${c.colors.border.strong};
  color: ${c.colors.text.secondary};
`;function B(){const c=(0,d.wW)(E);return l.createElement(v.C,{text:"Installed",color:"orange",className:c})}var T=s(28298),W=s(79106),F=s(22525),b=s(51343);function G({plugin:c}){const S=(0,d.wW)(E),R=M=>{M.preventDefault(),window.open(`https://grafana.com/grafana/plugins/${c.id}?utm_source=grafana_catalog_learn_more`,"_blank","noopener,noreferrer")};return(0,T.v)("enterprise.plugins")?l.createElement(v.C,{text:"Enterprise",color:"blue"}):l.createElement(W.Lh,null,l.createElement(F.o,{status:c.signature}),l.createElement(v.C,{icon:"lock","aria-label":"lock icon",text:"Enterprise",color:"blue",className:S}),l.createElement(b.zx,{size:"sm",fill:"text",icon:"external-link-alt",onClick:R},"Learn more"))}function Z({plugin:c}){const S=(0,d.wW)(C);return l.createElement("p",{className:S.hasUpdate},"Update available!")}const C=c=>({hasUpdate:(0,D.css)`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function m(){return l.createElement(v.C,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function h(){return l.createElement(v.C,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},79299:(ne,A,s)=>{s.r(A),s.d(A,{default:()=>N});var l=s(76932),e=s(31733),v=s(97890),r=s(19690),x=s(76067),d=s(85765),D=s(38834),E=s(96856),B=s(58037),T=s(50186),W=s(90845),F=s(24477),b=s(42342),G=s(81797),Z=s(85498),C=s(41431),m=s(49744),h=s(49876),c=s(49311),S=s(37739),R=s(50248),M=s(95885),w=s(59889),H=s(79106),V=s(22525),f=s(22790);function X({plugin:n}){const g=n.hasUpdate&&!n.isCore&&n.type!==w.zV.renderer;return n.isEnterprise?e.createElement(H.Lh,{height:"auto",wrap:!0},e.createElement(f.IF,{plugin:n}),n.isDisabled&&e.createElement(f.SX,{error:n.error}),g&&e.createElement(f.xh,{plugin:n}),n.angularDetected&&e.createElement(f.Nq,null)):e.createElement(H.Lh,{height:"auto",wrap:!0},e.createElement(V.o,{status:n.signature}),n.isDisabled&&e.createElement(f.SX,{error:n.error}),n.isDeprecated&&e.createElement(f.Do,null),n.isInstalled&&e.createElement(f.oZ,null),g&&e.createElement(f.xh,{plugin:n}),n.angularDetected&&e.createElement(f.Nq,null))}function J({alt:n,className:g,src:o,height:u}){return e.createElement("img",{src:o,className:g,alt:n,loading:"lazy",height:u})}const z="48px";function K({plugin:n,pathName:g,displayMode:o=m.lL.Grid}){const u=(0,x.wW)($),y=o===m.lL.List;return e.createElement("a",{href:`${g}/${n.id}`,className:(0,l.cx)(u.container,{[u.list]:y})},e.createElement(J,{src:n.info.logos.small,className:u.pluginLogo,height:z,alt:""}),e.createElement("h2",{className:(0,l.cx)(u.name,"plugin-name")},n.name),e.createElement("div",{className:(0,l.cx)(u.content,"plugin-content")},e.createElement("p",null,"By ",n.orgName),e.createElement(X,{plugin:n})),e.createElement("div",{className:u.pluginType},n.type&&e.createElement(c.J,{name:m.Co[n.type],title:`${n.type} plugin`})))}const Y=({displayMode:n=m.lL.Grid,rootProps:g})=>{const o=(0,x.wW)($),u=n===m.lL.List;return e.createElement("div",{className:(0,l.cx)(o.container,{[o.list]:u}),...g},e.createElement(h.Z,{containerClassName:(0,l.cx)(o.pluginLogo,(0,l.css)({lineHeight:1})),width:z,height:z}),e.createElement("h2",{className:o.name},e.createElement(h.Z,{width:100})),e.createElement("div",{className:o.content},e.createElement("p",null,e.createElement(h.Z,{width:120})),e.createElement(S.K,{direction:"row"},e.createElement(R.C.Skeleton,null),e.createElement(R.C.Skeleton,null))),e.createElement("div",{className:o.pluginType},e.createElement(h.Z,{width:16,height:16})))},Q=(0,M.y)(K,Y),$=n=>({container:(0,l.css)({display:"grid",gridTemplateColumns:`${z} 1fr ${n.spacing(3)}`,gridTemplateRows:"auto",gap:n.spacing(2),gridAutoFlow:"row",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,padding:n.spacing(3),transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{background:n.colors.emphasize(n.colors.background.secondary,.03)}}),list:(0,l.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:n.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,l.css)({gridArea:"1 / 3 / 2 / 4",color:n.colors.text.secondary}),pluginLogo:(0,l.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,l.css)({gridArea:"3 / 1 / 4 / 3",color:n.colors.text.secondary}),name:(0,l.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:n.typography.h4.fontSize,color:n.colors.text.primary,margin:0})}),k=({plugins:n,displayMode:g,isLoading:o})=>{const u=g===m.lL.List,{pathname:y}=(0,v.TH)(),te=Z.config.appSubUrl+(y.endsWith("/")?y.slice(0,-1):y);return e.createElement(C.r,{gap:3,...u?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list"},o?new Array(50).fill(null).map((I,U)=>e.createElement(Q.Skeleton,{key:U,displayMode:g})):n.map(I=>e.createElement(Q,{key:I.id,plugin:I,pathName:te,displayMode:g})))};var q=s(24789),_=s(76804);const ee=(n,g=0,o=[])=>{const u=(0,e.useRef)(!0),y=[...o,u];return(0,q.Z)(()=>{if(u.current){u.current=!1;return}return n()},g,y)},t=({value:n,onSearch:g})=>{const[o,u]=(0,e.useState)(n);return ee(()=>g(o??""),500,[o]),e.createElement(_.H,{value:o,onKeyDown:y=>{(y.key==="Enter"||y.keyCode===13)&&g(y.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:y=>{u(y)},width:46})};var a=s(72311);const p=()=>({push:({query:n})=>{r.E1.partial(n)}});var i=s(6679);function N({route:n}){const g=(0,v.TH)(),o=(0,r.Ox)(g.search),u=(0,b.useSelector)(L=>(0,W.ht)(L.navIndex,"plugins")),{displayMode:y,setDisplayMode:te}=(0,i.iY)(),I=(0,x.wW)(P),U=p(),ce=(0,i.y9)(),se=o.q?.toString()||"",j=o.filterBy?.toString()||"installed",O=o.filterByType||"all",ae=o.sortBy||a.Nh.nameAsc,{isLoading:ie,error:le,plugins:ue}=(0,i.Pj)({keyword:se,type:O!=="all"?O:void 0,isInstalled:j==="installed"?!0:void 0},ae),oe=[{value:"all",label:"All"},{value:"installed",label:"Installed"}],de=L=>{U.push({query:{sortBy:L.value}})},re=L=>{U.push({query:{filterBy:L}})},ge=L=>{U.push({query:{filterByType:L.value}})},me=L=>{U.push({query:{filterBy:j,filterByType:O,q:L}})};if(le)return console.error(le.message),null;const pe=e.createElement("div",null,"Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",e.createElement("a",{className:"external-link",href:`${F.Z.AddNewConnection}?cat=data-source`},"Connections"),".");return e.createElement(T.T,{navModel:u,subTitle:pe},e.createElement(T.T.Contents,null,e.createElement(G.L,{wrap:!0},e.createElement(d.g,{label:"Search"},e.createElement(t,{value:se,onSearch:me})),e.createElement(G.L,{wrap:!0,className:I.actionBar},e.createElement(d.g,{label:"Type"},e.createElement(D.Ph,{"aria-label":"Plugin type filter",value:O,onChange:ge,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})),ce?e.createElement(d.g,{label:"State"},e.createElement(E.S,{value:j,onChange:re,options:oe})):e.createElement(B.u,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top"},e.createElement("div",null,e.createElement(d.g,{label:"State"},e.createElement(E.S,{disabled:!0,value:j,onChange:re,options:oe})))),e.createElement(d.g,{label:"Sort"},e.createElement(D.Ph,{"aria-label":"Sort Plugins List",width:24,value:ae,onChange:de,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})),e.createElement(d.g,{label:"View"},e.createElement(E.S,{className:I.displayAs,value:y,onChange:te,options:[{value:m.lL.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:m.lL.List,icon:"list-ul",description:"Display plugins in list"}]})))),e.createElement("div",{className:I.listWrap},e.createElement(k,{plugins:ue,displayMode:y,isLoading:ie}))))}const P=n=>({actionBar:(0,l.css)({[n.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,l.css)({marginTop:n.spacing(2)}),displayAs:(0,l.css)({svg:{marginRight:0}})})},6679:(ne,A,s)=>{s.d(A,{iY:()=>ee,or:()=>_,bt:()=>K,ZV:()=>z,Pj:()=>S,UQ:()=>w,bJ:()=>R,x3:()=>H,IS:()=>Y,y9:()=>X,S1:()=>f,wq:()=>Q,kH:()=>V});var l=s(31733),e=s(42342),v=s(72311),r=s(62873),x=s(70943),d=s(7261),D=s(84834),E=s(49744);const B=t=>t.plugins,T=(0,d.P1)(B,({items:t})=>t),W=(0,d.P1)(B,({settings:t})=>t.displayMode),{selectAll:F,selectById:b}=x.CD.getSelectors(T),G=t=>(0,d.P1)(F,a=>{const p=t.keyword?(0,D.x6)(t.keyword.toLowerCase()):"";return a.filter(i=>{const N=[i.name,i.orgName].filter(Boolean).map(P=>P.toLowerCase());return!(p&&!N.some(P=>P.includes(p))||t.type&&i.type!==t.type||t.isInstalled!==void 0&&i.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&i.isEnterprise!==t.isEnterprise)})}),Z=t=>(0,d.P1)(F,a=>{const p=[];for(const i of a)i.error&&(!t||i.type===t)&&p.push({pluginId:i.id,errorCode:i.error,pluginType:i.type});return p}),C=t=>(0,d.P1)(B,({requests:a={}})=>a[t]),m=t=>(0,d.P1)(C(t),a=>a?.status===E.eE.Pending),h=t=>(0,d.P1)(C(t),a=>a?.status===E.eE.Rejected?a?.error:null),c=t=>(0,d.P1)(C(t),a=>a===void 0),S=(t,a=v.Nh.nameAsc)=>{$();const p=(0,l.useMemo)(()=>G(t),[t]),i=(0,e.useSelector)(p),{isLoading:N,error:P}=J(),n=(0,v.AA)(i,a);return{isLoading:N,error:P,plugins:n}},R=t=>($(),q(t),(0,e.useSelector)(a=>b(a,t))),M=t=>(k(),useSelector(a=>selectById(a,t))),w=t=>($(),(0,e.useSelector)(Z(t))),H=()=>{const t=(0,e.useDispatch)();return(a,p,i)=>t((0,r.N9)({id:a,version:p,isUpdating:i}))},V=()=>{const t=(0,e.useDispatch)();return()=>t((0,r.bQ)())},f=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.Tz)(a))},X=()=>(0,e.useSelector)(h(r.tQ.typePrefix))===null,J=()=>{const t=(0,e.useSelector)(m("plugins/fetchLocal")),a=(0,e.useSelector)(h("plugins/fetchLocal"));return{isLoading:t,error:a}},z=()=>{const t=(0,e.useSelector)(m(r.Qd.typePrefix)),a=(0,e.useSelector)(h(r.Qd.typePrefix));return{isLoading:t,error:a}},K=()=>{const t=(0,e.useSelector)(m(r.DD.typePrefix)),a=(0,e.useSelector)(h(r.DD.typePrefix));return{isLoading:t,error:a}},Y=()=>{const t=(0,e.useSelector)(m(r.N9.typePrefix)),a=(0,e.useSelector)(h(r.N9.typePrefix));return{isInstalling:t,error:a}},Q=()=>{const t=(0,e.useSelector)(m(r.Tz.typePrefix)),a=(0,e.useSelector)(h(r.Tz.typePrefix));return{isUninstalling:t,error:a}},$=()=>{const t=(0,e.useDispatch)(),a=(0,e.useSelector)(c(r.Qd.typePrefix));(0,l.useEffect)(()=>{a&&t((0,r.Qd)())},[])},k=()=>{const t=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&t(fetchAllLocal())},[])},q=t=>{const a=(0,e.useDispatch)(),p=(0,e.useSelector)(P=>b(P,t)),N=!(0,e.useSelector)(m(r.DD.typePrefix))&&p&&!p.details;(0,l.useEffect)(()=>{N&&a((0,r.DD)(t))},[p])},_=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.DD)(a))},ee=()=>{const t=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(W),setDisplayMode:p=>t((0,x.UC)(p))}}}}]);

//# sourceMappingURL=PluginListPage.a57a6b85dbe377333c18.js.map