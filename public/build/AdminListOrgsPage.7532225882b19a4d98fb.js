"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3798],{47513:(z,i,t)=>{t.r(i),t.d(i,{default:()=>$});var e=t(31733),v=t(74282),o=t(69391),d=t(51343),g=t(50186),f=t(56811),E=t(42342),y=t(76932),c=t(49876),O=t(90069),A=t(76067),C=t(95885),D=t(75923);const u=()=>e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"ID"),e.createElement("th",null,"Name"),e.createElement("th",{style:{width:"1%"}})));function b({orgs:n,onDelete:l}){const r=D.Vt.hasPermission(E.AccessControlAction.OrgsDelete),[a,m]=(0,e.useState)();return e.createElement("table",{className:"filter-table form-inline filter-table--hover"},u(),e.createElement("tbody",null,n.map(s=>e.createElement("tr",{key:`${s.id}-${s.name}`},e.createElement("td",{className:"link-td"},e.createElement("a",{href:`admin/orgs/edit/${s.id}`},s.id)),e.createElement("td",{className:"link-td"},e.createElement("a",{href:`admin/orgs/edit/${s.id}`},s.name)),e.createElement("td",{className:"text-right"},e.createElement(d.zx,{variant:"destructive",size:"sm",icon:"times",onClick:()=>m(s),"aria-label":"Delete org",disabled:!r}))))),a&&e.createElement(O.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:e.createElement("div",null,"Are you sure you want to delete '",a.name,"'?",e.createElement("br",null)," ",e.createElement("small",null,"All dashboards for this organization will be removed!")),confirmText:"Delete",onDismiss:()=>m(void 0),onConfirm:()=>{l(a.id),m(void 0)}}))}const N=({rootProps:n})=>{const l=(0,A.wW)(T);return e.createElement("table",{className:"filter-table",...n},u(),e.createElement("tbody",null,new Array(3).fill(null).map((r,a)=>e.createElement("tr",{key:a},e.createElement("td",null,e.createElement(c.Z,{width:16})),e.createElement("td",null,e.createElement(c.Z,{width:240})),e.createElement("td",null,e.createElement(c.Z,{containerClassName:l.deleteButton,width:22,height:24}))))))},h=(0,C.y)(b,N),T=n=>({deleteButton:(0,y.css)({alignItems:"center",display:"flex",height:30,lineHeight:1})}),x=async n=>await(0,o.i)().delete("/api/orgs/"+n),S=async()=>await(0,o.i)().get("/api/orgs"),P=n=>(0,o.kW)(n)?n?.data?.message:"An unexpected error happened.";function $(){const[n,l]=(0,v.default)(async()=>await S(),[]),r=f.contextSrv.hasPermission(E.AccessControlAction.OrgsCreate);return(0,e.useEffect)(()=>{l()},[l]),e.createElement(g.T,{navId:"global-orgs",actions:e.createElement(d.Qj,{icon:"plus",href:"org/new",disabled:!r},"New org")},e.createElement(g.T.Contents,null,n.error&&P(n.error),n.loading&&e.createElement(h.Skeleton,null),n.value&&e.createElement(h,{orgs:n.value,onDelete:a=>{x(a).then(()=>l())}})))}}}]);

//# sourceMappingURL=AdminListOrgsPage.7532225882b19a4d98fb.js.map