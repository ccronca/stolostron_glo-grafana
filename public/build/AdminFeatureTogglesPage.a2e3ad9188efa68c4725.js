"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7129],{81819:(W,E,a)=>{a.r(E),a.d(E,{default:()=>R});var d=a(76932),e=a(31733),y=a(76067),S=a(49311),T=a(50186),u=a(13250),C=a(58037),x=a(76772),F=a(51343),b=a(77543);const A=(t,r)=>t.original.name.localeCompare(r.original.name),I=(t,r)=>{if(!t.original.description&&!r.original.description)return 0;if(t.original.description){if(!r.original.description)return-1}else return 1;return t.original.description.localeCompare(r.original.description)},N=(t,r)=>t.original.enabled===r.original.enabled?0:t.original.enabled?1:-1;function B({featureToggles:t,allowEditing:r,onUpdateSuccess:m}){const s=(0,e.useRef)(t),[o,f]=(0,e.useState)(t),[i]=(0,u.f$)(),[c,g]=(0,e.useState)(!1),p=(n,l)=>{const L={...n,enabled:l},O=o.map(h=>h.name===n.name?L:h);f(O)},v=async()=>{g(!0);try{const n=P();"error"in await i(n)||(s.current=[...o],m())}finally{g(!1)}},P=()=>o.filter((n,l)=>n.enabled!==s.current[l].enabled),w=()=>o.some((n,l)=>n.enabled!==s.current[l].enabled),U=n=>r?n?"Preview features are not editable":"":"Feature management is not configured for editing",D=[{id:"name",header:"Name",cell:({cell:{value:n}})=>e.createElement("div",null,n),sortType:A},{id:"description",header:"Description",cell:({cell:{value:n}})=>e.createElement("div",null,n),sortType:I},{id:"enabled",header:"State",cell:({row:n})=>e.createElement(C.u,{content:U(n.original.readOnly)},e.createElement("div",null,e.createElement(x.r,{value:n.original.enabled,disabled:n.original.readOnly,onChange:l=>p(n.original,l.currentTarget.checked)}))),sortType:N}];return e.createElement(e.Fragment,null,r&&e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"0 0 5px 0"}},e.createElement(F.zx,{disabled:!w()||c,onClick:v},c?"Saving...":"Save Changes")),e.createElement(b.e,{columns:D,data:o,getRowId:n=>n.name}))}function R(){const{data:t,isLoading:r,isError:m}=(0,u.xW)(),{data:s}=(0,u.sF)(),[o,f]=(0,e.useState)(!1),i=(0,y.wW)(M),c=()=>"Error fetching feature toggles",g=()=>{f(!0)},p=()=>e.createElement("div",{className:i.warning},e.createElement("div",{className:i.icon},e.createElement(S.J,{name:"exclamation-triangle"})),e.createElement("span",{className:i.message},s?.restartRequired||o?"A restart is pending for your Grafana instance to apply the latest feature toggle changes":"Saving feature toggle changes will prompt a restart of the instance, which may take a few minutes")),v=e.createElement("div",null,"View and edit feature toggles. Read more about feature toggles at"," ",e.createElement("a",{className:"external-link",target:"_new",href:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/feature-toggles/"},"grafana.com"),".");return e.createElement(T.T,{navId:"feature-toggles",subTitle:v},e.createElement(T.T.Contents,null,e.createElement(e.Fragment,null,m&&c(),r&&"Fetching feature toggles",s?.allowEditing&&e.createElement(p,null),t&&e.createElement(B,{featureToggles:t,allowEditing:s?.allowEditing||!1,onUpdateSuccess:g}))))}function M(t){return{warning:(0,d.css)({display:"flex",marginTop:t.spacing(.25),marginBottom:t.spacing(.25)}),icon:(0,d.css)({color:t.colors.warning.main,paddingRight:t.spacing()}),message:(0,d.css)({color:t.colors.text.secondary,marginTop:t.spacing(.25)})}}}}]);

//# sourceMappingURL=AdminFeatureTogglesPage.a2e3ad9188efa68c4725.js.map