"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9218],{48464:(U,S,e)=>{e.d(S,{Z:()=>D});var t=e(31733),T=e(41164),u=e(76804),O=e(51343),L=e(89962);class D extends t.PureComponent{render(){const{searchQuery:l,linkButton:i,setSearchQuery:c,target:d,placeholder:f="Search by name or type",sortPicker:y}=this.props,C={href:i?.href,disabled:i?.disabled};return d&&(C.target=d),t.createElement("div",{className:"page-action-bar"},t.createElement(T._,{grow:!0},t.createElement(u.H,{value:l,onChange:c,placeholder:f})),y&&t.createElement(L.P,{onChange:y.onChange,value:y.value,getSortOptions:y.getSortOptions}),i&&t.createElement(O.Qj,{...C},i.title))}}},89962:(U,S,e)=>{e.d(S,{P:()=>l});var t=e(31733),T=e(59326),u=e(38834),O=e(49311),L=e(86434),D=e(4502);const A=()=>(0,D.getGrafanaSearcher)().getSortOptions();function l({onChange:i,value:c,placeholder:d,filter:f,getSortOptions:y,isClearable:C}){const E=(0,T.Z)(async()=>{const M=await(y??A)();return f?M.filter(x=>f.includes(x.value)):M},[y,f]);if(E.loading)return null;const p=!!(c?.includes("desc")||c?.startsWith("-"));return t.createElement(u.Ph,{key:c,width:28,onChange:i,value:E.value?.find(M=>M.value===c)??null,options:E.value,"aria-label":"Sort",placeholder:d??`Sort (Default ${L.yw.label})`,prefix:t.createElement(O.J,{name:p?"sort-amount-down":"sort-amount-up"}),isClearable:C})}},51495:(U,S,e)=>{e.r(S),e.d(S,{PlaylistPage:()=>$,default:()=>at});var t=e(31733),T=e(59326),u=e(51343),O=e(90069),L=e(88511),D=e(50186),A=e(48464),l=e(53166),i=e(56811),c=e(76932),d=e(76067);const f=()=>{const a=(0,d.wW)(y);return t.createElement("div",{className:a.noResult},"No playlist found!")},y=a=>({noResult:(0,c.css)`
      padding: ${a.spacing(2)};
      background: ${a.colors.secondary.main};
      font-style: italic;
      margin-top: ${a.spacing(2)};
    `});var C=e(95885),E=e(49876),p=e(96305),M=e(58947),x=e(37739),z=e(69026),W=e(91977),I=e(5572),Z=e(97216),B=e(85765),k=e(96856),N=e(36356),H=e(64516),G=e(5334),V=e(66699);const J=({playlistUid:a,onDismiss:n})=>{const[o,s]=(0,t.useState)(!1),[r,g]=(0,t.useState)(!1),v=[{label:(0,l.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,l.t)("share-playlist.mode-tv","TV"),value:"tv"},{label:(0,l.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],h={};o&&(h.kiosk=o),r&&(h.autofitpanels=!0);const m=W.Cj.renderUrl(`${(0,V.OS)()}/play/${a}`,h);return t.createElement(I.u,{isOpen:!0,title:(0,l.t)("share-playlist.title","Share playlist"),onDismiss:n},t.createElement(Z.C,null,t.createElement(B.g,{label:(0,l.t)("share-playlist.mode","Mode")},t.createElement(k.S,{value:o,options:v,onChange:s})),t.createElement(B.g,null,t.createElement(N.X,{label:(0,l.t)("share-playlist.checkbox-label","Autofit"),description:(0,l.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:r,onChange:P=>g(P.currentTarget.checked)})),t.createElement(B.g,{label:(0,l.t)("share-playlist.link-url-label","Link URL")},t.createElement(H.I,{id:"link-url-input",value:m,readOnly:!0,addonAfter:t.createElement(G.m,{icon:"copy",variant:"primary",getText:()=>m},t.createElement(l.cC,{i18nKey:"share-playlist.copy-link-button"},"Copy"))}))))},X=({playlist:a,setStartPlaylist:n,setPlaylistToDelete:o})=>t.createElement(p.Z,null,t.createElement(p.Z.Heading,null,a.name,t.createElement(M.JY,{key:"button-share"},({showModal:s,hideModal:r})=>t.createElement(z.u,{tooltip:(0,l.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{s(J,{playlistUid:a.uid,onDismiss:r})}}))),t.createElement(p.Z.Actions,null,t.createElement(u.zx,{variant:"secondary",icon:"play",onClick:()=>n(a)},t.createElement(l.cC,{i18nKey:"playlist-page.card.start"},"Start playlist")),i.contextSrv.isEditor&&t.createElement(t.Fragment,null,t.createElement(u.Qj,{key:"edit",variant:"secondary",href:`/playlists/edit/${a.uid}`,icon:"cog"},t.createElement(l.cC,{i18nKey:"playlist-page.card.edit"},"Edit playlist")),t.createElement(u.zx,{disabled:!1,onClick:()=>o(a),icon:"trash-alt",variant:"destructive"},t.createElement(l.cC,{i18nKey:"playlist-page.card.delete"},"Delete playlist"))))),Y=({rootProps:a})=>{const n=(0,d.wW)(w);return t.createElement(p.Z,{...a},t.createElement(p.Z.Heading,null,t.createElement(E.Z,{width:140})),t.createElement(p.Z.Actions,null,t.createElement(x.K,{direction:"row",wrap:"wrap"},t.createElement(E.Z,{containerClassName:n.button,width:142,height:32}),i.contextSrv.isEditor&&t.createElement(t.Fragment,null,t.createElement(E.Z,{containerClassName:n.button,width:135,height:32}),t.createElement(E.Z,{containerClassName:n.button,width:153,height:32})))))},K=(0,C.y)(X,Y);function w(a){return{button:(0,c.css)({lineHeight:1})}}const q=({playlists:a,setStartPlaylist:n,setPlaylistToDelete:o})=>{const s=(0,d.wW)(b);return t.createElement("ul",{className:s.list},a.map(r=>t.createElement("li",{className:s.listItem,key:r.uid},t.createElement(K,{playlist:r,setStartPlaylist:n,setPlaylistToDelete:o}))))},_=({rootProps:a})=>{const n=(0,d.wW)(b);return t.createElement("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...a},t.createElement(K.Skeleton,null),t.createElement(K.Skeleton,null),t.createElement(K.Skeleton,null))},F=(0,C.y)(q,_);function b(a){return{list:(0,c.css)({display:"grid"}),listItem:(0,c.css)({listStyle:"none"})}}var tt=e(19690);const et=({playlist:a,onDismiss:n})=>{const[o,s]=(0,t.useState)(!1),[r,g]=(0,t.useState)(!1),v=[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],h=()=>{const m={};o&&(m.kiosk=o),r&&(m.autofitpanels=!0),tt.E1.push(W.Cj.renderUrl(`/playlists/play/${a.uid}`,m))};return t.createElement(I.u,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:n},t.createElement(Z.C,null,t.createElement(B.g,{label:"Mode"},t.createElement(k.S,{value:o,options:v,onChange:s})),t.createElement(N.X,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:r,onChange:m=>g(m.currentTarget.checked)})),t.createElement(I.u.ButtonRow,null,t.createElement(u.zx,{variant:"primary",onClick:h},"Start ",a.name)))};var Q=e(81039);const $=()=>{const a=(0,Q.K9)(),[n,o]=(0,t.useState)(0),[s,r]=(0,t.useState)(""),g=(0,T.Z)(()=>a.getAllPlaylist(),[n]),v=(0,t.useMemo)(()=>(0,Q.Ds)(g.value??[],s),[s,g]),[h,m]=(0,t.useState)(),[P,R]=(0,t.useState)(),lt=v&&v.length>0,nt=()=>R(void 0),st=()=>{P&&a.deletePlaylist(P.uid).finally(()=>{o(n+1),R(void 0)})},ot=t.createElement(L.Z,{title:(0,l.t)("playlist-page.empty.title","There are no playlists created yet"),buttonIcon:"plus",buttonLink:"playlists/new",buttonTitle:(0,l.t)("playlist-page.empty.button","Create Playlist"),buttonDisabled:!i.contextSrv.isEditor,proTip:(0,l.t)("playlist-page.empty.pro-tip","You can use playlists to cycle dashboards on TVs without user control"),proTipLink:"http://docs.grafana.org/reference/playlist/",proTipLinkTitle:(0,l.t)("playlist-page.empty.pro-tip-link-title","Learn more"),proTipTarget:"_blank"}),j=g.loading||v.length>0||s.length>0;return t.createElement(D.T,{actions:i.contextSrv.isEditor?t.createElement(u.Qj,{href:"/playlists/new"},t.createElement(l.cC,{i18nKey:"playlist-page.create-button.title"},"New playlist")):void 0,navId:"dashboards/playlists"},t.createElement(D.T.Contents,null,j&&t.createElement(A.Z,{searchQuery:s,setSearchQuery:r}),g.loading?t.createElement(F.Skeleton,null):t.createElement(t.Fragment,null,!lt&&s?t.createElement(f,null):t.createElement(F,{playlists:v,setStartPlaylist:m,setPlaylistToDelete:R}),!j&&ot,P&&t.createElement(O.s,{title:P.name,confirmText:(0,l.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,l.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:P.name}),onConfirm:st,isOpen:!!P,onDismiss:nt}),h&&t.createElement(et,{playlist:h,onDismiss:()=>m(void 0)}))))},at=$}}]);

//# sourceMappingURL=PlaylistPage.74035fb1e54731e2764f.js.map